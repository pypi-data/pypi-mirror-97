(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07626ab0"],{2275:function(e,t,r){"use strict";r("96cf");var n=r("1da1"),a=r("e8ba"),i=r("bd10"),c=r("8bb9"),s=r("4198");t["a"]={namespaced:!0,state:{},getters:{mode:s["b"],getProps:s["a"]},mutations:{initStoreKey:c["a"],updateItemProps:c["b"],loading:function(e,t){var r=t.uid,n=t.loading,a=t.item;e[r]={loading:n,item:a}}},actions:{initForm:i["b"],error:i["a"],read:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("loading",{uid:r.store.uid,item:{},loading:!0}),e.next=3,Object(a["a"])("read",t,r);case 3:n=e.sent,t.commit("loading",{uid:r.store.uid,item:n,loading:!1});case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),update:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.data=t.state[r.store.uid].item,e.next=3,Object(a["a"])("update",t,r);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}}},"45c4":function(e,t,r){},"5d41":function(e,t,r){var n=r("23e7"),a=r("861d"),i=r("825a"),c=r("5135"),s=r("06cf"),o=r("e163");function u(e,t){var r,n,p=arguments.length<3?e:arguments[2];return i(e)===p?e[t]:(r=s.f(e,t))?c(r,"value")?r.value:void 0===r.get?void 0:r.get.call(p):a(n=o(e))?u(n,t,p):void 0}n({target:"Reflect",stat:!0},{get:u})},"97f7":function(e,t,r){"use strict";r("96cf");var n=r("1da1"),a=r("bc3a"),i=r.n(a),c=r("2b0e");t["a"]={namespaced:!0,state:{},mutations:{schema:function(e,t){var r=t.uid,n=t.schema;c["a"].set(e,r,n)}},actions:{read:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",{});case 2:if(!Object.prototype.hasOwnProperty.call(e.state,t)){r.next=8;break}return r.next=5,e.state[t];case 5:return r.abrupt("return",r.sent);case 8:return console.log("load scheme "+t),n={},r.prev=10,r.next=13,i.a.get("/api/".concat(e.rootState.app,"/OcfSchema/read"),{params:{id:t}});case 13:a=r.sent,n=a.data,r.next=20;break;case 17:r.prev=17,r.t0=r["catch"](10),n={};case 20:return e.commit("schema",{uid:t,schema:n}),r.abrupt("return",n);case 22:case"end":return r.stop()}}),r,null,[[10,17]])})))()}}}},b39e:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r("8f74"),a=(r("99af"),r("4de4"),r("c975"),r("fb6a"),r("b0c0"),r("96cf"),r("1da1")),i=r("d4ec"),c=r("bee2"),s=r("257e"),o=r("262e"),u=r("2caf"),p=r("ade3"),l=function(){function e(t,r){Object(i["a"])(this,e),Object(p["a"])(this,"rawData",[]),Object(p["a"])(this,"filteredRawData",[]),Object(p["a"])(this,"total",0),Object(p["a"])(this,"rows",[]),Object(p["a"])(this,"props",{rows:[],page:1,filter:{},itemsPerPage:25,appName:"",objName:"",dataTableOptions:{},filterFields:[],keyProperty:"id"}),Object(p["a"])(this,"store",void 0),Object(p["a"])(this,"keyProperty",void 0),Object(p["a"])(this,"loading",!1),Object(p["a"])(this,"filterFields",[]),this.props.appName=r.state.app,this.store=r,this.changeProps(t),this.rawData=this.props.rows||[],this.keyProperty=this.props.keyProperty||"id"}return Object(c["a"])(e,[{key:"changeProps",value:function(e){this.props=Object(n["e"])(this.props,e)}},{key:"changeFilter",value:function(e){this.props.filter=Object(n["e"])(this.props.filter,e),this.props.dataTableOptions.page=1,this.query()}},{key:"query",value:function(){throw new Error("method query not implemented in source class")}},{key:"call",value:function(){throw new Error("method call not implemented in source class")}},{key:"read",value:function(){throw new Error("method read not implemented in source class")}}]),e}(),h={equals:function(e,t,r){return r[e["name"]]===t},in:function(e,t,r){return!(t[0]&&r[e["name"]]<t[0])&&!(t[1]&&r[e["name"]]>t[1])}},f=function(e){Object(o["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(p["a"])(Object(s["a"])(e),"data",[]),e}return Object(c["a"])(r,[{key:"queryAll",value:function(){this.loading=!0,this.filteredRawData=[];for(var e=0;e<this.rawData.length;e++){var t=this.rawData[e],r=!0;if(!Object(n["b"])(this.props.filter))for(var a=0;a<this.filterFields.length;a++)if(Object.prototype.hasOwnProperty.call(this.props.filter,this.fields[a]["name"])){var i=h[this.fields[a]["type"]||"equals"];if(!i(this.fields[a],this.props.filter[this.fields[a]["name"]],t)){r=!1;break}}if(r){if(Object(n["c"])(this.props.filter,"searchString")&&this.props.filter["searchString"])for(var c in r=!1,t)if(Object.prototype.hasOwnProperty.call(t,c))try{if(t[c].indexOf(this.props.filter["searchString"])>=0){r=!0;break}}catch(s){}r&&this.filteredRawData.push(t)}}return this.filteredRawData}},{key:"query",value:function(){this.queryAll();var e=this.props.itemsPerPage,t=this.props.page,r=(t-1)*e,n=r+e;this.rows=this.filteredRawData.slice(r,n),this.total=this.filteredRawData.length,this.loading=!1}},{key:"read",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"create",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(l),d=r("8e70"),m=function(e){Object(o["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(i["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"getAll",value:function(){return null}},{key:"queryAll",value:function(){return null}},{key:"query",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,r=this.props.itemsPerPage,a=this.props.page,i=Object(n["e"])({limit:r,page:a},this.props.filter),e.next=7,d["a"].get("/api/".concat(this.props.appName,"/").concat(this.props.objName,"/query"),{params:i});case 7:t=e.sent,this.rows=t.data.rows,this.total=(a-1)*r+this.rows.length+(this.rows.length<r?0:1),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),this.error=e.t0;case 15:this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"read",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,d["a"].get("/api/".concat(this.props.appName,"/").concat(this.props.objName,"/read"),{params:{id:t}});case 4:return r=e.sent,this.loading=!1,e.abrupt("return",r.data);case 7:return e.prev=7,this.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[1,,7,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"call",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,d["a"].post("/api/".concat(this.props.appName,"/").concat(this.props.objName,"/").concat(t.method),t.data);case 4:return r=e.sent,this.loading=!1,e.abrupt("return",r.data);case 7:return e.prev=7,this.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[1,,7,10]])})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(l),v=(r("e439"),r("5d41"),r("7e84"));function b(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(v["a"])(e),null===e)break;return e}function g(e,t,r){return g="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=b(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}},g(e,t,r||e)}var w=function(e){Object(o["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(p["a"])(Object(s["a"])(e),"data",[]),e}return Object(c["a"])(r,[{key:"queryAll",value:function(){return this.rawData=this.store.getters["".concat(this.props["storeName"],"/getRawDataSource")](this.props.filter.operation||{},{root:!0})||[],g(Object(v["a"])(r.prototype),"queryAll",this).call(this)}},{key:"read",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"create",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"call",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.actionName="".concat(this.props.appName,"/").concat(this.props.objName,"/").concat(t.method),t.dataSource=this.props,e.next=4,this.store.dispatch("".concat(this.props.storeName,"/").concat(this.props.dispatchName),t,{root:!0});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(f),O={Memory:f,Service:m,Vuex:w};function y(e,t){if(!Object(n["c"])(e,"type"))throw new Error("dataSource type not defined");if(Object(n["c"])(O,e["type"]))return new O[e["type"]](e,t);throw new Error("dataSource ".concat(e["type"]," not implemented"))}},d107:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0 ma-0"},[r("v-progress-linear",{attrs:{indeterminate:e.loading,height:"2","background-color":"header1_bg"}}),r("PanelToolBar",{attrs:{"tool-bar":e.toolBar,"header-value":e.title,"edit-header":!0,loading:e.loading},on:{action:e.onAction}}),e.loading?e._e():r("v-container",{staticClass:"pa-4 ma-0"},[e.mainRes.length?r("v-container",{staticClass:"pa-0 ma-0"},e._l(e.mainRes,(function(t,n){return r("OcfResourceTmpl",{key:n,attrs:{res:e.deviceLink.res[t.index],href:t.href,di:e.item._id,ep:e.item.ep},on:{action:e.onAction}})})),1):e._e(),e.serviceRes.length?r("div",{staticClass:"text-h6 py-2"},[e._v(" "+e._s(e.$t("ocfServiceResTitle"))+" ")]):e._e(),e.serviceRes.length?r("v-container",{staticClass:"pa-0 ma-0"},e._l(e.serviceRes,(function(t,n){return r("OcfResourceTmpl",{key:n,attrs:{res:e.deviceLink.res[t.index],href:t.href,di:e.item._id,ep:e.item.ep},on:{action:e.onAction}})})),1):e._e()],1)],1)},a=[],i=(r("4de4"),r("7db0"),r("b0c0"),r("d3b7"),r("96cf"),r("1da1")),c=r("bf28"),s=r("dce2"),o=r("8f74"),u=r("b39e"),p=r("2275"),l=r("97f7"),h={name:"OcfDevice",components:{OcfResourceTmpl:function(){return Promise.all([r.e("chunk-75f0404a"),r.e("chunk-f984ecc2"),r.e("chunk-2c33c399"),r.e("chunk-2d0c849f")]).then(r.bind(null,"53f1"))},PanelToolBar:function(){return Promise.all([r.e("chunk-75f0404a"),r.e("chunk-f984ecc2"),r.e("chunk-5bb29098"),r.e("chunk-52fcaa94"),r.e("chunk-03738786")]).then(r.bind(null,"7d5d"))}},mixins:[c["a"],s["a"]],props:{toolBar:{type:Object,default:function(){return{items:[]}}},defaultAction:{type:Object,default:function(){return{}}},dataSource:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1,loading:!1,active:[],avatar:null,open:[],props_schema:null,props_data:null,source:null,deviceLink:{},resIndex:{},mainRes:[],serviceRes:[]}},computed:{title:function(){return this.deviceLink.res&&this.resIndex?this.deviceLink.res[this.resIndex["/oic/d"]]["n"]:this.item["n"]},selected:function(){if(this.active.length){var e=this.active[0];return this.users.find((function(t){return t.id===e}))}},uid:function(){if(this.item&&this.source&&this.source.keyProperty)return this.item[this.source.keyProperty]}},watch:{uid:function(e){e&&this.init()},dataSource:function(){this.source=Object(u["a"])(this.dataSource,this.$store)}},beforeMount:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.source=Object(u["a"])(e.dataSource,e.$store);case 1:case"end":return t.stop()}}),t)})))()},beforeCreate:function(){Object(o["c"])(this.$store.state,this.$options.name)||this.$store.registerModule(this.$options.name,p["a"]),Object(o["c"])(this.$store.state,"OcfSchema")||this.$store.registerModule("OcfSchema",l["a"])},methods:{init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Object(o["c"])(e.item,"res")){t.next=4;break}e.deviceLink=e.item,t.next=7;break;case 4:return t.next=6,e.source.read(e.uid);case 6:e.deviceLink=t.sent;case 7:if(e.resIndex={},e.mainRes=[],e.serviceRes=[],r=e.deviceLink["res"],r){for(n=0;n<r.length;n++)a=r[n]["href"],i="ocfServiceRes.".concat(a),e.resIndex[a]=n,c=e.mainRes,c=e.$t(i)===i?e.mainRes:e.serviceRes,c.push({href:a,index:n});Object(o["d"])(e.mainRes,"href"),Object(o["d"])(e.serviceRes,"href")}case 12:case"end":return t.stop()}}),t)})))()},actionUpdateHeader:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("change"!==e.data.action){r.next=6;break}return t.loading=!0,r.next=4,t.$store.dispatch("OcfResource/update",{di:t.item._id,ep:t.item.ep,href:"/oic/d",res:{n:e.data.value}},{root:!0});case 4:t.edit=!1,t.loading=!1;case 6:case"end":return r.stop()}}),r)})))()},actionCallDataSourceForSelectedItems:function(e){var t,r=Object(o["e"])({data:{}},e);t=Object(o["c"])(e,"dataSource")?Object(u["a"])(e.dataSource,this.$store):this.source,r.data.items=[this.deviceLink],r.data.filter=null,t.call(r)}}},f=h,d=(r("e83e"),r("2877")),m=r("6544"),v=r.n(m),b=r("a523"),g=r("8e36"),w=Object(d["a"])(f,n,a,!1,null,null,null);t["default"]=w.exports;v()(w,{VContainer:b["a"],VProgressLinear:g["a"]})},e83e:function(e,t,r){"use strict";var n=r("45c4"),a=r.n(n);a.a}}]);
//# sourceMappingURL=chunk-07626ab0.38c74922.js.map