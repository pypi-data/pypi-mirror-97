(self.webpackChunkatoti_jupyterlab=self.webpackChunkatoti_jupyterlab||[]).push([[3963],{73963:(e,o,n)=>{"use strict";n.r(o),n.d(o,{default:()=>re});var r=n(56271),t=n(8336),i=n(25654),a=n(39349),s=n(32596),l=n(10208),d=(n(47564),n(83850),n(66434),n(87349),n(9049),n(55188),n(41305),n(61570),n(32362),n(6381),n(14314),n(66146)),u=n(48578),m=n(35676),c=n.n(m),g=n(16760),f=n.n(g),p=n(55281),v=n.n(p);const E=["AddCalculatedMembers","Aggregate","AllMembers","Ancestor","Ancestors","Ascendants","Avg","Axis","BottomCount","BottomPercent","BottomSum","CalculationCurrentPass","CalculationPassValue","CASE Statement","CDate","Children","ClosingPeriod","CoalesceEmpty","Correlation","Count","Cousin","Covariance","CovarianceN","Crossjoin","Current","CurrentMember","CurrentOrdinal","CustomData","DataMember","DefaultMember","Descendants","Dimension","Dimensions","Distinct","DistinctCount","Divide","DrilldownLevel","DrilldownLevelBottom","DrilldownLevelTop","DrilldownMember","DrilldownMemberBottom","DrilldownMemberTop","DrillupLevel","DrillupMember","Error","Except","Exists","Extract","Filter","FirstChild","FirstSibling","Generate","Head","Hierarchize","Hierarchy","IIf","Instr","Intersect","IsAncestor","IsDate","IsEmpty","IsGeneration","IsLeaf","IsSibling","Item","Lag","LastChild","LastPeriods","LastSibling","Lead","Leaves","Level","Levels","LinkMember","LinRegIntercept","LinRegPoint","LinRegR2","LinRegSlope","LinRegVariance","LookupCube","Max","MeasureGroupMeasures","Median","Members","MemberToStr","MemberValue","Min","Mtd","Name","NameToSet","NextMember","NonEmpty","NonEmptyCrossjoin","OpeningPeriod","Order","Ordinal","ParallelPeriod","Parent","PeriodsToDate","Predict","PrevMember","Properties","Qtd","Rank","RollupChildren","Root","SetToArray","SetToStr","Siblings","Stddev","StddevP","Stdev","StdevP","StripCalculatedMembers","StrToMember","StrToSet","StrToTuple","StrToValue","Subset","Sum","Tail","This","ToggleDrillState","TopCount","TopPercent","TopSum","TupleToStr","Union","UniqueName","UnknownMember","Unorder","UserName","ValidMeasure","Value","Var","Variance","VarianceP","VarP","VisualTotals","Wtd","Ytd"],h=["KPICurrentTimeMember","KPIExpiry","KPIGoal","KPIStart","KPIStatus","KPITrend","KPIValue","KPIWeight"],M=["ALL","DIMENSIONS","IGNORE","END","ASC","DESC","BASC","BDESC","POST","AFTER","BEFORE","BEFORE_AND_AFTER","LEAVES","SELF","SELF_AND_AFTER","SELF_AND_BEFORE","SELF_BEFORE_AFTER","EXCLUDEEMPTY","INCLUDEEMPTY","RECURSIVE","INCLUDE_CALC_MEMBERS","CONSTRAINED","TYPED"],b=["ANCESTOR_CAPTION","CATALOG_NAME","CHILDREN_CARDINALITY","CUBE_NAME","DESCRIPTION","DISPLAY_INFO","DIMENSION_UNIQUE_NAME","HIERARCHY_UNIQUE_NAME","IS_DATAMEMBER","IS_PLACEHOLDERMEMBER","IS_UNKNOWNMEMBER","LEVEL_NUMBER","LEVEL_UNIQUE_NAME","MEMBER_CAPTION","MEMBER_GUID","MEMBER_KEY","MEMBER_NAME","MEMBER_ORDINAL","MEMBER_TYPE","MEMBER_VALUE","MEMBER_UNIQUE_NAME","PARENT_COUNT","PARENT_LEVEL","PARENT_UNIQUE_NAME","SCHEMA_NAME","SKIPPED_LEVELS","UNARY_OPERATOR","UNIQUE_NAME"],N=["CHAPTERS","COLUMNS","PAGES","ROWS","SECTIONS","SLICER"],y=["BACK_COLOR","CELL_ORDINAL","FONT_FLAGS","FONT_NAME","FONT_SIZE","FORE_COLOR","FORMAT","FORMAT_STRING","FORMATTED_VALUE","VALUE"],A=["AND","IS","NOT","OR","XOR"],C=["FALSE","NULL","TRUE"],S=["AS","AXIS","CASE","CELL","CREATE","DIMENSION","DYNAMIC","DRILLTHROUGH","DROP","ELSE","END","EXISTING","EMPTY","FIRSTROW","FROM","GLOBAL","HIDDEN","MAXROWS","MEMBER","NON","ON","PROPERTIES","REFRESH","RETURN","SELECT","SESSION","SET","STATIC","THEN","VISUAL","WHEN","WHERE","WITH"],k={id:"mdx",monarchLanguage:{defaultToken:"",tokenPostfix:".mdx",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{close:"(",open:")",token:"delimiter.parenthesis"}],functionKeywords:E,kpiKeywords:h,argumentKeywords:M,memberPropertyKeywords:b,axisKeywords:N,cellPropertyKeywords:y,booleanOperatorKeywords:A,booleanKeywords:C,structuralKeywords:S,tokenizer:{root:[{include:"@comments"},{include:"@whiteSpace"},{include:"@numbers"},{include:"@strings"},{include:"@delimitedIdentifier"},[/[\w@]+/,{cases:{"@structuralKeywords":"keyword.structural","@booleanKeywords":"boolean","@booleanOperatorKeywords":"keyword.booleanOperator","@axisKeywords":"keyword.axis","@cellPropertyKeywords":"keyword.cellProperty","@functionKeywords":"keyword.function","@kpiKeywords":"keyword.kpi","@memberPropertyKeywords":"keyword.memberProperty","@argumentKeywords":"keyword.argument","@default":"identifier.regular"}}],{include:"@operators"}],comments:[[/(^|[^\\:])\/\/.*/,"comment"],[/(^|[^\\:])-{2}.*/,"comment"],[/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,"comment"]],whiteSpace:[[/\s+/,"white"]],numbers:[[/\d*\.\d+(E(\+|-)?\d+)?/,"number"],[/\d+/,"number"]],operators:[[/\+|\/|\*|\^|-/,"operator"],[/>=|<=|<>|=|>|</,"operator"],[/:|&/,"operator"]],delimitedIdentifier:[[/\[([^\]]{0,100})\]/,"identifier.delimited"]],strings:[[/'/,{token:"string",next:"@string"}],[/"/,{token:"string.double",next:"@stringDouble"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],stringDouble:[[/[^"]+/,"string.double"],[/""/,"string.double"],[/"/,{token:"string.double",next:"@pop"}]]}},configuration:{comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/.*\bSELECT\s*$/,action:{indentAction:1}},{beforeText:/.*\bFROM\s*$/,action:{indentAction:1}}]}},L={provideDocumentFormattingEdits:e=>{try{return[{range:e.getFullModelRange(),text:(0,l.Pz)((0,l.Qc)(e.getValue()),{indent:!0})}]}catch{}}},I=(e,o,n=0)=>e.getValueInRange({startColumn:0,endColumn:o.column,startLineNumber:o.lineNumber-n,endLineNumber:o.lineNumber}),R=({label:e={name:""},insertText:o,kind:n=d.Mj.CompletionItemKind.Constant,...r})=>({label:e,kind:n,insertText:void 0!==o?o:"string"==typeof e?e:e.name,range:void 0,...r}),w=e=>c()(f()(null==e?void 0:e.catalogs,"cubes")),x={getSuggestions:({position:e,textModel:o,dataModel:n})=>{var r;const t=I(o,e);if(t.toLowerCase().includes("from "))return[];const i=t.match(/(\[(?<dimension>[^\]]*)\]?)(?<dotAfterDimension>\s*\.\s*)?((?:(\[(?<quotedHierarchy>[^\]]*)\]?)|(?<unquotedHierarchy>\s*\w*\s*)))?(?<dotAfterHierarchy>\s*\.\s*)?((?:(\[(?<quotedLevel>[^\]]*)\]?)|(?<unquotedLevel>\s*\w*\s*)))?(?<dotAfterLevel>\s*\.\s*)?(?<property>.*)?$/i);if(null!==i&&"Measures"!==(null===(r=i.groups)||void 0===r?void 0:r.dimension)){const{dimension:e,quotedHierarchy:o,unquotedHierarchy:r,quotedLevel:t,unquotedLevel:u,dotAfterDimension:m,dotAfterHierarchy:c,dotAfterLevel:g}=i.groups||{},f=o||r;var a,s;if(void 0===m)return[R({kind:d.Mj.CompletionItemKind.Unit,label:"Measures",preselect:!0}),...null===(a=w(n))||void 0===a?void 0:a.reduce(((e,{name:o,dimensions:n})=>(e.push(...n.map((({name:e})=>R({label:{name:e,qualifier:o}})))),e)),[])];if(void 0===c)return null===(s=w(n))||void 0===s?void 0:s.reduce(((o,{name:n,dimensions:r})=>{var t,i;return o.push(...(null===(t=r.find((({name:o})=>o===e)))||void 0===t||null===(i=t.hierarchies)||void 0===i?void 0:i.map((({name:o})=>R({label:{name:o,qualifier:`${n}/${e}`}}))))||[]),o}),[]);if(void 0===g){var l;const o=null===(l=w(n))||void 0===l?void 0:l.reduce(((o,{name:n,dimensions:r})=>{var t,i,a;return o.push(...(null===(t=r.find((({name:o})=>o===e)))||void 0===t||null===(i=t.hierarchies.find((({name:e})=>e===f)))||void 0===i||null===(a=i.levels)||void 0===a?void 0:a.map((({name:o})=>R({label:{name:o,qualifier:`${n}/${e}/${f}`}}))))||[]),o}),[]);return[R({label:{name:"AllMember",qualifier:`${e}/${f}`},preselect:!0}),...o]}const p="ALL"===(t||u)?[R({label:{name:"AllMember",qualifier:`${e}/${f}`},preselect:!0})]:[];return p.push(...b.map((e=>R({label:e,kind:d.Mj.CompletionItemKind.Property,sortText:"zzz"})))),p}return[]}},T={getSuggestions:({position:e,textModel:o,dataModel:n})=>{var r;const t=I(o,e);if(t.toLowerCase().includes("from "))return[];const i=t.match(/(\[Measures])(.)(\[?)([^\]]*)(?<CB>\])*/i);var a;return null!==i&&void 0===(null===(r=i.groups)||void 0===r?void 0:r.CB)?null===(a=w(n))||void 0===a?void 0:a.reduce(((e,{name:o,measures:n})=>(e.push(...(null==n?void 0:n.map((({name:e})=>R({label:{name:e,qualifier:o}}))))||[]),e)),[]):[]}},D={getSuggestions:({position:e,textModel:o,dataModel:n})=>{var r;return null!==I(o,e,1).match(new RegExp(`(${h.join("|")})[(][^)]*`,"i"))?null===(r=w(n))||void 0===r?void 0:r.reduce(((e,{name:o,kpis:n})=>(e.push(...(null==n?void 0:n.map((({name:e})=>R({kind:d.Mj.CompletionItemKind.Event,label:{name:e,qualifier:o}}))))||[]),e)),[]):[]}},P={getSuggestions:({position:e,textModel:o})=>null!==I(o,e).match(/(\bON\b\s*)([\w]*)$/i)?N.map((e=>R({label:e}))):[]},O={getSuggestions:({position:e,textModel:o,dataModel:n})=>{var r;const t=I(o,e).match(/(FROM\s+)(\[)([^\]]*)(?<CB>\])*/i);return null!==t&&void 0===(null===(r=t.groups)||void 0===r?void 0:r.CB)?w(n).map((({name:e})=>R({kind:d.Mj.CompletionItemKind.Interface,label:e}))):[]}},_=(e,o,n)=>{const r=[O,P,T,x,D].reduce(((r,{getSuggestions:t})=>[...r,...t({position:e,textModel:o,dataModel:n})]),[]);return r.length>0?r:[...[...E,...h,...b,...M].map((e=>R({kind:d.Mj.CompletionItemKind.Function,label:e}))),...[...N].map((e=>R({kind:d.Mj.CompletionItemKind.EnumMember,label:e}))),...[...C,...A].map((e=>R({kind:d.Mj.CompletionItemKind.Operator,label:e}))),...[...S,...y].map((e=>R({kind:d.Mj.CompletionItemKind.Keyword,label:e})))]},$={id:"dark-theme",data:{base:"vs-dark",inherit:!0,rules:[{token:"identifier.delimited",foreground:"#9f9f9f",fontStyle:"bold"},{token:"identifier.regular",foreground:"#9d9d9d",fontStyle:"bold"},{token:"keyword.structural",foreground:"#c792ea",fontStyle:"bold"},{token:"keyword.axis",foreground:"#c792ea",fontStyle:"bold"},{token:"keyword.function",foreground:"#82aaff"},{token:"keyword.kpi",foreground:"#82aaff"},{token:"keyword.memberProperty",foreground:"#82aaff"},{token:"keyword.argument",foreground:"#addb67",fontStyle:"bold"},{token:"keyword.booleanOperator",foreground:"#397800"},{token:"keyword.cellProperty",foreground:"#397800",fontStyle:"bold"},{token:"boolean",foreground:"#addb67"},{token:"number",foreground:"#ff901e"},{token:"operator",foreground:"#ff8000"},{token:"comment",foreground:"#aa5500"}],colors:{"editor.foreground":"#d6deeb","editor.background":"#011627","editor.selectionBackground":"#5f7e9779","editor.lineHighlightBackground":"#010E17","editorCursor.foreground":"#80a4c2","editorWhitespace.foreground":"#2e2040","editorIndentGuide.background":"#5e81ce52","editor.selectionHighlightBorder":"#122d42"}}},K={id:"light-theme",data:{base:"vs",inherit:!0,rules:[{token:"identifier.delimited",foreground:"#1b1a1a",fontStyle:"bold"},{token:"identifier.regular",foreground:"#5a5a5a",fontStyle:"bold"},{token:"keyword.structural",foreground:"#3399ff",fontStyle:"bold"},{token:"keyword.axis",foreground:"#3399ff",fontStyle:"bold"},{token:"keyword.function",foreground:"#59bb00"},{token:"keyword.kpi",foreground:"#59bb00"},{token:"keyword.memberProperty",foreground:"#59bb00"},{token:"keyword.argument",foreground:"#ff901e",fontStyle:"bold"},{token:"keyword.booleaOperator",foreground:"#397800"},{token:"keyword.cellProperty",foreground:"#397800",fontStyle:"bold"},{token:"boolean",foreground:"#ff901e"},{token:"number",foreground:"#ff901e"},{token:"operator",foreground:"#ff8000"},{token:"comment",foreground:"#aa5500"}],colors:{}}},F=e=>c()(f()(null==e?void 0:e.catalogs,"cubes")),U=e=>c()(f()(F(e),"dimensions")),B=(e,o)=>{var n,r;return null!==(n=null===(r=v()(U(e),["name",o]))||void 0===r?void 0:r.hierarchies)&&void 0!==n?n:[]},V=(e,{dimensionName:o,hierarchyName:n})=>{var r,t;return null!==(r=null===(t=v()(B(e,o),["name",n]))||void 0===t?void 0:t.levels)&&void 0!==r?r:[]},q="#faad14",H=({type:e,classNames:o={}})=>{const n={error:{color:"red",className:o.line_error,position:4,zIndex:10},warning:{color:q,className:o.line_warning,position:1,zIndex:1}};return(o,r,t,i={})=>({range:d.e6.fromPositions(o.getPositionAt(r),o.getPositionAt(r+t)),options:{overviewRuler:{color:n[e].color,position:n[e].position},inlineClassName:n[e].className,zIndex:n[e].zIndex,...i}})},j=(e="",o=[])=>o.reduce(((o,n)=>{const r=((e="",o="")=>{if(e.length<2||o.length<2)return 0;const n=new Map;for(let o=0;o<e.length-1;o++){var r;const t=e.substr(o,2);n.set(t,null!==(r=n.get(t))&&void 0!==r?r:1)}let t=0;for(let e=0;e<o.length-1;e++){var i;const r=o.substr(e,2),a=null!==(i=n.get(r))&&void 0!==i?i:0;a>0&&(n.set(r,a-1),t++)}return 2*t/(e.length+o.length-2)})(n,e);return o.coefficient<r?{hint:n,coefficient:r}:o}),{hint:"",coefficient:0}),W=({header:e="",body:o="",hint:n={coefficient:0,hint:""},formatMessage:r=(()=>"")})=>{const t=[{value:`#### **${e}**`}];return n.coefficient>.65&&t.push({value:`${r({id:"aui.mdxEditor.hover.didYouMean"})}: ***${n.hint}?***`,isTrusted:!0}),t.push({value:o}),t},G={getDecorations:({textModel:e,mdxErrorDetails:o,classNames:n,formatMessage:r=(()=>"")})=>{var t,i;if(!o)return[];const a=((e,o)=>{const n=d.j6.createModel(e);try{if(o.from.ch>=0){const e=n.getValueInRange(new d.e6(o.from.line+1,o.from.ch,o.to.line+1,n.getLineLastNonWhitespaceColumn(o.to.line+1))),r=e.length-e.trimLeft().length;return new d.e6(o.from.line+1,o.from.ch+r,o.to.line+1,o.to.ch+r)}return new d.e6(o.from.line,n.getLineLastNonWhitespaceColumn(o.from.line),o.to.line+1,n.getLineFirstNonWhitespaceColumn(o.to.line+1)+o.text.length)}catch{return new d.e6(0,0,0,0)}})(e.getValue(),o),s=e.getOffsetAt(a.getStartPosition());return[H({type:"error",classNames:n})(e,s,e.getOffsetAt(a.getEndPosition())-s,{hoverMessage:W({header:`${r({id:"aui.mdxEditor.hover.errorOnLine"})} ***${a.startLineNumber}***`,body:`${r({id:"aui.mdxEditor.hover.availableOptionsAre"})} : \n${null===(t=o.expected)||void 0===t?void 0:t.map((e=>`- ${e}`)).join("\n")}`,hint:j(o.text,null===(i=o.expected)||void 0===i?void 0:i.map((e=>e.replace(/'/g,"")))),formatMessage:r})})]}},Y={getDecorations:({textModel:e,classNames:o,formatMessage:n=(()=>"")})=>{const r=e.getValue().matchAll(/(?<function>\w+)\(/gi),t=[...E,...h],i=[];for(const m of r){var a,s,l,d,u;m.index&&!["FROM",...t].map((e=>e.toLowerCase())).includes((null!==(a=null===(s=m.groups)||void 0===s?void 0:s.function)&&void 0!==a?a:"").toLowerCase())&&i.push(H({type:"warning",classNames:o})(e,m.index,null===(l=m[0])||void 0===l?void 0:l.length,{hoverMessage:W({header:`${n({id:"aui.mdxEditor.hover.unkownFunction"})} ***${null===(d=m.groups)||void 0===d?void 0:d.function}***`,body:`${n({id:"aui.mdxEditor.hover.availableFunctionsAre"})} : \n${t.map((e=>`- ${e}`)).join("\n")}`,hint:j(null===(u=m.groups)||void 0===u?void 0:u.function,t),formatMessage:n})}))}return i}},z={getDecorations:({textModel:e,dataModel:o,classNames:n,formatMessage:r=(()=>"")})=>{if(!o)return[];const t=e.getValue().matchAll(/(FROM\s+)(?:(?<rcube>(\w+))|(\[(?<qcube>.*)\]))/gi),i=F(o).map((({name:e})=>e)),a=[];for(const o of t){const{groups:{rcube:t,qcube:l}={rcube:void 0,qcube:void 0}}=o||{},d=(void 0===t?l:t)||"";var s;o.index&&!i.includes(d)&&a.push(H({type:"warning",classNames:n})(e,o.index,null===(s=o[0])||void 0===s?void 0:s.length,{hoverMessage:W({header:`${r({id:"aui.mdxEditor.hover.invalidCube"})} ***${d}***`,body:`${r({id:"aui.mdxEditor.hover.availableCubesAre"})} : \n${i.map((e=>`- ${e}`)).join("\n")}`,hint:j(d,i),formatMessage:r})}))}return a}},Q={getDecorations:({textModel:e,dataModel:o,classNames:n,formatMessage:r=(()=>"")})=>{if(!o)return[];const t=e.getValue().matchAll(/(\[(?<dimensionName>[^\]]*)\]?)(?<dotAfterDimension>\s*\.\s*)?((?:(\[(?<quotedHierarchy>[^\]]*)\]?)|(?<unquotedHierarchy>\w*)))?(?<dotAfterHierarchy>\s*\.\s*)?((?:(\[(?<quotedLevel>[^\]]*)\]?)|(?<unquotedLevel>\w*)))?(?<dotAfterLevel>\s*\.\s*)?(?<property>.*)?/gim),i=[],a=H({type:"warning",classNames:n});for(const n of t){var s;if(!n.index)continue;const{dimensionName:t,dotAfterDimension:c,quotedHierarchy:g,unquotedHierarchy:f,dotAfterHierarchy:p,quotedLevel:v,unquotedLevel:E}=n.groups||{},h=e.getPositionAt(n.index);if("Measures"===t||e.getValueInRange({startLineNumber:h.lineNumber,endLineNumber:h.lineNumber,startColumn:0,endColumn:h.column}).toLowerCase().includes("from"))continue;const M=U(o).map((({name:e})=>e));if(!M.includes(t)){var l;i.push(a(e,n.index,null===(l=n[0])||void 0===l?void 0:l.length,{hoverMessage:W({header:`${r({id:"aui.mdxEditor.hover.invalidDimension"})} ***${t}***`,body:`${r({id:"aui.mdxEditor.hover.availableDimensionsAre"})} : \n${M.map((e=>`- ${e}`)).join("\n")}`,hint:j(t,M),formatMessage:r})}));continue}const b=null!==(s=g||f)&&void 0!==s?s:"";if(c){const s=B(o,t).map((({name:e})=>e));if(!s.includes(b)){var d;i.push(a(e,n.index,null===(d=n[0])||void 0===d?void 0:d.length,{hoverMessage:W({header:r({id:"aui.mdxEditor.hover.hierarchyWarning"},{dimensionName:t,hierarchyName:b}),body:`${r({id:"aui.mdxEditor.hover.availableHierarchiesAre"},{dimensionName:t,hierarchyName:b})} : \n${s.map((e=>`- ${e}`)).join("\n")}`,hint:j(b,s),formatMessage:r})}));continue}}if(p){var u;const s=null!==(u=v||E)&&void 0!==u?u:"",l=V(o,{dimensionName:t,hierarchyName:b}).map((({name:e})=>e));if(![...l,"AllMember"].includes(s)){var m;i.push(a(e,n.index,null===(m=n[0])||void 0===m?void 0:m.length,{hoverMessage:W({header:r({id:"aui.mdxEditor.hover.levelWarning"},{hierarchyName:b,levelName:s}),body:`${r({id:"aui.mdxEditor.hover.availableLevelsAre"},{dimensionName:t,hierarchyName:b})} : \n${l.map((e=>`- ${e}`)).join("\n")}`,hint:j(s,l),formatMessage:r})}));continue}}}return i}},X={getDecorations:({textModel:e,dataModel:o,classNames:n,formatMessage:r=(()=>"")})=>{var t;if(!o)return[];const i=e.getValue().matchAll(new RegExp(`(${h.join("|")})[(][^]*?"(?<kpi>.*)"[^]*?[)]`,"gim")),a=null===(t=F(o))||void 0===t?void 0:t.reduce(((e,{kpis:o})=>(e.push(...(null==o?void 0:o.map((({name:e})=>e)))||[]),e)),[]),s=[];for(const o of i){var l,d;const t=null!==(l=null===(d=o.groups)||void 0===d?void 0:d.kpi)&&void 0!==l?l:"";var u;o.index&&!a.includes(t)&&s.push(H({type:"warning",classNames:n})(e,o.index,null===(u=o[0])||void 0===u?void 0:u.length,{hoverMessage:W({header:`${r({id:"aui.mdxEditor.hover.invalidKPI"})} ***${t}***`,body:`${r({id:"aui.mdxEditor.hover.availableKPIsAre"})} : \n${a.map((e=>`- ${e}`)).join("\n")}`,hint:j(t,a),formatMessage:r})}))}return s}},Z={getDecorations:({textModel:e,dataModel:o,classNames:n,formatMessage:r=(()=>"")})=>{if(!o)return[];const t=e.getValue().matchAll(/(\[Measures]).(?:(\[(?<qmeasure>.*)\])|(?<rmeasure>\w*))/gi),i=(e=>c()(f()(F(e),"measures")))(o).map((({name:e})=>e)),a=[];for(const o of t){var s;const{groups:{rmeasure:t,qmeasure:d}={rmeasure:void 0,qmeasure:void 0}}=o||{},u=null!==(s=null!=t?t:d)&&void 0!==s?s:" ";if(o.index&&!i.includes(u)){var l;const t=e.getPositionAt(o.index);if(e.getValueInRange({startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:0,endColumn:t.column}).toLowerCase().includes("from"))continue;a.push(H({type:"warning",classNames:n})(e,o.index,null===(l=o[0])||void 0===l?void 0:l.length,{hoverMessage:W({header:`${r({id:"aui.mdxEditor.hover.invalidMeasure"})} **${u}**`,body:`${r({id:"aui.mdxEditor.hover.availableMeasuresAre"})} : \n${i.map((e=>`- ${e}`)).join("\n")}`,hint:j(u,i),formatMessage:r})}))}}return a}},J=e=>`background-image:\n     linear-gradient(45deg, transparent 65%, ${e} 80%, transparent 90%),\n     linear-gradient(135deg, transparent 5%, ${e} 15%, transparent 25%),\n     linear-gradient(135deg, transparent 45%, ${e} 55%, transparent 65%),\n     linear-gradient(45deg, transparent 25%, ${e} 35%, transparent 50%);\n     background-repeat:repeat-x;\n     background-size: 8px 2px;\n     background-position:0 95%;`,ee={line_error:J("red"),line_warning:J(q)},oe=()=>{},ne=({value:e,dataModel:o,classNames:n={},onChange:i=oe})=>{const{formatMessage:m}=(0,a.useIntl)(),[c,g]=(0,r.useState)(),[f,p]=(0,r.useState)(),v=(0,r.useMemo)((()=>({tabSize:2})),[]),E=(0,r.useMemo)((()=>(e=>({triggerCharacters:["[","."],provideCompletionItems:(o,n,r,t)=>{if(!t.isCancellationRequested)return{suggestions:_(n,o,e)}}}))(o)),[o]),h=(0,r.useMemo)((()=>(({value:e,mdxErrorDetails:o,dataModel:n,classNames:r,formatMessage:t})=>{if(!e)return[];const i=d.j6.createModel(e);return[G,Z,Q,z,X,Y].reduce(((e,{getDecorations:a})=>[...e,...a({textModel:i,mdxErrorDetails:o,dataModel:n,classNames:r,formatMessage:t})]),[])})({value:e,dataModel:o,mdxErrorDetails:f,classNames:n,formatMessage:m})),[e,f,o,n,m]),M=(0,s.Fg)();return(0,r.useEffect)((()=>{g(M.isDark?$:K)}),[M.isDark]),(0,r.useEffect)((()=>{try{e&&(0,l.Qc)(e),p(void 0)}catch(e){if(!(e instanceof l.wb))throw e;p(e.details)}}),[e]),(0,t.jsx)(u.default,{value:e,onChange:i,language:k,theme:c,options:v,documentFormattingEditProvider:L,completionItemProvider:E,deltaDecorations:h})},re=e=>(0,t.jsx)(t.ClassNames,null,(({css:o})=>(0,t.jsx)(ne,(0,i.Z)({},e,{classNames:{line_error:o(ee.line_error),line_warning:o(ee.line_warning)}}))))},98776:(e,o,n)=>{var r=n(68286),t=n(67878),i=n(90249);e.exports=function(e){return function(o,n,a){var s=Object(o);if(!t(o)){var l=r(n,3);o=i(o),n=function(e){return l(s[e],e,s)}}var d=e(o,n,a);return d>-1?s[l?o[d]:d]:void 0}}},55281:(e,o,n)=>{var r=n(98776)(n(12982));e.exports=r}}]);