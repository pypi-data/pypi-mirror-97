(self.webpackChunkatoti_jupyterlab=self.webpackChunkatoti_jupyterlab||[]).push([[6099],{96099:(e,t,a)=>{"use strict";e.exports=a(52437)},18457:e=>{"use strict";e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},42935:(e,t,a)=>{"use strict";var n=a(61782).extendFlat,i=a(61782).extendDeep,l=a(23233).overrideAll,r=a(95980),o=a(73925),s=a(5227).Y,c=a(3116),u=a(61608).templatedArray,d=a(18457),h=a(30755).FORMAT_LINK,g=r({editType:"plot",colorEditType:"plot"}),p={color:{valType:"color",editType:"plot",role:"info",description:["Sets the background color of the arc."].join(" ")},line:{color:{valType:"color",role:"info",dflt:o.defaultLine,editType:"plot",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",role:"info",min:0,dflt:0,editType:"plot",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},thickness:{valType:"number",role:"info",min:0,max:1,dflt:1,editType:"plot",description:["Sets the thickness of the bar as a fraction of the total thickness of the gauge."].join(" ")},editType:"calc"},f={valType:"info_array",role:"info",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["Sets the range of this axis."].join(" ")},m=u("step",i({},p,{range:f}));e.exports={mode:{valType:"flaglist",editType:"calc",role:"info",flags:["number","delta","gauge"],dflt:"number",description:["Determines how the value is displayed on the graph.","`number` displays the value numerically in text.","`delta` displays the difference to a reference value in text.","Finally, `gauge` displays the value graphically on an axis."].join(" ")},value:{valType:"number",editType:"calc",role:"info",anim:!0,description:["Sets the number to be displayed."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],role:"info",editType:"plot",description:["Sets the horizontal alignment of the `text` within the box.","Note that this attribute has no effect if an angular gauge is displayed:","in this case, it is always centered"].join(" ")},domain:s({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",role:"info",editType:"plot",description:["Sets the title of this indicator."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],role:"info",editType:"plot",description:["Sets the horizontal alignment of the title.","It defaults to `center` except for bullet charts","for which it defaults to right."].join(" ")},font:n({},g,{description:["Set the font used to display the title"].join(" ")}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",role:"info",editType:"plot",description:["Sets the value formatting rule using d3 formatting mini-language","which is similar to those of Python. See",h].join(" ")},font:n({},g,{description:["Set the font used to display main number"].join(" ")}),prefix:{valType:"string",dflt:"",role:"info",editType:"plot",description:["Sets a prefix appearing before the number."].join(" ")},suffix:{valType:"string",dflt:"",role:"info",editType:"plot",description:["Sets a suffix appearing next to the number."].join(" ")},editType:"plot"},delta:{reference:{valType:"number",role:"info",editType:"calc",description:["Sets the reference value to compute the delta.","By default, it is set to the current value."].join(" ")},position:{valType:"enumerated",values:["top","bottom","left","right"],role:"info",dflt:"bottom",editType:"plot",description:["Sets the position of delta with respect to the number."].join(" ")},relative:{valType:"boolean",editType:"plot",role:"info",dflt:!1,description:["Show relative change"].join(" ")},valueformat:{valType:"string",role:"info",editType:"plot",description:["Sets the value formatting rule using d3 formatting mini-language","which is similar to those of Python. See",h].join(" ")},increasing:{symbol:{valType:"string",role:"info",dflt:d.INCREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",role:"info",dflt:d.INCREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},decreasing:{symbol:{valType:"string",role:"info",dflt:d.DECREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",role:"info",dflt:d.DECREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},font:n({},g,{description:["Set the font used to display the delta"].join(" ")}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",role:"info",dflt:"angular",values:["angular","bullet"],description:["Set the shape of the gauge"].join(" ")},bar:i({},p,{color:{dflt:"green"},description:["Set the appearance of the gauge's value"].join(" ")}),bgcolor:{valType:"color",role:"info",editType:"plot",description:"Sets the gauge background color."},bordercolor:{valType:"color",dflt:o.defaultLine,role:"info",editType:"plot",description:"Sets the color of the border enclosing the gauge."},borderwidth:{valType:"number",min:0,dflt:1,role:"info",editType:"plot",description:"Sets the width (in px) of the border enclosing the gauge."},axis:l({range:f,visible:n({},c.visible,{dflt:!0}),tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:n({},c.ticks,{dflt:"outside"}),ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,showticklabels:c.showticklabels,tickfont:r({description:"Sets the color bar's tick label font"}),tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,tickprefix:c.tickprefix,showtickprefix:c.showtickprefix,ticksuffix:c.ticksuffix,showticksuffix:c.showticksuffix,separatethousands:c.separatethousands,exponentformat:c.exponentformat,minexponent:c.minexponent,showexponent:c.showexponent,editType:"plot"},"plot"),steps:m,threshold:{line:{color:n({},p.line.color,{description:["Sets the color of the threshold line."].join(" ")}),width:n({},p.line.width,{dflt:1,description:["Sets the width (in px) of the threshold line."].join(" ")}),editType:"plot"},thickness:n({},p.thickness,{dflt:.85,description:["Sets the thickness of the threshold line as a fraction of the thickness of the gauge."].join(" ")}),value:{valType:"number",editType:"calc",dflt:!1,role:"info",description:["Sets a treshold value drawn as a line."].join(" ")},editType:"plot"},description:"The gauge of the Indicator plot.",editType:"plot"}}},55917:(e,t,a)=>{"use strict";var n=a(49701);t.name="indicator",t.plot=function(e,a,i,l){n.plotBasePlot(t.name,e,a,i,l)},t.clean=function(e,a,i,l){n.cleanBasePlot(t.name,e,a,i,l)}},86452:e=>{"use strict";e.exports={calc:function(e,t){var a=[],n=t.value;"number"!=typeof t._lastValue&&(t._lastValue=t.value);var i=t._lastValue,l=i;return t._hasDelta&&"number"==typeof t.delta.reference&&(l=t.delta.reference),a[0]={y:n,lastY:i,delta:n-l,relativeDelta:(n-l)/l},a}}},80272:e=>{"use strict";e.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},90833:(e,t,a)=>{"use strict";var n=a(95754),i=a(42935),l=a(5227).c,r=a(61608),o=a(34470),s=a(80272),c=a(43042),u=a(35117),d=a(88257);function h(e,t){function a(a,l){return n.coerce(e,t,i.gauge.steps,a,l)}a("color"),a("line.color"),a("line.width"),a("range"),a("thickness")}e.exports={supplyDefaults:function(e,t,a,g){function p(a,l){return n.coerce(e,t,i,a,l)}l(t,g,p),p("mode"),t._hasNumber=-1!==t.mode.indexOf("number"),t._hasDelta=-1!==t.mode.indexOf("delta"),t._hasGauge=-1!==t.mode.indexOf("gauge");var f=p("value");t._range=[0,"number"==typeof f?1.5*f:1];var m,b,v,y,x,T,k=new Array(2);function w(e,t){return n.coerce(v,y,i.gauge,e,t)}function _(e,t){return n.coerce(x,T,i.gauge.axis,e,t)}if(t._hasNumber&&(p("number.valueformat"),p("number.font.color",g.font.color),p("number.font.family",g.font.family),p("number.font.size"),void 0===t.number.font.size&&(t.number.font.size=s.defaultNumberFontSize,k[0]=!0),p("number.prefix"),p("number.suffix"),m=t.number.font.size),t._hasDelta&&(p("delta.font.color",g.font.color),p("delta.font.family",g.font.family),p("delta.font.size"),void 0===t.delta.font.size&&(t.delta.font.size=(t._hasNumber?.5:1)*(m||s.defaultNumberFontSize),k[1]=!0),p("delta.reference",t.value),p("delta.relative"),p("delta.valueformat",t.delta.relative?"2%":""),p("delta.increasing.symbol"),p("delta.increasing.color"),p("delta.decreasing.symbol"),p("delta.decreasing.color"),p("delta.position"),b=t.delta.font.size),t._scaleNumbers=(!t._hasNumber||k[0])&&(!t._hasDelta||k[1])||!1,p("title.font.color",g.font.color),p("title.font.family",g.font.family),p("title.font.size",.25*(m||b||s.defaultNumberFontSize)),p("title.text"),t._hasGauge){(v=e.gauge)||(v={}),y=r.newContainer(t,"gauge"),w("shape"),(t._isBullet="bullet"===t.gauge.shape)||p("title.align","center"),(t._isAngular="angular"===t.gauge.shape)||p("align","center"),w("bgcolor",g.paper_bgcolor),w("borderwidth"),w("bordercolor"),w("bar.color"),w("bar.line.color"),w("bar.line.width"),w("bar.thickness",s.valueThickness*("bullet"===t.gauge.shape?.5:1)),o(v,y,{name:"steps",handleItemDefaults:h}),w("threshold.value"),w("threshold.thickness"),w("threshold.line.width"),w("threshold.line.color"),x={},v&&(x=v.axis||{}),T=r.newContainer(y,"axis"),_("visible"),t._range=_("range",t._range);var S={outerTicks:!0};c(x,T,_,"linear"),d(x,T,_,"linear",S),u(x,T,_,S)}else p("title.align","center"),p("align","center"),t._isAngular=t._isBullet=!1;t._length=null}}},52437:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"indicator",basePlotModule:a(55917),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:a(42935),supplyDefaults:a(90833).supplyDefaults,calc:a(86452).calc,plot:a(45693),meta:{description:["An indicator is used to visualize a single `value` along with some","contextual information such as `steps` or a `threshold`, using a","combination of three visual elements: a number, a delta, and/or a gauge.","Deltas are taken with respect to a `reference`.","Gauges can be either angular or bullet (aka linear) gauges."].join(" ")}}},45693:(e,t,a)=>{"use strict";var n=a(42895),i=a(95754),l=i.strScale,r=i.strTranslate,o=i.rad2deg,s=a(64440).MID_SHIFT,c=a(14124),u=a(80272),d=a(73071),h=a(39393),g=a(14504),p=a(43427),f=a(3116),m=a(92665),b={left:"start",center:"middle",right:"end"},v={left:0,center:.5,right:1},y=/[yzafpnµmkMGTPEZY]/;function x(e){return e&&e.duration>0}function T(e){e.each((function(e){m.stroke(n.select(this),e.line.color)})).each((function(e){m.fill(n.select(this),e.color)})).style("stroke-width",(function(e){return e.line.width}))}function k(e,t,a){var n=e._fullLayout,l=i.extendFlat({type:"linear",ticks:"outside",range:a,showline:!0},t),r={type:"linear",_id:"x"+t._id},o={letter:"x",font:n.font,noHover:!0,noTickson:!0};function s(e,t){return i.coerce(l,r,f,e,t)}return g(l,r,s,o,n),p(l,r,s,o),r}function w(e,t,a){return[Math.min(t/e.width,a/e.height),e,t+"x"+a]}function _(e,t,a,i){var l=document.createElementNS("http://www.w3.org/2000/svg","text"),r=n.select(l);return r.text(e).attr("x",0).attr("y",0).attr("text-anchor",a).attr("data-unformatted",e).call(d.convertToTspans,i).call(c.font,t),c.bBox(r.node())}function S(e,t,a,n,l,r){var o="_cache"+t;e[o]&&e[o].key===l||(e[o]={key:l,value:a});var s=i.aggNums(r,null,[e[o].value,n],2);return e[o].value=s,s}e.exports=function(e,t,a,g){var p,f=e._fullLayout;x(a)&&g&&(p=g()),i.makeTraceGroups(f._indicatorlayer,t,"trace").each((function(t){var g,M,z,A,N,j=t[0].trace,D=n.select(this),O=j._hasGauge,F=j._isAngular,L=j._isBullet,C=j.domain,I={w:f._size.w*(C.x[1]-C.x[0]),h:f._size.h*(C.y[1]-C.y[0]),l:f._size.l+f._size.w*C.x[0],r:f._size.r+f._size.w*(1-C.x[1]),t:f._size.t+f._size.h*(1-C.y[1]),b:f._size.b+f._size.h*C.y[0]},P=I.l+I.w/2,B=I.t+I.h/2,R=Math.min(I.w/2,I.h),E=u.innerRadius*R,G=j.align||"center";if(M=B,O){if(F&&(g=P,M=B+R/2,z=function(e){return function(e,t){return[t/Math.sqrt(e.width/2*(e.width/2)+e.height*e.height),e,t]}(e,.9*E)}),L){var Y=u.bulletPadding,V=1-u.bulletNumberDomainSize+Y;g=I.l+(V+(1-V)*v[G])*I.w,z=function(e){return w(e,(u.bulletNumberDomainSize-Y)*I.w,I.h)}}}else g=I.l+v[G]*I.w,z=function(e){return w(e,I.w,I.h)};!function(e,t,a,o){var s,u,g,p=a[0].trace,f=o.numbersX,T=o.numbersY,w=p.align||"center",M=b[w],z=o.transitionOpts,A=o.onComplete,N=i.ensureSingle(t,"g","numbers"),j=[];p._hasNumber&&j.push("number"),p._hasDelta&&(j.push("delta"),"left"===p.delta.position&&j.reverse());var D=N.selectAll("text").data(j);function O(t,a,n,i){if(!t.match("s")||n>=0==i>=0||a(n).slice(-1).match(y)||a(i).slice(-1).match(y))return a;var l=t.slice().replace("s","f").replace(/\d+/,(function(e){return parseInt(e)-1})),r=k(e,{tickformat:l});return function(e){return Math.abs(e)<1?h.tickText(r,e).text:a(e)}}D.enter().append("text"),D.attr("text-anchor",(function(){return M})).attr("class",(function(e){return e})).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),D.exit().remove();var F,L=p.mode+p.align;if(p._hasDelta&&(F=function(){var t=k(e,{tickformat:p.delta.valueformat},p._range);t.setScale(),h.prepTicks(t);var i=function(e){return h.tickText(t,e).text},l=function(e){return p.delta.relative?e.relativeDelta:e.delta},r=function(e,t){return 0===e||"number"!=typeof e||isNaN(e)?"-":(e>0?p.delta.increasing.symbol:p.delta.decreasing.symbol)+t(e)},o=function(e){return e.delta>=0?p.delta.increasing.color:p.delta.decreasing.color};void 0===p._deltaLastValue&&(p._deltaLastValue=l(a[0]));var s=N.select("text.delta");function g(){s.text(r(l(a[0]),i)).call(m.fill,o(a[0])).call(d.convertToTspans,e)}return s.call(c.font,p.delta.font).call(m.fill,o({delta:p._deltaLastValue})),x(z)?s.transition().duration(z.duration).ease(z.easing).tween("text",(function(){var e=n.select(this),t=l(a[0]),s=p._deltaLastValue,c=O(p.delta.valueformat,i,s,t),u=n.interpolateNumber(s,t);return p._deltaLastValue=t,function(t){e.text(r(u(t),c)),e.call(m.fill,o({delta:u(t)}))}})).each("end",(function(){g(),A&&A()})).each("interrupt",(function(){g(),A&&A()})):g(),u=_(r(l(a[0]),i),p.delta.font,M,e),s}(),L+=p.delta.position+p.delta.font.size+p.delta.font.family+p.delta.valueformat,L+=p.delta.increasing.symbol+p.delta.decreasing.symbol,g=u),p._hasNumber&&(function(){var t=k(e,{tickformat:p.number.valueformat},p._range);t.setScale(),h.prepTicks(t);var i=function(e){return h.tickText(t,e).text},l=p.number.suffix,r=p.number.prefix,o=N.select("text.number");function u(){var t="number"==typeof a[0].y?r+i(a[0].y)+l:"-";o.text(t).call(c.font,p.number.font).call(d.convertToTspans,e)}x(z)?o.transition().duration(z.duration).ease(z.easing).each("end",(function(){u(),A&&A()})).each("interrupt",(function(){u(),A&&A()})).attrTween("text",(function(){var e=n.select(this),t=n.interpolateNumber(a[0].lastY,a[0].y);p._lastValue=a[0].y;var o=O(p.number.valueformat,i,a[0].lastY,a[0].y);return function(a){e.text(r+o(t(a))+l)}})):u(),s=_(r+i(a[0].y)+l,p.number.font,M,e)}(),L+=p.number.font.size+p.number.font.family+p.number.valueformat+p.number.suffix+p.number.prefix,g=s),p._hasDelta&&p._hasNumber){var C,I,P=[(s.left+s.right)/2,(s.top+s.bottom)/2],B=[(u.left+u.right)/2,(u.top+u.bottom)/2],R=.75*p.delta.font.size;"left"===p.delta.position&&(C=S(p,"deltaPos",0,-1*(s.width*v[p.align]+u.width*(1-v[p.align])+R),L,Math.min),I=P[1]-B[1],g={width:s.width+u.width+R,height:Math.max(s.height,u.height),left:u.left+C,right:s.right,top:Math.min(s.top,u.top+I),bottom:Math.max(s.bottom,u.bottom+I)}),"right"===p.delta.position&&(C=S(p,"deltaPos",0,s.width*(1-v[p.align])+u.width*v[p.align]+R,L,Math.max),I=P[1]-B[1],g={width:s.width+u.width+R,height:Math.max(s.height,u.height),left:s.left,right:u.right+C,top:Math.min(s.top,u.top+I),bottom:Math.max(s.bottom,u.bottom+I)}),"bottom"===p.delta.position&&(C=null,I=u.height,g={width:Math.max(s.width,u.width),height:s.height+u.height,left:Math.min(s.left,u.left),right:Math.max(s.right,u.right),top:s.bottom-s.height,bottom:s.bottom+u.height}),"top"===p.delta.position&&(C=null,I=s.top,g={width:Math.max(s.width,u.width),height:s.height+u.height,left:Math.min(s.left,u.left),right:Math.max(s.right,u.right),top:s.bottom-s.height-u.height,bottom:s.bottom}),F.attr({dx:C,dy:I})}(p._hasNumber||p._hasDelta)&&N.attr("transform",(function(){var e=o.numbersScaler(g);L+=e[2];var t,a=S(p,"numbersScale",1,e[0],L,Math.min);p._scaleNumbers||(a=1),t=p._isAngular?T-a*g.bottom:T-a*(g.top+g.bottom)/2,p._numbersTop=a*g.top+t;var n=g[w];"center"===w&&(n=(g.left+g.right)/2);var i=f-a*n;return i=S(p,"numbersTranslate",0,i,L,Math.max),r(i,t)+l(a)}))}(e,D,t,{numbersX:g,numbersY:M,numbersScaler:z,transitionOpts:a,onComplete:p}),O&&(A={range:j.gauge.axis.range,color:j.gauge.bgcolor,line:{color:j.gauge.bordercolor,width:0},thickness:1},N={range:j.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:j.gauge.bordercolor,width:j.gauge.borderwidth},thickness:1});var H=D.selectAll("g.angular").data(F?t:[]);H.exit().remove();var X=D.selectAll("g.angularaxis").data(F?t:[]);X.exit().remove(),F&&function(e,t,a,i){var l,c,u,d,g=a[0].trace,p=i.size,f=i.radius,m=i.innerRadius,b=i.gaugeBg,v=i.gaugeOutline,y=[p.l+p.w/2,p.t+p.h/2+f/2],w=i.gauge,_=i.layer,S=i.transitionOpts,M=i.onComplete,z=Math.PI/2;function A(e){var t=g.gauge.axis.range[0],a=(e-t)/(g.gauge.axis.range[1]-t)*Math.PI-z;return a<-z?-z:a>z?z:a}function N(e){return n.svg.arc().innerRadius((m+f)/2-e/2*(f-m)).outerRadius((m+f)/2+e/2*(f-m)).startAngle(-z)}function j(e){e.attr("d",(function(e){return N(e.thickness).startAngle(A(e.range[0])).endAngle(A(e.range[1]))()}))}w.enter().append("g").classed("angular",!0),w.attr("transform",r(y[0],y[1])),_.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),_.selectAll("g.xangularaxistick,path,text").remove(),(l=k(e,g.gauge.axis)).type="linear",l.range=g.gauge.axis.range,l._id="xangularaxis",l.setScale();var D=function(e){return(l.range[0]-e.x)/(l.range[1]-l.range[0])*Math.PI+Math.PI},O={},F=h.makeLabelFns(l,0).labelStandoff;O.xFn=function(e){var t=D(e);return Math.cos(t)*F},O.yFn=function(e){var t=D(e),a=Math.sin(t)>0?.2:1;return-Math.sin(t)*(F+e.fontSize*a)+Math.abs(Math.cos(t))*(e.fontSize*s)},O.anchorFn=function(e){var t=D(e),a=Math.cos(t);return Math.abs(a)<.1?"middle":a>0?"start":"end"},O.heightFn=function(e,t,a){var n=D(e);return-.5*(1+Math.sin(n))*a};var L=function(e){return r(y[0]+f*Math.cos(e),y[1]-f*Math.sin(e))};u=function(e){return L(D(e))};if(c=h.calcTicks(l),d=h.getTickSigns(l)[2],l.visible){d="inside"===l.ticks?-1:1;var C=(l.linewidth||1)/2;h.drawTicks(e,l,{vals:c,layer:_,path:"M"+d*C+",0h"+d*l.ticklen,transFn:function(e){var t=D(e);return L(t)+"rotate("+-o(t)+")"}}),h.drawLabels(e,l,{vals:c,layer:_,transFn:u,labelFns:O})}var I=[b].concat(g.gauge.steps),P=w.selectAll("g.bg-arc").data(I);P.enter().append("g").classed("bg-arc",!0).append("path"),P.select("path").call(j).call(T),P.exit().remove();var B=N(g.gauge.bar.thickness),R=w.selectAll("g.value-arc").data([g.gauge.bar]);R.enter().append("g").classed("value-arc",!0).append("path");var E,G,Y,V=R.select("path");x(S)?(V.transition().duration(S.duration).ease(S.easing).each("end",(function(){M&&M()})).each("interrupt",(function(){M&&M()})).attrTween("d",(E=B,G=A(a[0].lastY),Y=A(a[0].y),function(){var e=n.interpolate(G,Y);return function(t){return E.endAngle(e(t))()}})),g._lastValue=a[0].y):V.attr("d","number"==typeof a[0].y?B.endAngle(A(a[0].y)):"M0,0Z"),V.call(T),R.exit().remove(),I=[];var H=g.gauge.threshold.value;H&&I.push({range:[H,H],color:g.gauge.threshold.color,line:{color:g.gauge.threshold.line.color,width:g.gauge.threshold.line.width},thickness:g.gauge.threshold.thickness});var X=w.selectAll("g.threshold-arc").data(I);X.enter().append("g").classed("threshold-arc",!0).append("path"),X.select("path").call(j).call(T),X.exit().remove();var Z=w.selectAll("g.gauge-outline").data([v]);Z.enter().append("g").classed("gauge-outline",!0).append("path"),Z.select("path").call(j).call(T),Z.exit().remove()}(e,0,t,{radius:R,innerRadius:E,gauge:H,layer:X,size:I,gaugeBg:A,gaugeOutline:N,transitionOpts:a,onComplete:p});var Z=D.selectAll("g.bullet").data(L?t:[]);Z.exit().remove();var q=D.selectAll("g.bulletaxis").data(L?t:[]);q.exit().remove(),L&&function(e,t,a,n){var i,l,o,s,c,d=a[0].trace,g=n.gauge,p=n.layer,f=n.gaugeBg,b=n.gaugeOutline,v=n.size,y=d.domain,w=n.transitionOpts,_=n.onComplete;g.enter().append("g").classed("bullet",!0),g.attr("transform",r(v.l,v.t)),p.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),p.selectAll("g.xbulletaxistick,path,text").remove();var S=v.h,M=d.gauge.bar.thickness*S,z=y.x[0],A=y.x[0]+(y.x[1]-y.x[0])*(d._hasNumber||d._hasDelta?1-u.bulletNumberDomainSize:1);function N(e){e.attr("width",(function(e){return Math.max(0,i.c2p(e.range[1])-i.c2p(e.range[0]))})).attr("x",(function(e){return i.c2p(e.range[0])})).attr("y",(function(e){return.5*(1-e.thickness)*S})).attr("height",(function(e){return e.thickness*S}))}(i=k(e,d.gauge.axis))._id="xbulletaxis",i.domain=[z,A],i.setScale(),l=h.calcTicks(i),o=h.makeTransTickFn(i),s=h.getTickSigns(i)[2],c=v.t+v.h,i.visible&&(h.drawTicks(e,i,{vals:"inside"===i.ticks?h.clipEnds(i,l):l,layer:p,path:h.makeTickPath(i,c,s),transFn:o}),h.drawLabels(e,i,{vals:l,layer:p,transFn:o,labelFns:h.makeLabelFns(i,c)}));var j=[f].concat(d.gauge.steps),D=g.selectAll("g.bg-bullet").data(j);D.enter().append("g").classed("bg-bullet",!0).append("rect"),D.select("rect").call(N).call(T),D.exit().remove();var O=g.selectAll("g.value-bullet").data([d.gauge.bar]);O.enter().append("g").classed("value-bullet",!0).append("rect"),O.select("rect").attr("height",M).attr("y",(S-M)/2).call(T),x(w)?O.select("rect").transition().duration(w.duration).ease(w.easing).each("end",(function(){_&&_()})).each("interrupt",(function(){_&&_()})).attr("width",Math.max(0,i.c2p(Math.min(d.gauge.axis.range[1],a[0].y)))):O.select("rect").attr("width","number"==typeof a[0].y?Math.max(0,i.c2p(Math.min(d.gauge.axis.range[1],a[0].y))):0),O.exit().remove();var F=a.filter((function(){return d.gauge.threshold.value})),L=g.selectAll("g.threshold-bullet").data(F);L.enter().append("g").classed("threshold-bullet",!0).append("line"),L.select("line").attr("x1",i.c2p(d.gauge.threshold.value)).attr("x2",i.c2p(d.gauge.threshold.value)).attr("y1",(1-d.gauge.threshold.thickness)/2*S).attr("y2",(1-(1-d.gauge.threshold.thickness)/2)*S).call(m.stroke,d.gauge.threshold.line.color).style("stroke-width",d.gauge.threshold.line.width),L.exit().remove();var C=g.selectAll("g.gauge-outline").data([b]);C.enter().append("g").classed("gauge-outline",!0).append("rect"),C.select("rect").call(N).call(T),C.exit().remove()}(e,0,t,{gauge:Z,layer:q,size:I,gaugeBg:A,gaugeOutline:N,transitionOpts:a,onComplete:p});var K=D.selectAll("text.title").data(t);K.exit().remove(),K.enter().append("text").classed("title",!0),K.attr("text-anchor",(function(){return L?b.right:b[j.title.align]})).text(j.title.text).call(c.font,j.title.font).call(d.convertToTspans,e),K.attr("transform",(function(){var e,t=I.l+I.w*v[j.title.align],a=u.titlePadding,n=c.bBox(K.node());return O?(F&&(e=j.gauge.axis.visible?c.bBox(X.node()).top-a-n.bottom:I.t+I.h/2-R/2-n.bottom-a),L&&(e=M-(n.top+n.bottom)/2,t=I.l-u.bulletPadding*I.w)):e=j._numbersTop-a-n.bottom,r(t,e)}))}))}}}]);