(self.webpackChunkatoti_jupyterlab=self.webpackChunkatoti_jupyterlab||[]).push([[8129],{8129:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var i=a(56271),r=a.n(i),n=a(18032),o=a(25654),l=a(6335),s=a.n(l),c=a(21729),d=a.n(c),p=a(39030),u=a(16765),f=a.n(u),h=a(55553),y=a(13423);s().register(d());const m=(0,n.i)((0,n.H9)((0,i.memo)((e=>{const{cube:t,data:a,metaData:l,widgetState:s,onLoaded:c}=e,d=(0,i.useMemo)((()=>(0,p.TS)(null==s?void 0:s.mapping)),[null==s?void 0:s.mapping]);(0,n.ge)({isEmpty:d,onLoaded:c});const u=(0,i.useMemo)((()=>function({cube:e,data:t,metaData:a,widgetState:i}){return e&&t&&a?(0,h.Hz)({cube:e,data:t,metaData:a,widgetState:i}).map((e=>(e.type="waterfall",f()(e,["increasing","marker","color"],"#59a14f"),f()(e,["decreasing","marker","color"],"#e15759"),e))):[]}({cube:t,data:a,metaData:l,widgetState:s})),[t,a,l,s]),m=(0,i.useMemo)((()=>(e=>e?(0,y.IM)({xaxis:{gridcolor:"transparent"}},(0,n.S5)(e.subplots),(0,n.lH)(e.subplots)):{})(l)),[l]);return t&&a&&l&&!d?r().createElement(n.XN,(0,o.Z)({},e,{traces:u,layout:m,cube:t,data:a,metaData:l})):r().createElement(n.MQ,null)}))))},21729:(e,t,a)=>{"use strict";e.exports=a(37934)},18457:e=>{"use strict";e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},69540:(e,t,a)=>{"use strict";var i=a(94623),r=a(83252).line,n=a(20992),o=a(31025).f,l=a(31025).s,s=a(62283),c=a(61782).extendFlat,d=a(92665);function p(e){return{marker:{color:c({},i.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+e+" values."}),line:{color:c({},i.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+e+" values."}),width:c({},i.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+e+" values."}),editType:"style"},editType:"style"},editType:"style"}}e.exports={measure:{valType:"data_array",dflt:[],role:"info",editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,hovertext:i.hovertext,hovertemplate:o({},{keys:s.eventDataKeys}),hoverinfo:c({},n.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],role:"info",editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:i.text,textposition:i.textposition,insidetextanchor:i.insidetextanchor,textangle:i.textangle,textfont:i.textfont,insidetextfont:i.insidetextfont,outsidetextfont:i.outsidetextfont,constraintext:i.constraintext,cliponaxis:i.cliponaxis,orientation:i.orientation,offset:i.offset,width:i.width,increasing:p("increasing"),decreasing:p("decreasing"),totals:p("intermediate sums and total"),connector:{line:{color:c({},r.color,{dflt:d.defaultLine}),width:c({},r.width,{editType:"plot"}),dash:r.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",role:"info",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:i.offsetgroup,alignmentgroup:i.alignmentgroup}},53771:(e,t,a)=>{"use strict";var i=a(39393),r=a(64913),n=a(95754).mergeArray,o=a(8306),l=a(68847).BADNUM;function s(e){return"a"===e||"absolute"===e}function c(e){return"t"===e||"total"===e}e.exports=function(e,t){var a,d,p,u,f=i.getFromId(e,t.xaxis||"x"),h=i.getFromId(e,t.yaxis||"y");"h"===t.orientation?(a=f.makeCalcdata(t,"x"),p=h.makeCalcdata(t,"y"),d=r(t,h,"y",p),u=!!t.yperiodalignment):(a=h.makeCalcdata(t,"y"),p=f.makeCalcdata(t,"x"),d=r(t,f,"x",p),u=!!t.xperiodalignment);for(var y,m=Math.min(d.length,a.length),x=new Array(m),g=0,v=!1,b=0;b<m;b++){var w=a[b]||0,S=!1;(a[b]!==l||c(t.measure[b])||s(t.measure[b]))&&b+1<m&&(a[b+1]!==l||c(t.measure[b+1])||s(t.measure[b+1]))&&(S=!0);var T=x[b]={i:b,p:d[b],s:w,rawS:w,cNext:S};s(t.measure[b])?(g=T.s,T.isSum=!0,T.dir="totals",T.s=g):c(t.measure[b])?(T.isSum=!0,T.dir="totals",T.s=g):(T.isSum=!1,T.dir=T.rawS<0?"decreasing":"increasing",y=T.s,T.s=g+y,g+=y),"totals"===T.dir&&(v=!0),u&&(x[b].orig_p=p[b]),t.ids&&(T.id=String(t.ids[b])),T.v=(t.base||0)+g}return x.length&&(x[0].hasTotals=v),n(t.text,x,"tx"),n(t.hovertext,x,"htx"),o(x,t),x}},62283:e=>{"use strict";e.exports={eventDataKeys:["initial","delta","final"]}},27636:(e,t,a)=>{"use strict";var i=a(50332).setGroupPositions;e.exports=function(e,t){var a,r,n=e._fullLayout,o=e._fullData,l=e.calcdata,s=t.xaxis,c=t.yaxis,d=[],p=[],u=[];for(r=0;r<o.length;r++){var f=o[r];!0===f.visible&&f.xaxis===s._id&&f.yaxis===c._id&&"waterfall"===f.type&&(a=l[r],"h"===f.orientation?u.push(a):p.push(a),d.push(a))}var h={mode:n.waterfallmode,norm:n.waterfallnorm,gap:n.waterfallgap,groupgap:n.waterfallgroupgap};for(i(e,s,c,p,h),i(e,c,s,u,h),r=0;r<d.length;r++){a=d[r];for(var y=0;y<a.length;y++){var m=a[y];!1===m.isSum&&(m.s0+=0===y?0:a[y-1].s),y+1<a.length&&(a[y].nextP0=a[y+1].p0,a[y].nextS0=a[y+1].s0)}}}},40554:(e,t,a)=>{"use strict";var i=a(95754),r=a(90285).handleGroupingDefaults,n=a(90285).handleText,o=a(17691),l=a(56659),s=a(69540),c=a(92665),d=a(18457),p=d.INCREASING.COLOR,u=d.DECREASING.COLOR;function f(e,t,a){e(t+".marker.color",a),e(t+".marker.line.color",c.defaultLine),e(t+".marker.line.width")}e.exports={supplyDefaults:function(e,t,a,r){function c(a,r){return i.coerce(e,t,s,a,r)}if(o(e,t,r,c)){l(e,t,r,c),c("measure"),c("orientation",t.x&&!t.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var d=c("textposition");n(e,t,r,c,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==t.textposition&&(c("texttemplate"),t.texttemplate||c("textinfo")),f(c,"increasing",p),f(c,"decreasing",u),f(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else t.visible=!1},crossTraceDefaults:function(e,t){var a,n;function o(e){return i.coerce(n._input,n,s,e)}if("group"===t.waterfallmode)for(var l=0;l<e.length;l++)a=(n=e[l])._input,r(a,n,t,o)}}},98305:e=>{"use strict";e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"initial"in t&&(e.initial=t.initial),"delta"in t&&(e.delta=t.delta),"final"in t&&(e.final=t.final),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},80850:(e,t,a)=>{"use strict";var i=a(39393).hoverLabelText,r=a(92665).opacity,n=a(3424).hoverOnBars,o=a(18457),l=o.INCREASING.SYMBOL,s=o.DECREASING.SYMBOL;e.exports=function(e,t,a,o){var c=n(e,t,a,o);if(c){var d=c.cd,p=d[0].trace,u="h"===p.orientation,f=u?e.xa:e.ya,h=d[c.index],y=h.isSum?h.b+h.s:h.rawS;if(!h.isSum){c.initial=h.b+h.s-y,c.delta=y,c.final=c.initial+c.delta;var m=S(Math.abs(c.delta));c.deltaLabel=y<0?"("+m+")":m,c.finalLabel=S(c.final),c.initialLabel=S(c.initial)}var x=h.hi||p.hoverinfo,g=[];if(x&&"none"!==x&&"skip"!==x){var v="all"===x,b=x.split("+"),w=function(e){return v||-1!==b.indexOf(e)};h.isSum||(!w("final")||w(u?"x":"y")||g.push(c.finalLabel),w("delta")&&(y<0?g.push(c.deltaLabel+" "+s):g.push(c.deltaLabel+" "+l)),w("initial")&&g.push("Initial: "+c.initialLabel))}return g.length&&(c.extraText=g.join("<br>")),c.color=function(e,t){var a=e[t.dir].marker,i=a.color,n=a.line.color,o=a.line.width;return r(i)?i:r(n)&&o?n:void 0}(p,h),[c]}function S(e){return i(f,e)}}},37934:(e,t,a)=>{"use strict";e.exports={attributes:a(69540),layoutAttributes:a(90901),supplyDefaults:a(40554).supplyDefaults,crossTraceDefaults:a(40554).crossTraceDefaults,supplyLayoutDefaults:a(89598),calc:a(53771),crossTraceCalc:a(27636),plot:a(21017),style:a(98791).style,hoverPoints:a(80850),eventData:a(98305),selectPoints:a(57008),moduleType:"trace",name:"waterfall",basePlotModule:a(51594),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set th *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},90901:e=>{"use strict";e.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},89598:(e,t,a)=>{"use strict";var i=a(95754),r=a(90901);e.exports=function(e,t,a){var n=!1;function o(a,n){return i.coerce(e,t,r,a,n)}for(var l=0;l<a.length;l++){var s=a[l];if(s.visible&&"waterfall"===s.type){n=!0;break}}n&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},21017:(e,t,a)=>{"use strict";var i=a(42895),r=a(95754),n=a(14124),o=a(68847).BADNUM,l=a(7361),s=a(37299).clearMinTextSize;e.exports=function(e,t,a,c){var d=e._fullLayout;s("waterfall",d),l.plot(e,t,a,c,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),function(e,t,a,l){var s=t.xaxis,c=t.yaxis;r.makeTraceGroups(l,a,"trace bars").each((function(a){var l=i.select(this),d=a[0].trace,p=r.ensureSingle(l,"g","lines");if(d.connector&&d.connector.visible){var u="h"===d.orientation,f=d.connector.mode,h=p.selectAll("g.line").data(r.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var y=h.size();h.each((function(a,l){if(l===y-1||a.cNext){var d=function(e,t,a,i){var r=[],n=[],o=i?t:a,l=i?a:t;return r[0]=o.c2p(e.s0,!0),n[0]=l.c2p(e.p0,!0),r[1]=o.c2p(e.s1,!0),n[1]=l.c2p(e.p1,!0),r[2]=o.c2p(e.nextS0,!0),n[2]=l.c2p(e.nextP0,!0),i?[r,n]:[n,r]}(a,s,c,u),p=d[0],h=d[1],m="";p[0]!==o&&h[0]!==o&&p[1]!==o&&h[1]!==o&&("spanning"===f&&!a.isSum&&l>0&&(m+=u?"M"+p[0]+","+h[1]+"V"+h[0]:"M"+p[1]+","+h[0]+"H"+p[0]),"between"!==f&&(a.isSum||l<y-1)&&(m+=u?"M"+p[1]+","+h[0]+"V"+h[1]:"M"+p[0]+","+h[1]+"H"+p[1]),p[2]!==o&&h[2]!==o&&(m+=u?"M"+p[1]+","+h[1]+"V"+h[2]:"M"+p[1]+","+h[1]+"H"+p[2])),""===m&&(m="M0,0Z"),r.ensureSingle(i.select(this),"path").attr("d",m).call(n.setClipUrl,t.layerClipId,e)}}))}else p.remove()}))}(e,t,a,c)}},98791:(e,t,a)=>{"use strict";var i=a(42895),r=a(14124),n=a(92665),o=a(97471).DESELECTDIM,l=a(79438),s=a(37299).resizeText,c=l.styleTextPoints;e.exports={style:function(e,t,a){var l=a||i.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");s(e,l,"waterfall"),l.style("opacity",(function(e){return e[0].trace.opacity})),l.each((function(t){var a=i.select(this),l=t[0].trace;a.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=l[e.dir].marker;i.select(this).call(n.fill,t.color).call(n.stroke,t.line.color).call(r.dashLine,t.line.dash,t.line.width).style("opacity",l.selectedpoints&&!e.selected?o:1)}})),c(a,l,e),a.selectAll(".lines").each((function(){var e=l.connector.line;r.lineGroupStyle(i.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}}}]);