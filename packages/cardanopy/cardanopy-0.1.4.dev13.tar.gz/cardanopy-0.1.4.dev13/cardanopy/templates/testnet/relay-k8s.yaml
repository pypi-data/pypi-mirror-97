apiVersion: cardanopy.node.config/v1
substitutions:
  _POD_ORDINAL: 0
  _TARGET_POD_ORDINAL: 1
name: "cardano-relay-$_POD_ORDINAL"
network: "testnet"
config: "config/config.json"
databasePath: "storage/db"
socketPath: "storage/node.socket"
topologyPath: "config/topology.json"
hostAddr: "0.0.0.0"
port: 3001
topology:
  Producers:
    - addr: "producer-statefulset-0.producer-statefulset-lb.cardano-testnet.svc.cluster.local"
      port: 3001
      valency: 1
    - addr: "relay-statefulset-$_TARGET_POD_ORDINAL.relay-statefulset-lb.cardano-testnet.svc.cluster.local"
      port: 3001
      valency: 1
    - addr: "relays-new.cardano-testnet.iohkdev.io"
      port: 3001
      valency: 2
docker:
  image: "floydcraft/cardano-py-slim:latest"
  volumes:
    - "storage:storage"
k8s:
  namespace: "cardano-testnet"