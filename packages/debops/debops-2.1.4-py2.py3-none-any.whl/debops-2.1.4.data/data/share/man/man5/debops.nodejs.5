.\" Man page generated from reStructuredText.
.
.TH "DEBOPS.NODEJS" "5" "Mar 03, 2021" "v2.1.4" "DebOps"
.SH NAME
debops.nodejs \- Manage NodeJS environment using Ansible
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fBdebops service/nodejs\fP [\fB\-\-limit\fP \fIgroup,host,\fP\&...] [\fB\-\-diff\fP] [\fB\-\-check\fP] [\fB\-\-tags\fP \fItag1,tag2,\fP\&...] [\fB\-\-skip\-tags\fP \fItag1,tag2,\fP\&...] [<\fBansible\-playbook\fP options>] ...
.SH DESCRIPTION
.sp
\fI\%Node.js\fP <\fBhttps://nodejs.org/\fP> is a JavaScript runtime environment which can be used to execute JS
code outside of the browser. It is commonly used for server\-side applications
written in JavaScript.
.sp
There are two popular package managers in the Node.js ecosystem: \fI\%NPM\fP <\fBhttps://npmjs.org/\fP> which
is bundled with Node.js, and \fI\%Yarn\fP <\fBhttps://yarnpkg.org/\fP>, a third\-party package manager that is
compatible with NPM.
.sp
The \fBdebops.nodejs\fP Ansible role can be used to manage a Node.js environment
on a host. By default, it will install Node.js, NPM and Yarn packages included
in a given OS release (if possible), but it can also automatically install or
upgrade an existing installation to their upstream versions.
.SH GETTING STARTED
.SS NodeJS and NPM from Debian Backports
.sp
On a given Debian Oldstable release, the role will install the \fBnodejs\fP and
\fBnpm\fP packages from the backports repository of the same OS release to ensure
feature parity between the Oldstable and Stable Debian releases. This means
that, for example, on Debian Stretch the role will use the Node.js and NPM
packages from the \fBstretch\-backports\fP repository instead of the OS release
repository.
.sp
Newer Node.js and NPM packages can be installed using the NodeSource
repository, which can be enabled using the \fBnodejs__node_upstream\fP
variable.
.SS Example inventory
.sp
To configure a Node.js environment on a given host or set of hosts, they need
to be added to \fB[debops_service_nodejs]\fP Ansible group in the inventory:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[debops_service_nodejs]
hostname
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Example playbook
.sp
If you are using this role without DebOps, here\(aqs an example Ansible playbook
that uses the \fBdebops.nodejs\fP role:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
\-\-\-

\- name: Manage NodeJS environment
  collections: [ \(aqdebops.debops\(aq, \(aqdebops.roles01\(aq,
                 \(aqdebops.roles02\(aq, \(aqdebops.roles03\(aq ]
  hosts: [ \(aqdebops_service_nodejs\(aq ]
  become: True

  environment: \(aq{{ inventory__environment | d({})
                   | combine(inventory__group_environment | d({}))
                   | combine(inventory__host_environment  | d({})) }}\(aq

  roles:

    \- role: keyring
      tags: [ \(aqrole::keyring\(aq, \(aqskip::keyring\(aq, \(aqrole::nodejs\(aq ]
      keyring__dependent_apt_keys:
        \- \(aq{{ nodejs__keyring__dependent_apt_keys }}\(aq

    \- role: apt_preferences
      tags: [ \(aqrole::apt_preferences\(aq, \(aqskip::apt_preferences\(aq ]
      apt_preferences__dependent_list:
        \- \(aq{{ nodejs__apt_preferences__dependent_list }}\(aq

    \- role: nodejs
      tags: [ \(aqrole::nodejs\(aq, \(aqskip::nodejs\(aq ]

.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHOR
Maciej Delmanowski, Patrick Heeney
.SH COPYRIGHT
2014-2021, Maciej Delmanowski, Nick Janetakis, Robin Schneider and others
.\" Generated by docutils manpage writer.
.
