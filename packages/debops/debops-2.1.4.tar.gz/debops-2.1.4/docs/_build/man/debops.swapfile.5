.\" Man page generated from reStructuredText.
.
.TH "DEBOPS.SWAPFILE" "5" "Mar 03, 2021" "v2.1.4" "DebOps"
.SH NAME
debops.swapfile \- Configure one or multiple swap files on a Linux system
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fBdebops service/swapfile\fP [\fB\-\-limit\fP \fIgroup,host,\fP\&...] [\fB\-\-diff\fP] [\fB\-\-check\fP] [\fB\-\-tags\fP \fItag1,tag2,\fP\&...] [\fB\-\-skip\-tags\fP \fItag1,tag2,\fP\&...] [<\fBansible\-playbook\fP options>] ...
.SH DESCRIPTION
.sp
This Ansible role lets you manage one or multiple swap files. You can also
manage kernel parameters related to how swap is used by the system.
.sp
Note that this role can not setup a swap file on a BTRFS filesystem.
.sp
Refer to debops.sysctl for paging and swapping related kernel settings.
.SH GETTING STARTED
.SS Example inventory
.sp
To enable swap files on a host, it needs to be added to the
\fB[debops_service_swapfile]\fP group in Ansibleâ€™s inventory:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[debops_service_swapfile]
hostname
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Example playbook
.sp
If you are using this role without DebOps, here\(aqs an example Ansible playbook
that uses the \fBdebops.swapfile\fP role:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
\-\-\-

\- name: Configure swap files
  collections: [ \(aqdebops.debops\(aq, \(aqdebops.roles01\(aq,
                 \(aqdebops.roles02\(aq, \(aqdebops.roles03\(aq ]
  hosts: [ \(aqdebops_service_swapfile\(aq ]
  become: True

  environment: \(aq{{ inventory__environment | d({})
                   | combine(inventory__group_environment | d({}))
                   | combine(inventory__host_environment  | d({})) }}\(aq

  roles:

    \- role: swapfile
      tags: [ \(aqrole::swapfile\(aq, \(aqskip::swapfile\(aq ]

.ft P
.fi
.UNINDENT
.UNINDENT
.SH DEFAULT VARIABLE DETAILS
.sp
Some of \fBdebops.swapfile\fP default variables have more extensive configuration
than simple strings or lists, here you can find documentation and examples for
them.
.SS swapfile__files
.sp
\fBdebops.swapfile\fP can manage multiple swap files at once. This list in
a simple form specifies absolute filenames of the swap files to manage.
.sp
An extended configuration can be done using a YAML dictionary for each swap
file. List of recognized parameters:
.INDENT 0.0
.TP
.B \fBpath\fP
Required. Path of the swap file to manage.
.TP
.B \fBsize\fP
Optional. Set the size in MB of a given swap file.
.TP
.B \fBpriority\fP
Optional. Specify a priority of the swap file.
.TP
.B \fBstate\fP
Optional. If specified and \fBabsent\fP, swap file will be disabled and deleted
from the system.
.UNINDENT
.SS Examples
.sp
Manage two swap files at once:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
swapfile__files:

  \- \(aq/swapfile0\(aq

  \- path: /swapfile1\(aq
    size: \(aq1024\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHOR
Maciej Delmanowski, Robin Schneider
.SH COPYRIGHT
2014-2021, Maciej Delmanowski, Nick Janetakis, Robin Schneider and others
.\" Generated by docutils manpage writer.
.
