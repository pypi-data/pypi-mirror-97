.\" Man page generated from reStructuredText.
.
.TH "DEBOPS.ICINGA_DB" "5" "Mar 04, 2021" "v2.2.1" "DebOps"
.SH NAME
debops.icinga_db \- Manage Icinga 2 database using Ansible
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fBdebops service/icinga_db\fP [\fB\-\-limit\fP \fIgroup,host,\fP\&...] [\fB\-\-diff\fP] [\fB\-\-check\fP] [\fB\-\-tags\fP \fItag1,tag2,\fP\&...] [\fB\-\-skip\-tags\fP \fItag1,tag2,\fP\&...] [<\fBansible\-playbook\fP options>] ...
.SH DESCRIPTION
.sp
The \fI\%Icinga\fP <\fBhttps://www.icinga.com/\fP> project is a monitoring solution which can be used to monitor
infrastructure hosts and services. Icinga can use variety of remote agents as
well as SNMP to monitor remote hosts.
.sp
DebOps provides support for Icinga 2, split into several roles:
.INDENT 0.0
.IP \(bu 2
the debops.icinga role is the Icinga 2 Agent role, usually installed
on all hosts in the cluster that should be monitored. Different instances can
function as masters, satellites or clients depending on the configuration.
.IP \(bu 2
the debops.icinga_db role can be used to configure the database
support for Icinga 2, used by the web interface. Both PostgreSQL and MariaDB
databases are supported.
.IP \(bu 2
the debops.icinga_web role manages the Icinga 2 Web interface,
including installation of external modules like Icinga 2 Director.
.UNINDENT
.SH GETTING STARTED
.SS Example inventory
.sp
The \fBdebops.icinga_db\fP role is used with the main debops.icinga role
to configure the database for Icinga 2, and will not work correctly otherwise.
Database configuration is performed using the \fBdbconfig\fP configuration
management support available in Debian.  Both PostgreSQL and MariaDB databases
are supported and automatically selected if present.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[debops_service_icinga]
icinga\-master

[debops_service_icinga_db]
icinga\-master
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
See the icinga__ref_deployment documentation for more details about
deploying Icinga in DebOps.
.SS Example playbook
.sp
If you are using this role without DebOps, here\(aqs an example Ansible playbook
that uses the \fBdebops.icinga_db\fP role:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
\-\-\-

\- name: Configure Icinga database
  collections: [ \(aqdebops.debops\(aq, \(aqdebops.roles01\(aq,
                 \(aqdebops.roles02\(aq, \(aqdebops.roles03\(aq ]
  hosts: [ \(aqdebops_service_icinga_db\(aq ]
  become: True

  environment: \(aq{{ inventory__environment | d({})
                   | combine(inventory__group_environment | d({}))
                   | combine(inventory__host_environment  | d({})) }}\(aq

  roles:

    \- role: icinga_db
      tags: [ \(aqrole::icinga_db\(aq, \(aqskip::icinga_db\(aq ]

.ft P
.fi
.UNINDENT
.UNINDENT
.SS Ansible tags
.sp
You can use Ansible \fB\-\-tags\fP or \fB\-\-skip\-tags\fP parameters to limit what
tasks are performed during Ansible run. This can be used after a host was first
configured to speed up playbook execution, when you are sure that most of the
configuration is already in the desired state.
.sp
Available role tags:
.INDENT 0.0
.TP
.B \fBrole::icinga_db\fP
Main role tag, should be used in the playbook to execute all of the role
tasks as well as role dependencies.
.UNINDENT
.SH AUTHOR
Maciej Delmanowski
.SH COPYRIGHT
2014-2021, Maciej Delmanowski, Nick Janetakis, Robin Schneider and others
.\" Generated by docutils manpage writer.
.
