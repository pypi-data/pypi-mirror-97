riot.tag2("ftl-graph-pie","","","",(function(t){var a=this;a.title=void 0,a.description=void 0,a.values=void 0,a.on("mount",(function(){if(a.title=t.title,a.description=t.description,a.values=t.values,a.values&&a.values.length>0){for(a.data=[],i=0;i<a.values.length;i++)a.data.push({label:a.values[i].label,value:a.values[i].value,color:a.values[i].color});a.data.push({columns:["label","value"]});var e=function(t,a,e,l){var i=d3.pie().sort(null).value(t=>t.value),r=Math.min(600,500),n=d3.arc().innerRadius(0).outerRadius(Math.min(600,r)/2-1),o=d3.scaleOrdinal().domain(l.map(t=>t.label)).range(d3.quantize(t=>d3.interpolateSpectral(.8*t+.1),l.length).reverse());const d=Math.min(600,r)/2*.8;var s=d3.arc().innerRadius(d).outerRadius(d);const u=i(l),c=d3.create("svg").attr("viewBox",[-300,-r/2,600,r]);return c.append("g").attr("stroke","white").selectAll("path").data(u).join("path").attr("fill",t=>t.data.color?d3.color(t.data.color):o(t.data.label)).attr("d",n).append("title").text(t=>`${t.data.label}: ${t.data}`),c.append("g").attr("font-family","sans-serif").attr("font-size",12).attr("text-anchor","middle").selectAll("text").data(u).join("text").attr("transform",t=>`translate(${s.centroid(t)})`).call(t=>t.append("tspan").attr("y","-0.4em").attr("font-weight","bold").text(t=>t.data.label)).call(t=>t.filter(t=>t.endAngle-t.startAngle>.25).append("tspan").attr("x",0).attr("y","0.7em").attr("fill-opacity",.7).text(t=>t.data.value.toLocaleString())),c.node()}(a.root,a.title,a.description,a.data);a.root.innerHTML=e.outerHTML}}))}));