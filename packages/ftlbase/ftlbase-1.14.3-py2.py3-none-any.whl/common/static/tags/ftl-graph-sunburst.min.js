riot.tag2("ftl-graph-sunburst","","","",(function(e){var t=this;function n(e,t){const n=d3.formatDefaultLocale({decimal:",",thousands:".",grouping:[3],currency:["R$ ",""],dateTime:"%d/%m/%Y H:%M:%S",date:"%d/%m/%Y",time:"%H:%M",periods:["",""],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),a=e.split("#").pop(),i=document.getElementById(`${a}-title`),r=document.getElementById(`${a}-description`);i&&t.title&&(i.innerText=t.title),r&&t.description&&(r.innerText=t.description),hieararchy_data=function(e){const t={name:"root",children:[]};for(let n=0;n<e.length;n++){const a=e[n][0],i=+e[n][1];if(isNaN(i))continue;const r=a.split("->");let l=t;for(let t=0;t<r.length;t++){const a=l.children,o=r[t];let s=null;if(t+1<r.length){let t=!1;for(let e=0;e<a.length;e++)if(a[e].name===o){s=a[e],t=!0;break}t||(s={name:o,children:[],color:e[n][2],id:e[n][3]},a.push(s)),l=s}else s={name:o,value:i,color:e[n][2],id:e[n][3]},a.push(s)}}return t}(t.values);const l=function(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n][0].split("->");for(let e=0;e<a.length;e++)t.push(a[e])}return[...new Set(t)]}(t.values);function o(t){const a=[];t.sequence.forEach(e=>{const t=n.format(",.1f")((100*e.value/p.value).toPrecision(3))+"%",i=`${e.value} / ${t}`;a.push({text:e.data.name,badge:i})}),document.getElementById("summariesSunburst-breadcrumb")._tag?document.getElementById("summariesSunburst-breadcrumb")._tag.update({links:a,numbered:!1}):riot.mount(`${e}-breadcrumb`,"ftl-breadcrumb",{links:a,numbered:!1})}const s=.7*Math.min(getContentWidth(document.getElementById(`${a}`)),window.innerHeight),d=s/2,u=d3.arc().startAngle(e=>e.x0).endAngle(e=>e.x1).innerRadius(e=>Math.sqrt(e.y0)).outerRadius(d),c=d3.arc().startAngle(e=>e.x0).endAngle(e=>e.x1).padAngle(1/d).padRadius(d).innerRadius(e=>Math.sqrt(e.y0)).outerRadius(e=>Math.sqrt(e.y1)-1),p=(h=hieararchy_data,d3.partition().size([2*Math.PI,d*d])(d3.hierarchy(h).sum(e=>e.value).sort((e,t)=>e.data.id-t.data.id||t.value-e.value)));var h;const m=d3.select(e).append("svg"),v=m.node();v.value={sequence:[],percentage:0};const g=m.append("text").attr("text-anchor","middle").attr("fill","#888").style("visibility","hidden");g.append("tspan").attr("class","percentage").attr("x",0).attr("y",0).attr("dy","0.35em").attr("font-size","3em").text(""),m.attr("viewBox",`${-d} ${-d} ${s} ${s}`).style("max-width",`${s}px`).style("font-size","12px").style("font-family","'Source Sans Pro','Helvetica Neue',Helvetica,Arial,sans-serif");d3.scaleOrdinal().domain(l).range(d3.quantize(e=>d3.interpolateSpectral(.8*e+.1),l.length).reverse());const f=m.append("g").selectAll("path").data(p.descendants().filter(e=>e.depth&&e.x1-e.x0>.001)).join("path").attr("fill",e=>function(e){const t=d3.color(e.data.color);if(t.opacity=1-.15*(e.depth-1),e.ancestors().reverse().slice(1),e.depth>1){e.parent.children.length;const n=e.parent.children.indexOf(e);t.opacity=t.opacity*(1-.15*n/3)}return t}(e)).attr("d",c);return m.append("g").attr("fill","none").attr("pointer-events","all").on("mouseleave",()=>{f.attr("fill-opacity",1),g.style("visibility","hidden"),v.value={sequence:[],percentage:0},o(v.value)}).selectAll("path").data(p.descendants().filter(e=>e.depth&&e.x1-e.x0>.001)).join("path").attr("d",u).on("mouseenter",(e,t)=>{const a=t.ancestors().reverse().slice(1);f.attr("fill-opacity",e=>a.indexOf(e)>=0?1:.3);const i=n.format(",.1f")((100*t.value/p.value).toPrecision(3))+"%",r=`${t.value} / ${i}`;g.style("visibility",null).select(".percentage").text(r),v.value={sequence:a,percentage:i},o(v.value)}),v}t.title=void 0,t.description=void 0,t.values=void 0,t.on("mount",(function(){if(t.div_id=e.div_id,t.title=e.title,t.description=e.description,t.values=e.values,t.values&&t.values.length>0){const e={title:t.title,description:t.description,values:t.values};n(t.div_id,e)}}))}));