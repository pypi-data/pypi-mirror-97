riot.tag2("ftl-load-content",'<ul ref="contextMenu" class="dropdown-menu" role="menu" style="display:block"> <li each="{item, index  in contextmenu_items}"> <a data-action="{index}" tabindex="-1" href="{item.url}">{item.text}</a> </li> </ul> <div ref="loadContent" class="{classList}"></div>',"","",(function(e){var t=this;t.classList=void 0===e.classList?"ftl-load-content":e.classList,t.url=e.url,t.safe=void 0!==e.safe&&e.safe,t.contextmenu_items=e.contextmenu_items,t.contextmenu_items,console.log("refs=",t.refs),console.log("url=",t.url),console.log("safe=",t.safe),t.on("mount",(function(){riot.mount(t.refs.loadContent,"ftl-include",{include:{url:t.url,safe:t.safe}}),t.conteudo=$(t.refs.loadContent),t.conteudo.on("contextmenu",(function(e){e.preventDefault(),$(t.refs.contextMenu).show().css({position:"absolute",left:t.getMenuPosition(e.clientX,"width","scrollLeft"),top:t.getMenuPosition(e.clientY,"height","scrollTop")}).on("click","a",(function(e){$(t.refs.contextMenu).hide()}))})),t.conteudo.on("click.loadContent",(function(e){$(t.refs.contextMenu).hide()}))})),t.getMenuPosition=(e,n,o)=>{var i=$(window)[n](),s=$(window)[o](),l=$(t.refs.contextMenu)[n](),c=e+s;return e+l>i&&l<e&&(c-=l),c}}));