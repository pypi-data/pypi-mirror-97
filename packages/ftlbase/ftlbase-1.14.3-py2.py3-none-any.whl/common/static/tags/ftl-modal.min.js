riot.tag2("ftl-modal",'<div class="modal" ref="editModal" role="dialog" aria-labelledby="ftl-modal" method="post" show="{opts.modal.isvisible}"> <div class="modal-dialog {opts.modal.cls}" role="document"> <div class="modal-content"> <form ref="modalForm" class="form-group" method="POST" onsubmit="{submit}"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title" ref="ftlmodaltitle"><strong>{opts.data.modaltitle}</strong></h4> </div> <div class="modal-body"> <div ref="ftlmodalbody"></div> </div> <div class="modal-footer"> <input ref="pk" type="hidden" riot-value="{opts.data.pk}"> <button each="{buttons}" type="{type}" name="{nome}" class="button {\'btn btn-\' + cls} btn-sm" onclick="{menuclick}"> {text} </button> </div> </form> </div> </div> </div>',"","",(function(a){self=this,self.buttons=[],self.on("popup",()=>void 0!==a.data.acao&&(self.buttons=[],"1"!==a.data.acao&&"2"!==a.data.acao||self.buttons.push({type:"submit",nome:"save",cls:"primary",text:"Salvar"}),"3"===a.data.acao&&self.buttons.push({type:"submit",nome:"DELETE",cls:"danger",text:"Confirmar exclusÃ£o do registro"}),self.buttons.push({type:"button",nome:"cancel-modal",cls:"default",text:"Cancelar"}),$(self.refs.modalForm).attr("action",a.data.acaoURL),riot.mount(self.refs.ftlmodalbody,"ftl-include",{include:{url:a.data.acaoURL,safe:!0}}),self.update(),$(self.refs.editModal).modal("toggle"),!1)),self.on("mount",()=>{a.modal||(a.modal={isvisible:!1,contextmenu:!1,cls:"modal-lg"}),a.data||(a.data={pk:1,acao:"1",acaoURL:"/finan/contaContabil/",modaltitle:"Modal Title"}),self.refs.pk=a.data.pk,self.trigger("popup",{acao:a.data.acao,acaoURL:self.opts.data.acaoURL})}),this.menuclick=function(a){return"cancel-modal"===a.target.name&&a.preventDefault(),$(self.refs.editModal).modal("toggle"),!1}.bind(this),self.close=()=>{a.modal.isvisible=!1,self.trigger("close")}}));