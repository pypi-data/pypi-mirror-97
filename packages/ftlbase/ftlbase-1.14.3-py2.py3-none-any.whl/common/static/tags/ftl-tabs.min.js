riot.tag2("ftl-tabs",'<ul if="{routes.length}" class="nav nav-tabs" role="tablist"> <li each="{route, index in routes}" role="presentation" class="{active: route.active}"> <a href="#{route.ref}" id="#{route.ref}-href" role="tab" onclick="{clickChange}" data-toggle="tab" aria-controls="{route.nome}" style="padding-top: 3px; padding-bottom: 3px;"> {route.nome} &nbsp;</a> <span ref="#{route.ref}-close" onclick="{clickClose}" title="Remove essa pÃ¡gina"><i class="fa fa-times"></i></span> </li> </ul> <div if="{small.length != 0}" class="container-fluid"><h4 if="{small}" class="{color}" align="center">{small}</h4></div> <div class="tab-content panel-body"> <div each="{route, index in routes}" role="tabpanel" ref="{route.ref}" id="{route.ref}" class="tab-pane {active: route.active}"></div> </div>','ftl-tabs,[data-is="ftl-tabs"]{ display: block } ftl-tabs .nav-tabs > li > span,[data-is="ftl-tabs"] .nav-tabs > li > span{ display: none; cursor: pointer; position: absolute; right: 6px; top: 1px; color: #d73925; } ftl-tabs .nav-tabs > li:hover > span,[data-is="ftl-tabs"] .nav-tabs > li:hover > span{ display: inline-block; opacity: 0.8; } ftl-tabs .container,[data-is="ftl-tabs"] .container{ padding-bottom: 0px; } ftl-tabs .container > h4,[data-is="ftl-tabs"] .container > h4{ margin-bottom: 0px; padding-bottom: 0px; }',"",(function(t){var e=this;e.debug=!1,e.prefix="ftl-tab",e.routes=[],e.current_url="",e.small="",e.color="",e.on("updated",()=>{e.debug&&console.log("ftl-tabs: updated"),e.routes.forEach((function(t,o){t.loaded||(e.debug&&console.log("ftl-tabs: updated: ftl-include"),riot.mount(e.refs[t.ref],"ftl-include",{include:{url:e.current_url,safe:!0}})[0].on("loaded",(function(){e.loaded_ftlinclude(t,this)})),t.loaded=!0)})),e.debug&&console.log("ftl-tabs: updated: end")}),e.on("updateRoute",(t,o,l,a,n)=>{e.debug&&console.log("ftl-tabs: updateRoute",t,o,l,a),e.small=o+" - "+a,l.endsWith("/add/")?e.color="text-primary":"2"==l.split("/")[4]?e.color="text-warning":"3"==l.split("/")[4]?e.color="text-danger":e.small=a,e.routes.forEach((function(e){e.active=e.key===t}));var i=e.routes.filter((function(t){return t.active}));0===i.length?e.routes.push({key:t,nome:o,active:!0,loaded:!1,ref:e.prefix+"-"+t,url:l,small:a,reload:n}):i.forEach((function(t){(t.url!==l||t.reload)&&(t.url=l,t.loaded=!1)})),e.current_url=l,e.update(),e.debug&&console.log("ftl-tabs: updateRoute: end")}),e.on("closeTab",(t,o)=>{e.debug&&console.log("ftl-tabs: closeTab:",t),e.routes.forEach((function(o,l){o.nome===t&&(e.debug&&console.log("ftl-tabs: closeTab: close"),e.refs["#"+o.ref+"-close"].click())})),null!=o&&(window.location.href=o),e.debug&&console.log("ftl-tabs: closeTab: end")}),this.clickClose=function(t){if(e.debug&&console.log("ftl-tabs: clickClose",t),e.routes.splice(t.item.index,1),t.item.route.active&&e.routes.length>0){var o=t.item.index-1;o<0&&(o=0),e.routes[o].active=!0}var l=e.routes.filter((function(t){return t.active}));l.length>0?l.forEach((function(t){t.active&&(e.debug&&console.log("ftl-tabs: clickClose: route:",t.url),route("/"+t.url))})):route("/"),e.debug&&console.log("ftl-tabs: clickClose: end")}.bind(this),this.clickChange=function(t){e.debug&&console.log("ftl-tabs: clickChange",t),t.preventUpdate=!0,e.routes[t.item.index]===t.item.route&&(e.routes.forEach((function(t){t.active=!1})),t.item.route.active=!0,e.debug&&console.log("ftl-tabs: clickChange: route:",t.item.route.url),route("/"+t.item.route.url)),e.debug&&console.log("ftl-tabs: clickChange: end")}.bind(this),this.loaded_ftlinclude=function(t,o){e.debug&&console.log("ftl-tabs: loaded_ftlinclude",t,o),configuraPagina();var l=$("#"+t.ref);e.debug&&console.log("ftl-tabs: loaded_ftlinclude 2",l),e.debug&&console.log("ftl-tabs: loaded_ftlinclude 3",l.find('[data-toggle="tab"]')),l.find('[data-toggle="tab"]').each((function(){this.href=this.href.replace("#","#"+t.key)})),e.debug&&console.log("ftl-tabs: loaded_ftlinclude 4",l.find("div > .tab-pane")),l.find("div > .tab-pane").each((function(){this.id=t.key+this.id}))}.bind(this)}));