riot.tag2("ftl-timer",'<a href="#"> <i class="fa fa-user-clock" aria-hidden="true" data-toggle="tooltip" title="Cronômetro para auxiliar no controle de tempo de estudo" data-placement="bottom" data-delay="{⁗show⁗:⁗500⁗, ⁗hide⁗:⁗100⁗}"></i> {time} <i hide="{timer.started}" class="fa fa-play-circle " aria-hidden="true" data-toggle="tooltip" title="Iniciar cronômetro" data-placement="bottom" data-delay="{⁗show⁗:⁗500⁗, ⁗hide⁗:⁗100⁗}" onclick="{click_start}"></i> <i show="{timer.started}" class="fa fa-pause-circle" aria-hidden="true" data-toggle="tooltip" title="Parar cronômetro" data-placement="bottom" data-delay="{⁗show⁗:⁗500⁗, ⁗hide⁗:⁗100⁗}" onclick="{click_stop}"></i> <i class="fa fa-undo" aria-hidden="true" data-toggle="tooltip" title="Resetar cronômetro" data-placement="bottom" data-delay="{⁗show⁗:⁗500⁗, ⁗hide⁗:⁗100⁗}" onclick="{click_reset}"></i> </a>',"","",(function(t){var e=this;e.delay=1e3,e.timer={started:!1,duration:0},e.time="00:00:00",e.url_load=void 0,e.url_stop=void 0,e.responseText=void 0,e.show_date=function(){var t=new Date(0);t.setSeconds(e.timer.duration),e.time=t.toISOString().substr(11,8),e.update()},e.on("mount",()=>{e.url_load=t.url_load,e.url_stop=e.url_load+"stop/",e.trigger("updateContent")}),e.tick=function(){e.timer.started&&++e.timer.duration,e.show_date()}.bind(e);var o=setInterval(e.tick,1e3);e.on("unmount",(function(){console.info("timer_tick cleared"),clearInterval(o)})),e.on("updateContent",()=>{const t=new XMLHttpRequest;t.responseType="json",t.onload=o=>{200!==t.status||(e.timer=t.response,e.show_date())},t.open("get",e.url_load,!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("X-CSRFToken",getCookie("csrftoken")),t.setRequestHeader("HTTP_X_CSRFTOKEN",getCookie("csrftoken")),t.send()}),e.click_start=function(t){$(".tooltip").tooltip("hide"),e.timer.started=!0,e.show_date()},e.click_stop=function(t){$(".tooltip").tooltip("hide"),e.timer.started=!1,e.show_date();const o=new XMLHttpRequest;o.responseType="json",o.onload=t=>{200!==o.status||(e.timer=o.response,e.show_date())};var a=`${e.url_stop}${e.timer.duration}/`;o.open("post",a,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-CSRFToken",getCookie("csrftoken")),o.setRequestHeader("HTTP_X_CSRFTOKEN",getCookie("csrftoken")),o.send()},e.click_reset=function(t){e.timer.duration=0,e.click_stop()}}));