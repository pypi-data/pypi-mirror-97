(self.webpackChunkjupyter_cadquery=self.webpackChunkjupyter_cadquery||[]).push([[653],{9653:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ImageButtonModel:()=>p,ImageButtonView:()=>u,TreeModel:()=>d,TreeView:()=>c,default:()=>h});var i={};n.r(i),n.d(i,{ImageButtonModel:()=>p,ImageButtonView:()=>u,TreeModel:()=>d,TreeView:()=>c});var r=n(7708),o=n(9139),a=n(4439);function s(e,t,n){var i=document.createElement(e);if(void 0!==t)for(var r in t)i.classList.add(t[r]);if(void 0!==n)for(var o in n)i[o]=n[o];return i}function l(e){return JSON.parse(JSON.stringify(e))}n(7549);var d=o.SelectionModel.extend({defaults:(0,a.extend)(o.SelectionModel.prototype.defaults(),{_model_name:"TreeModel",_view_name:"TreeView",_model_module:"jupyter_cadquery",_view_module:"jupyter_cadquery",_model_module_version:"2.0.2",_view_module_version:"2.0.2",icons:null,tree:null,state:null})}),c=o.DescriptionView.extend({initialize:function(e){o.DescriptionView.prototype.initialize.apply(this,arguments),this.icons=this.model.get("icons"),this.states=l(this.model.get("state")),this.treeModel=this.toModel(this.model.get("tree")),this.listenTo(this.model,"change:state",(()=>this.updateAllStates()))},render:function(){var e=s("ul",["toplevel"]);for(var t in e.appendChild(this.toHtml(this.treeModel)),this.el.appendChild(e),this.icons)this.updateNodes(this.treeModel,t);for(var n=this.el.getElementsByClassName("t-caret"),i=0;i<n.length;i++)n[i].addEventListener("click",(e=>{e.srcElement.parentElement.parentElement.querySelector(".nested").classList.toggle("active"),e.srcElement.classList.toggle("t-caret-down")}))},toModel:function(e){var t={id:e.id,type:e.type,name:e.name,color:e.color,imgs:[],states:[]},n=0;if("node"===e.type){for(n in this.icons)t.states.push(1);for(n in t.children=[],e.children)t.children.push(this.toModel(e.children[n]))}else if("leaf"===e.type){var i=this.model.get("state")[e.id];for(n in this.icons)t.states.push(i[n])}else console.error(`Error, unknown type '${e.type}'`);return t},getNode:function(e,t){if(e.id==t)return e;for(var n in e.children){var i=this.getNode(e.children[n],t);if(null!=i)return i}return null},publish:function(){this.model.set("state",l(this.states)),this.model.save_changes()},updateState:function(e,t,n){3!=e.states[t]&&(this.states[e.id][t]=n,e.states[t]=n,this.setIcon(e.imgs[t],t,n))},propagateChange:function(e,t,n){for(var i in e.children){var r=e.children[i];"leaf"==r.type?this.updateState(r,t,n):this.propagateChange(r,t,n)}},updateAllStates:function(){var e=!1;for(var t in this.states=l(this.model.get("state")),this.icons){for(var n in this.states){var i=this.getNode(this.treeModel,n),r=this.states[n][t];i.states[t]!=r&&(e=!0,i.states[t]=r,this.updateState(i,t,r),this.setIcon(i.imgs[t],t,r))}e&&this.updateNodes(this.treeModel,t)}},updateNodes:function(e,t){var n=0;if("node"===e.type){var i=[];for(var r in e.children)i.push(this.updateNodes(e.children[r],t));var o=i.filter((e=>3!=e));n=0==o.length?3:o.reduce(((e,t)=>e==t?e:2),o[0]),e.states[t]=n,this.setIcon(e.imgs[t],t,n)}else n=e.states[t];return n},getIcon:function(e,t){return`data:image/png;base64,${this.icons[e][t]}`},setIcon:function(e,t,n){e.src=this.getIcon(t,n)},handle:function(e,t,n){var i=this.getNode(this.treeModel,t),r=1==i.states[n]?0:1;"leaf"==e?(this.updateState(i,n,r),this.updateNodes(this.treeModel,n)):"node"==e?(this.propagateChange(i,n,r),this.updateNodes(this.treeModel,n)):console.error(`Error, unknown type '${e}'`),this.publish()},toHtml:function(e){var t,n=0,i=s("li"),r=s("span",["tree_label"]);r.innerHTML=e.name;var o=s("span",["node_entry"]);if("node"===e.type){var a=s("span",["node_entry_wrap"]);for(n in a.appendChild(s("span",["t-caret","t-caret-down"])),this.icons)(t=s("img",["icon"],{src:this.getIcon(n,1)})).setAttribute("icon_id",n),t.addEventListener("click",(t=>{this.handle(e.type,e.id,t.srcElement.getAttribute("icon_id"))})),o.appendChild(t),e.imgs.push(t);o.appendChild(r),a.appendChild(o),i.append(a);var l=s("ul",["nested","active"]);for(var d in e.children)l.appendChild(this.toHtml(e.children[d]));i.appendChild(l)}else{for(n in this.icons)(t=s("img",["icon"],{src:this.getIcon(n,e.states[n])})).setAttribute("icon_id",n),0==n&&t.classList.add("indent"),3!=e.states[n]&&t.addEventListener("click",(t=>{this.handle(e.type,e.id,t.srcElement.getAttribute("icon_id"))})),o.appendChild(t),e.imgs.push(t);o.appendChild(r),i.appendChild(o)}return i}}),p=o.ButtonModel.extend({defaults:(0,a.extend)(o.ButtonModel.prototype.defaults(),{_model_name:"ImageButtonModel",_view_name:"ImageButtonView",_model_module:"jupyter_cadquery",_view_module:"jupyter_cadquery",_model_module_version:"2.0.2",_view_module_version:"2.0.2",value:null})}),u=o.ButtonView.extend({render:function(){var e=this.model.get("width"),t=this.model.get("height"),n=new Blob([this.model.get("value")],{type:"image/png"}),i=this.model.get("tooltip");this.el.classList.add("jupyter-widgets"),this.el.classList.add("jupyter-button"),this.el.setAttribute("width",e+4),this.el.setAttribute("height",t+4),this.el.setAttribute("title",i);var r=document.createElement("img");r.setAttribute("width",e),r.setAttribute("height",t),r.src=URL.createObjectURL(n),this.el.appendChild(r)}});const h={id:"jupyter_cadquery:plugin",requires:[r.IJupyterWidgetRegistry],autoStart:!0,activate:(e,t)=>{console.log("JupyterLab extension jupyter_cadquery is activated!"),t.registerWidget({name:"jupyter_cadquery",version:"2.0.2",exports:i}),console.log("jupyter_cadquery widgets registered!")}}},1150:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(3645),r=n.n(i)()(!1);r.push([e.id,'.scroll-area {\n    overflow: scroll !important;\n    border: unset !important;\n}\n\n.mac-scrollbar::-webkit-scrollbar {\n    width: 5px !important;\n    height: 5px !important;\n}\n\n.mac-scrollbar::-webkit-scrollbar-thumb {\n    background-color: rgba(0, 0, 0, 0.2) !important;\n    border-radius: 100px !important;\n}\n\n.mac-scrollbar::-webkit-scrollbar-track {\n    background-color: transparent !important;\n}\n\n.mac-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: rgba(0, 0, 0, 0.4) !important;\n}\n\n.mac-scrollbar::-webkit-scrollbar-thumb:active {\n    background: #181818 !important;\n}\n\n.mac-scrollbar .widget-html-content {\n    overflow-x: visible;\n    overflow-y: visible;\n}\n\n.tab-content-no-padding .widget-tab-contents {\n    overflow-x: visible !important;\n    overflow-y: visible !important;\n    padding-bottom: 0px !important;\n}\n\n.view_renderer {\n    border: 1px solid var(--jp-border-color1);\n    margin-top: 3px;\n    margin-left: 2px;\n}\n\n.view_output {\n    border: 1px solid var(--jp-border-color1);\n    margin: 2px 2px 2px 2px !important;\n    padding-right: 1px !important;\n}\n\n.view_tree {\n    padding: 0px !important;\n}\n\n.view_axes {\n    width: 60px !important;\n    margin-left: 5px !important;\n}\n\n.view_zero {\n    width: 55px !important;\n}\n\n.view_grid {\n    width: 56px !important;\n}\n\n.view_ortho {\n    width: 64px !important;\n}\n\n.view_transparent {\n    width: 125px !important;\n}\n\n.view_black_edges {\n    width: 105px !important;\n}\n\n.view_button {\n    padding: 0px !important;\n}\n\n.view_button>img {\n    height: 28px;\n    width: 36px;\n}\n\n.node_entry_wrap {\n    white-space: pre;\n}\n\n.node_entry {\n    white-space: nowrap;\n    padding-top: 4px;\n}\n\n.t-caret {\n    cursor: pointer;\n    -webkit-user-select: none;\n    /* Safari 3.1+ */\n    -moz-user-select: none;\n    /* Firefox 2+ */\n    -ms-user-select: none;\n    /* IE 10+ */\n    user-select: none;\n}\n\n.t-caret::before {\n    content: "\\25B6";\n    font-size: 12px;\n    color: black;\n    display: inline-block;\n    margin-right: 2px;\n}\n\n.t-caret-down::before {\n    -ms-transform: rotate(90deg);\n    /* IE 9 */\n    -webkit-transform: rotate(90deg);\n    /* Safari */\n    transform: rotate(90deg);\n}\n\n.toplevel {\n    list-style-type: none;\n    padding-inline-start: 0px;\n}\n\n.nested {\n    display: none;\n    list-style-type: none;\n    padding-inline-start: 16px;\n}\n\n.active {\n    display: block;\n}\n\n.icon {\n    width: 28px !important;\n    height: 22px !important;\n    padding-right: 2px;\n    vertical-align: middle;\n}\n\n.indent {\n    margin-left: 12px;\n}\n\n.tree_label {\n    padding-left: 2px;\n    font-size: 14px;\n}\n\n.scroll_down {\n    display: flex;\n    flex-direction: column-reverse;\n}\n\n.small_table {\n    line-height: 14px;\n}\n\n.monospace select {\n    font-family: monospace;\n}',""]);const o=r},2760:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(3645),r=n.n(i),o=n(1150),a=r()(!1);a.i(o.default),a.push([e.id,"\n",""]);const s=a},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,i,r,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var s=(n=a,i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(r," */")),l=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(l).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},7549:(e,t,n)=>{var i=n(3379),r=n(2760);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);i(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},3379:(e,t,n)=>{"use strict";var i,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},i=[],r=0;r<e.length;r++){var s=e[r],l=t.base?s[0]+t.base:s[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var p=a(c),u={css:s[1],media:s[2],sourceMap:s[3]};-1!==p?(o[p].references++,o[p].updater(u)):o.push({identifier:c,updater:f(u,t),references:1}),i.push(c)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=r(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var d,c=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function p(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function u(e,t,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,m=0;function f(e,t){var n,i,r;if(t.singleton){var o=m++;n=h||(h=l(t)),i=p.bind(null,n,o,!1),r=p.bind(null,n,o,!0)}else n=l(t),i=u.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=a(n[i]);o[r].references--}for(var l=s(e,t),d=0;d<n.length;d++){var c=a(n[d]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=l}}}}}]);