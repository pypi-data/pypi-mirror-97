(self.webpackChunkjupyter_vis3d=self.webpackChunkjupyter_vis3d||[]).push([[568,679],{568:(e,n,t)=>{e.exports=t(274),e.exports.version=t(306).version},274:(e,n,t)=>{"use strict";t.r(n),t.d(n,{VisModel:()=>h,VisView:()=>p});var s=t(337),o=(t(431),t(212)),r=t(886),i=t(219);class l{constructor(e,n,t){var s=document.createElement("div");s.classList.add("axes-helper"),console.log(s.style),e.insertBefore(s,t),function(e){var n=0,t=0,s=0,o=0;function r(r){(r=r||window.event).preventDefault(),n=s-r.clientX,t=o-r.clientY,s=r.clientX,o=r.clientY,e.style.top=e.offsetTop-t+"px",e.style.left=e.offsetLeft-n+"px"}function i(){document.onmouseup=null,document.onmousemove=null}e.onmousedown=function(e){console.log("down"),(e=e||window.event).preventDefault(),s=e.clientX,o=e.clientY,document.onmouseup=i,document.onmousemove=r},console.log(e)}(s),this.el=s,this.renderer2=new o.CP7({alpha:!0}),this.renderer2.setClearColor(0,0),this.renderer2.setSize(150,150),s.appendChild(this.renderer2.domElement),this.scene2=new o.xsS,this.scene2.background=null,this.camera2=new o.cPb(50,1,1,1e3),this.camera2.up=n.up;const r=new o.Pa4(0,0,0),i=new o.Pa4(0,1,0),l=new o.Pa4(0,0,-1),c=new o.Pa4(1,0,0);var a=new o.ZAu;const d=new o.tGC(c,r,100,16711680,20,15),u=new o.tGC(l,r,100,65280,20,15),m=new o.tGC(i,r,100,255,20,15);a.add(d),a.add(u),a.add(m),this.scene2.add(a)}sync_camera(e){this.camera2.position.copy(e.position),this.camera2.position.setLength(300),this.camera2.lookAt(this.scene2.position)}render(){this.renderer2.render(this.scene2,this.camera2)}reposition(){this.el.style.top="",this.el.style.bottom="0px",this.el.style.left="0px"}}class c{constructor(e,n="#000000"){var t=new i.Z;t.showPanel(0),e.appendChild(t.dom),t.dom.style.position="absolute",t.dom.style.display="block",this.stats=t;const s=e.offsetWidth,c=e.offsetHeight,a=new o.xsS;this.scene=a,a.background=new o.Ilk(n);const d=new o.cPb(75,s/c,.1,1e3),u=new o.CP7({antialias:!0});u.setSize(s,c),e.appendChild(u.domElement),u.domElement.classList.add("three-canvas"),u.domElement.style.width="100%",u.domElement.style.height="100%";var m=.5;const h=16777215,p=new o.Mig(h,m);a.add(p),m=1;const f=new o.Ox3(h,m);f.position.set(10,10,6),f.target.position.set(0,0,0),a.add(f),a.add(f.target);const g=new o.ZAu;a.add(g),this.objects=g,d.position.z=5;const w=new r.z(d,u.domElement);w.enableDamping=!0,w.dampingFactor=.25;var b=new l(e,d,u.domElement);!function e(){if(t.begin(),u.render(a,d),b.sync_camera(d),b.render(),function(e){const n=e.domElement,t=n.clientWidth,s=n.clientHeight,o=n.width!==t||n.height!==s;return o&&e.setSize(t,s,!1),o}(u)){const e=u.domElement;d.aspect=e.clientWidth/e.clientHeight,d.updateProjectionMatrix(),b.reposition()}w.update(),t.end(),requestAnimationFrame(e)}(),this.fullscreen_button(e)}fullscreen_button(e){var n=document.createElement("div");n.classList.add("full-screen-button"),n.innerHTML='<span class="full-screen"><span>',e.appendChild(n),n.onclick=function(){var n;n=(n=e)||document.documentElement,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},n.onmouseenter=function(){document.documentElement.style.setProperty("--fs-bg","rgba(90, 90, 90, 150)"),document.documentElement.style.setProperty("--fs-fg","rgba(150, 150, 150, 150)")},n.onmouseleave=function(){document.documentElement.style.setProperty("--fs-bg","rgba(30, 30, 30, 60)"),document.documentElement.style.setProperty("--fs-fg","rgba(90, 90, 90, 60)")}}toggle_stats(e){this.stats.dom.style.display=e?"block":"none"}draw_sphere(e,n,t){const s=new o.xo$(n,32,32),r=new o.YBo({color:new o.Ilk(t)}),i=new o.Kj0(s,r);this.objects.add(i),i.position.x=e[0],i.position.y=e[2],i.position.z=-e[1]}draw_cube(e,n,t){const s=new o.DvJ(n,n,n),r=new o.YBo({color:new o.Ilk(t)}),i=new o.Kj0(s,r);this.objects.add(i),i.position.x=e[0],i.position.y=e[2],i.position.z=-e[1]}clear(){for(;this.objects.children.length>0;)this.objects.remove(this.objects.children[0])}}var a=t(379),d=t.n(a),u=t(338);function m(e){return String.fromCharCode.apply(null,new Uint8Array(e))}d()(u.Z,{insert:"head",singleton:!1}),u.Z.locals;var h=s.DOMWidgetModel.extend({defaults:_.extend(s.DOMWidgetModel.prototype.defaults(),{_model_name:"VisModel",_view_name:"VisView",_model_module:"jupyter-vis3d",_view_module:"jupyter-vis3d",_model_module_version:"0.1.0",_view_module_version:"0.1.0",height:600,bg_color:"#000000",color:65280,enable_stats:!0,volume_bytes:0,commands:[]})}),p=s.DOMWidgetView.extend({initialize:function(){this.model.on("change:volume_bytes",this.process_volume_bytes,this),this.process_volume_bytes(),this.listenTo(this.model,"msg:custom",(function(){var e=arguments[0];console.log(e),"handle_commands"==e?this.handle_commands():"clear"==e&&this.canvas.clear()}))},handle_commands:function(){var e=this.model.get("commands");if(console.log(e),e.length>1){for(;e.length>0;){const n=e.pop();n=={}||("sphere"==n.type?this.canvas.draw_sphere(n.pos,n.radius,n.color):"cube"==n.type&&this.canvas.draw_cube(n.pos,n.size,n.color))}this.model.set("commands",[{}]),this.model.save_changes()}},process_volume_bytes:function(){var e=function(e){if("NUMPY"!=m(e.slice(0,6)).slice(1,6))throw new Error("unknown file type");new Uint8Array(e.slice(6,8));var n,t,s,o=(n=e.slice(8,10),(t=new DataView(n)).getUint8(0)|t.getUint8(1)<<8),r=m(e.slice(10,10+o)),i=10+o,l=JSON.parse(r.toLowerCase().replace("(","[").replace(",),","]").replace("),","]").replace(/'/g,'"'));if("|u1"===l.descr)s=new Uint8Array(e,i);else if("|i1"===l.descr)s=new Int8Array(e,i);else if("<u2"===l.descr)s=new Uint16Array(e,i);else if("<i2"===l.descr)s=new Int16Array(e,i);else if("<u4"===l.descr)s=new Uint32Array(e,i);else if("<i4"===l.descr)s=new Int32Array(e,i);else if("<i8"===l.descr)s=new BigInt64Array(e,i);else if("<f4"===l.descr)s=new Float32Array(e,i);else{if("<f8"!==l.descr)throw new Error("unknown numeric dtype");s=new Float64Array(e,i)}return{shape:l.shape,fortran_order:l.fortran_order,data:s,get:function(e,n){return 2==this.shape.length?this.data[e*this.shape[0]+n]:1==this.shape.length?this.data[e]:void 0},dim:function(){return this.shape.length}}}(this.model.get("volume_bytes").buffer);console.log(e.shape,e.data)},render:function(){var e=900;const n=document.querySelector(".output_subarea");n&&(e=n.offsetWidth);const t=this.model.get("height");var s=document.createElement("div");s.id="three-container",s.style.width=e+"px",s.style.height=t+"px",this.el.appendChild(s);var o=this.model.get("bg_color");this.canvas=new c(s,o),this.stats_changed(),this.model.on("change:enable_stats",this.stats_changed,this);var r=function(){document.webkitIsFullScreen||document.mozFullScreen||void 0!==document.msFullscreenElement||(s.style.height=t+"px")};document.addEventListener&&(document.addEventListener("webkitfullscreenchange",r,!1),document.addEventListener("mozfullscreenchange",r,!1),document.addEventListener("fullscreenchange",r,!1),document.addEventListener("MSFullscreenChange",r,!1)),this.handle_commands()},stats_changed:function(){var e=this.model.get("enable_stats");this.canvas.toggle_stats(e)}})},338:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});var s=t(645),o=t.n(s)()((function(e){return e[1]}));o.push([e.id,":root {\n    --fs-bg: rgba(50, 50, 50, 60);\n    --fs-fg: rgba(90, 90, 90, 60);\n}\n\n.axes-helper {\n    width: 150px;\n    height: 150px;\n    background-color: rgba(255, 255, 255, 0); /* or transparent; will show through only if renderer alpha: true */\n    /* border: 1px solid black; /\\* or none; *\\/ */\n    border: none; /* or none; */\n    /* margin: 20px; */\n    padding: 0px;\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    z-index: 100;\n}\n\n.three-canvas {\n    /* background: url('./fullscreen.png'); */\n    /* width: 100%; */\n    /* height: 100%; */\n}\n\n.full-screen-button {\n    font-size: 2rem;\n    color: var(--fs-fg);\n    width: 30px;\n    height: 30px;\n    background-color: var(--fs-bg); /* or transparent; will show through only if renderer alpha: true */\n    /* border: 1px solid black; /\\* or none; *\\/ */\n    border: none; /* or none; */\n    border-radius: 5px;\n    /* margin: 20px; */\n    padding: 5px;\n    position: absolute;\n    right: 5px;\n    bottom: 5px;\n    z-index: 100;\n}\n\n.full-screen {\n    box-sizing: border-box;\n    display: inline-block;\n    border: .1em solid currentColor;\n    width: 1em;\n    height: 1em;\n    position: relative;\n}\n.full-screen:before, .full-screen:after {\n  content: '';\n  background: var(--fs-bg);\n  position: absolute;\n}\n\n.full-screen:before {\n  width: .333em;\n  height: 1em;\n  left: .233em;\n  top: -.1em;\n}\n.full-screen:after {\n  width: 1em;\n  height: .333em;\n  top: .233em;\n  left: -.1em;\n}",""]);const r=o},306:e=>{"use strict";e.exports={version:"0.1.1"}}}]);