var __awaiter=this&&this.__awaiter||function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(t){r(t)}}function o(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):s(e.value).then(a,o)}l((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,s&&(r=a[0]&2?s["return"]:a[0]?s["throw"]||((r=s["return"])&&r.call(s),0):s.next)&&!(r=r.call(s,a[1])).done)return r;if(s=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;s=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(r=i.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1];r=a;break}if(r&&i.label<r[2]){i.label=r[2];i.ops.push(a);break}if(r[2])i.ops.pop();i.trys.pop();continue}a=t.call(e,i)}catch(o){a=[6,o];s=0}finally{n=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-6089d0c4.system.js","./p-1c3f461e.system.js"],(function(e){"use strict";var t,i,n,s,r;return{setters:[function(e){t=e.r;i=e.c;n=e.h},function(e){s=e.P;r=e.l}],execute:function(){var a=".auth-error{display:block;color:#f88987;margin-top:1rem}.auth-button{margin-top:1rem}limel-button{--lime-primary-color:#f49132}";var o=e("ga_login",function(){function e(e){t(this,e);this.setSession=i(this,"setSession",7);this.loading=false;this.errorOnLogin=false;this.email="";this.password="";this.loginFields=[{id:"LoginEmail",style:"auth-imput",label:"Email address",type:"email",value:"email",required:false,icon:"filled_message"},{id:"LoginPassword",style:"auth-imput",label:"Password",type:"password",value:"password",required:false,icon:"lock_2"}];this.onChange=this.onChange.bind(this);this.onLogin=this.onLogin.bind(this);this.isDisabled=this.isDisabled.bind(this)}e.prototype.render=function(){var e=this;return[this.loginFields.map((function(t){return n("limel-input-field",{id:t.id,class:t.style,label:t.label,type:t.type,value:e[t.value],required:t.required,trailingIcon:t.icon,onChange:function(i){return e.onChange(i,t.value)}})})),function(){return n("div",null,n("limel-button",{class:"auth-button",label:"Login",primary:true,loading:e.loading,disabled:e.isDisabled(),onClick:e.onLogin}),e.errorOnLogin?n("span",{class:"auth-error"},"Could not login. Please check your credentials"):null)}()]};e.prototype.isDisabled=function(){return!(this.email&&this.password)};e.prototype.onChange=function(e,t){this[t]=e.detail};e.prototype.onLogin=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i;return __generator(this,(function(n){switch(n.label){case 0:this.errorOnLogin=false;this.loading=true;e={email:this.email,password:this.password};return[4,this.platform.get(s.Http).post("getaccept/login/",e)];case 1:t=n.sent();this.loading=false;if(t.success){i={username:this.email,access_token:t.data.access_token,expires_in:t.data.expires_in};this.setSession.emit(i)}else{this.errorOnLogin=true}return[2]}}))}))};return e}());o.style=a;var l=".auth-signup-field-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.auth-imput{margin-bottom:0.2rem;margin-right:0.5rem;width:48%}.auth-button{margin-top:1rem}.auth-imput{margin-bottom:0.2rem}.auth-language-label{display:block;margin:1rem 0rem 0.5rem 1rem}limel-button{--lime-primary-color:#f49132}";var u=e("ga_signup",function(){function e(e){t(this,e);this.setSession=i(this,"setSession",7);this.errorHandler=i(this,"errorHandler",7);this.isLoading=false;this.disableSignup=false;this.signupFirstName="";this.signupLastName="";this.companyName="";this.mobile="";this.countryCode="SE";this.signupPassword="";this.signupFields=[{id:"SignupEmail",style:"auth-imput",label:"Email address",type:"email",value:"signupEmail",required:true,icon:"filled_message"},{id:"Password",style:"auth-imput",label:"Password",type:"password",value:"signupPassword",required:true,icon:"lock_2"},{id:"FirstName",style:"auth-imput",label:"First name",type:"text",value:"signupFirstName",required:true,icon:"user"},{id:"LastName",style:"auth-imput",label:"Last name",type:"text",value:"signupLastName",required:true,icon:"user"},{id:"Company",style:"auth-imput",label:"Company",type:"text",value:"companyName",required:true,icon:"organization"},{id:"Mobile",style:"auth-imput",label:"Mobile",type:"text",value:"mobile",required:true,icon:"phone_not_being_used"}];this.countryCodes=[{id:"SE",text:"SWE",selected:true},{id:"NO",text:"NOR"},{id:"FI",text:"FIN"},{id:"DK",text:"DEN"},{id:"GB",text:"GBR"},{id:"US",text:"USA"}];this.onChange=this.onChange.bind(this);this.countrySetOnChange=this.countrySetOnChange.bind(this);this.onSignup=this.onSignup.bind(this)}e.prototype.render=function(){var e=this;this.disableSignup=this.shouldDisableSignup();return[n("div",{class:"auth-signup-field-container"},this.signupFields.map((function(t){return n("limel-input-field",{id:t.id,class:t.style,label:t.label,type:t.type,value:e[t.value],required:t.required,trailingIcon:t.icon,onChange:function(i){return e.onChange(i,t.value)}})}))),n("span",{class:"auth-language-label"},"Country"),n("limel-chip-set",{type:"choice",onChange:this.countrySetOnChange,required:true,value:this.countryCodes}),n("limel-button",{class:"auth-button",label:"Signup",primary:true,loading:this.isLoading,disabled:this.disableSignup,onClick:this.onSignup})]};e.prototype.shouldDisableSignup=function(){return this.signupEmail===""&&this.signupLastName===""&&this.signupLastName===""&&this.mobile===""&&this.signupPassword===""};e.prototype.onChange=function(e,t){this[t]=e.detail};e.prototype.countrySetOnChange=function(e){this.countryCode=e.detail.id.toString()};e.prototype.onSignup=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i,n,s;return __generator(this,(function(a){switch(a.label){case 0:this.isLoading=true;e={company:this.companyName,first_name:this.signupFirstName,last_name:this.signupLastName,country_code:this.countryCode,mobile:this.mobile,email:this.signupEmail,password:this.signupPassword};return[4,r(this.platform,e)];case 1:t=a.sent(),i=t.data,n=t.success;if(n){s={username:this.signupEmail,access_token:i.access_token,expires_in:i.expires_in};this.setSession.emit(s)}else{if(i.error){this.errorHandler.emit(i.error)}else{this.errorHandler.emit("Something went wrong...")}}this.isLoading=false;return[2]}}))}))};return e}());u.style=l}}}));