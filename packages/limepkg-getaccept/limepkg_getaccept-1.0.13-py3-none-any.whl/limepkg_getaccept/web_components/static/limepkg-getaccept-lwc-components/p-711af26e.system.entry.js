var __awaiter=this&&this.__awaiter||function(e,t,i,n){function s(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?i(e.value):s(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,s&&(o=r[0]&2?s["return"]:r[0]?s["throw"]||((o=s["return"])&&o.call(s),0):s.next)&&!(o=o.call(s,r[1])).done)return o;if(s=0,o)r=[r[0]&2,o.value];switch(r[0]){case 0:case 1:o=r;break;case 4:i.label++;return{value:r[1],done:false};case 5:i.label++;s=r[1];r=[0];continue;case 7:r=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(r[0]===6||r[0]===2)){i=0;continue}if(r[0]===3&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(r[0]===6&&i.label<o[1]){i.label=o[1];o=r;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(r);break}if(o[2])i.ops.pop();i.trys.pop();continue}r=t.call(e,i)}catch(a){r=[6,a];s=0}finally{n=o=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<i;t++)for(var o=arguments[t],r=0,a=o.length;r<a;r++,s++)n[s]=o[r];return n};System.register(["./p-6089d0c4.system.js","./p-f4e56c2a.system.js","./p-1c3f461e.system.js","./p-90ea9d99.system.js","./p-0f24905b.system.js"],(function(e){"use strict";var t,i,n,s,o,r,a,l,c,u,d,h,m,p,f,g,v,y,w;return{setters:[function(e){t=e.r;i=e.h;n=e.g;s=e.c},function(e){o=e.E},function(e){r=e.c;a=e.d;l=e.e;c=e.g;u=e.h;d=e.P;h=e.s;m=e.u;p=e.i;f=e.j;g=e.k},function(e){v=e.w},function(e){y=e.m;w=e.E}],execute:function(){var b=e("error_message",function(){function e(e){t(this,e);this.timeout=1e4;this.error="";this.message="";this.triggerSnackbar=this.triggerSnackbar.bind(this)}e.prototype.componentDidUpdate=function(){if(this.error){this.message=this.error;this.triggerSnackbar()}};e.prototype.render=function(){return[i("limel-snackbar",{message:this.message,timeout:this.timeout,actionText:"Ok"})]};e.prototype.triggerSnackbar=function(){var e=this.host.shadowRoot.querySelector("limel-snackbar");e.show()};Object.defineProperty(e.prototype,"host",{get:function(){return n(this)},enumerable:false,configurable:true});return e}());var _=".document-details-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;max-height:50vh;overflow:auto}.document-details-container .document-details-info-list{padding:0;margin:0;list-style-type:none}.document-details-container .document-details-info-list .document-detail-title{font-weight:bold}.document-details-container .document-details-action-buttons{margin-top:1rem}.document-details-container .document-details-action-buttons .document-details-action-button-remove{margin-left:1rem}@media (min-width: 1074px){.document-details-container .document-details-info{width:65%}.document-details-container .document-details-pages{width:33%}}@media (max-width: 1075px){.document-details-container .document-details-info{width:100%}.document-details-container .document-details-pages{width:100%}}limel-button{--lime-primary-color:#f49132}";var x=e("layout_document_details",function(){function e(e){t(this,e);this.changeView=s(this,"changeView",7);this.documentData={};this.isLoading=false;this.removeDocumentHandler=this.removeDocumentHandler.bind(this);this.openDocumentIntGetAcceptHandler=this.openDocumentIntGetAcceptHandler.bind(this)}e.prototype.componentWillLoad=function(){this.loadDocumentDetails()};e.prototype.render=function(){var e=this;return[i("div",null,i("h3",null,"Document Details"),function(){if(e.isLoading){return i("ga-loader",null)}else{return i("div",{class:"document-details-container"},i("div",{class:"document-details-info"},i("ul",{class:"document-details-info-list"},i("li",null,i("span",{class:"document-detail-title"},"Document name:")," ",e.documentData.name),i("li",null,i("span",{class:"document-detail-title"},"Status:")," ",e.documentData.status),i("li",null,i("span",{class:"document-detail-title"},"Deal value:")," ",e.documentData.value),i("li",null,i("span",{class:"document-detail-title"},"Expiration date:")," ",e.documentData.expiration_date),i("li",null,i("span",{class:"document-detail-title"},"Send date:")," ",e.documentData.send_date)),i("div",{class:"document-details-action-buttons"},i("limel-button",{primary:true,label:"Open in GetAccept",onClick:e.openDocumentIntGetAcceptHandler}),i("limel-button",{class:"document-details-action-button-remove",primary:false,label:"Remove document",onClick:e.removeDocumentHandler}))),i("div",{class:"document-details-pages"},i("ul",null,e.documentData.pages.map((function(t){return i("document-page-info",{documentId:e.documentData.id,session:e.session,page:t,totalTime:e.totalPageViewTime})})))))}}())]};e.prototype.loadDocumentDetails=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:this.isLoading=true;return[4,r(this.platform,this.session,this.documentId)];case 1:e=t.sent();this.documentData={id:e.id,name:e.name,page_count:e.page_count,status:e.status,value:e.value,expiration_date:y(e.expiration_date).format("YYYY-MM-DD"),send_date:this.getSendDate(e),pages:this.getDocumentPages(e)};this.totalPageViewTime=this.getTotalPageViewTime(e);this.isLoading=false;return[2]}}))}))};e.prototype.getSendDate=function(e){return e.send_date&&y(e.send_date).format("YYYY-MM-DD")||""};e.prototype.getDocumentPages=function(e){return e.pages&&e.pages.map((function(e){return{page_id:e.page_id,thumb_url:e.thumb_url,page_time:e.page_time,order_num:e.order_num,page_num:e.page_num}}))||[]};e.prototype.getTotalPageViewTime=function(e){return e.pages&&e.pages.reduce((function(e,t){return e+t.page_time}),0)||0};e.prototype.removeDocumentHandler=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:this.isLoading=true;return[4,a(this.platform,this.session,this.documentId)];case 1:e=t.sent();this.isLoading=false;if(e){this.changeView.emit(o.home)}return[2]}}))}))};e.prototype.openDocumentIntGetAcceptHandler=function(){var e=this.documentData.status===w.draft?"edit":"view";window.open("https://app.getaccept.com/document/"+e+"/"+this.documentData.id,"_blank")};return e}());x.style=_;var C=".help-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.help-container .help-support{width:100%}.help-container .help-support .help-support-link{text-decoration:none;color:#212121}.help-container .help-support .support-links-list{list-style-type:none;padding:0;margin-top:1rem}.help-container .help-support .support-links-list li{display:-ms-flexbox;display:flex;margin-top:0.5rem}.help-container .help-support .support-links-list li a{text-decoration:none;color:#212121;margin-left:0.5rem}";var D=e("layout_help",function(){function e(e){t(this,e)}e.prototype.render=function(){return[i("div",null,i("h3",null,"Help"),i("div",{class:"help-container"},i("div",{class:"help-support"},i("a",{class:"help-support-link",href:"https://www.getaccept.com/support"},"Have any questions or just looking for someone to talk to. Our support are always there for you"),i("ul",{class:"support-links-list"},i("li",null,i("limel-icon",{class:"support",name:"phone",size:"small"}),i("a",{href:"tel:+46406688158"},"+46 40-668-81-58")),i("li",null,i("limel-icon",{class:"support",name:"email",size:"small"}),i("a",{href:"mailto:support@getaccept.com"},"support@getaccept.com"))))))]};return e}());D.style=C;var L=".auth-container{display:-ms-flexbox;display:flex;height:100%;width:100%}.auth-container .login-container{width:25%;padding:1rem;border-right:1px solid #ccc}.auth-container .login-container.active{width:60%}.auth-container .signup-container{width:40%;padding:1rem}.auth-container .signup-container.active{width:75%}";var S=e("layout_login",function(){function e(e){t(this,e);this.isSignup=false;this.toggleSignupContainer=this.toggleSignupContainer.bind(this)}e.prototype.render=function(){var e=this;var t=this.isSignup?"login-container":"login-container active";var n=this.isSignup?"signup-container active":"signup-container";return[i("div",{class:"auth-container"},i("div",{class:t,onClick:function(){return e.toggleSignupContainer(false)}},i("h3",null,"Welcome Back"),i("ga-login",{platform:this.platform})),i("div",{class:n,onClick:function(){return e.toggleSignupContainer(true)}},i("h3",null,"Create Account"),function(){if(e.isSignup){return i("ga-signup",{platform:e.platform})}else{return i("limel-input-field",{label:"Email address",type:"email",value:"",trailingIcon:"filled_message"})}}()))]};e.prototype.toggleSignupContainer=function(e){this.isSignup=e};return e}());S.style=L;var k=".ga-menu{position:absolute;top:1rem;right:1rem}limel-button{--lime-primary-color:#f49132}";var V=e("layout_menu",function(){function e(e){t(this,e);this.changeView=s(this,"changeView",7);this.menuItems=[{text:"Help",icon:"ask_question",value:o.help},{text:"Settings",icon:"settings",value:o.settings},{text:"Logout",icon:"exit",value:o.logout}];this.isOpen=false;this.toggleMenu=this.toggleMenu.bind(this);this.handleBack=this.handleBack.bind(this);this.showBackButton=this.showBackButton.bind(this);this.previousViewOnClose=this.previousViewOnClose.bind(this);this.onNavigate=this.onNavigate.bind(this);this.onCancelMenu=this.onCancelMenu.bind(this)}e.prototype.render=function(){if(this.isSending){return[]}if(this.showBackButton()){return i("limel-button",{class:"ga-menu",onClick:this.handleBack,label:"Back"})}return i("limel-menu",{class:"ga-menu",label:"Menu",items:this.menuItems,onCancel:this.onCancelMenu,onSelect:this.onNavigate,open:this.isOpen},i("div",{slot:"trigger"},i("limel-icon-button",{icon:"menu",onClick:this.toggleMenu})))};e.prototype.toggleMenu=function(){this.isOpen=!this.isOpen};e.prototype.handleBack=function(){this.changeView.emit(this.previousViewOnClose())};e.prototype.onNavigate=function(e){this.changeView.emit(e.detail.value);this.isOpen=false};e.prototype.onCancelMenu=function(){this.isOpen=false};e.prototype.previousViewOnClose=function(){switch(this.activeView){case o.videoLibrary:return o.sendDocument;case o.invite:return o.home;case o.help:return o.home;case o.settings:return o.home;case o.documentDetail:return o.home;case o.documentValidation:return o.sendDocument;default:return this.activeView}};e.prototype.showBackButton=function(){switch(this.activeView){case o.videoLibrary:return true;case o.invite:return true;case o.help:return true;case o.settings:return true;case o.documentDetail:return true;case o.documentValidation:return false;default:return false}};return e}());V.style=k;var T=".main-layout{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:distribute;justify-content:space-around}@media (min-width: 1074px){.main-layout .send-new-document-container{width:65%}.main-layout .send-new-document-container .send-new-document-buttons{display:-ms-flexbox;display:flex;overflow:hidden;width:100%;-ms-flex-pack:distribute;justify-content:space-around;-ms-flex-wrap:wrap;flex-wrap:wrap}.main-layout .related-documents{margin-right:1rem;width:33%}}@media (max-width: 1075px){.main-layout .send-new-document-container{width:100%}.main-layout .related-documents{width:100%}}";var R=e("layout_overview",function(){function e(e){t(this,e);this.documents=[]}e.prototype.render=function(){return[i("div",{class:"main-layout"},i("div",{class:"send-new-document-container"},i("h3",null,"Send new document"),i("div",{class:"send-new-document-buttons"},i("send-new-document-button",{isSigning:true}),i("send-new-document-button",{isSigning:false}))),i("div",{class:"related-documents"},i("h3",null,"Related documents"),this.isLoadingDocuments?i("ga-loader",null):i("document-list",{documents:this.documents})))]};return e}());R.style=T;var N=".layout-select-file-container{max-height:60vh;overflow:auto}.layout-select-file-container .select-file-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}@media (min-width: 1074px){.layout-select-file-container .select-file-container .file-column{width:45%;padding:1rem}}@media (max-width: 1075px){.layout-select-file-container .select-file-container .file-column{width:100%}}";var H;(function(e){e["None"]="none";e["Template"]="template";e["LimeDocuments"]="limeDocuments"})(H||(H={}));var O=e("layout_select_file",function(){function e(e){t(this,e);this.setCustomFields=s(this,"setCustomFields",7);this.errorHandler=s(this,"errorHandler",7);this.customFields=[];this.isLoadingTemplates=false;this.templates=[];this.isLoadingFields=false;this.openSection=H.Template;this.loadTemplates=this.loadTemplates.bind(this);this.loadTemplateFields=this.loadTemplateFields.bind(this);this.loadLimeDocuments=this.loadLimeDocuments.bind(this);this.onChangeSection=this.onChangeSection.bind(this);this.setTemplates=this.setTemplates.bind(this);this.setLimeDocuments=this.setLimeDocuments.bind(this);this.setFields=this.setFields.bind(this)}e.prototype.render=function(){var e=this;return[i("div",{class:"layout-select-file-container"},i("h3",null,"Select file to send"),",",i("div",{class:"select-file-container"},i("div",{class:"file-column"},i("limel-collapsible-section",{header:"Templates",isOpen:this.openSection===H.Template,onOpen:function(t){return e.onChangeSection(t,H.Template)},onClose:function(t){return e.onChangeSection(t,H.None)}},i("template-list",{templates:this.templates,selectedTemplate:this.selectedTemplate,isLoading:this.isLoadingTemplates})),i("limel-collapsible-section",{header:"Lime documents",isOpen:this.openSection===H.LimeDocuments,onOpen:function(t){return e.onChangeSection(t,H.LimeDocuments)},onClose:function(t){return e.onChangeSection(t,H.None)}},i("lime-document-list",{documents:this.limeDocuments,isLoading:this.isLoadingLimeDocuments}))),i("div",{class:"file-column"},i("template-preview",{template:this.selectedTemplate,isLoading:this.isLoadingFields,session:this.session}),i("custom-fields",{template:this.selectedTemplate,customFields:this.customFields,isLoading:this.isLoadingFields}))),",")]};e.prototype.componentWillLoad=function(){this.loadTemplates();this.loadLimeDocuments()};e.prototype.onChangeSection=function(e,t){e.stopPropagation();this.openSection=t};e.prototype.loadTemplates=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(i){switch(i.label){case 0:this.isLoadingTemplates=true;i.label=1;case 1:i.trys.push([1,3,,4]);e=this;return[4,l(this.platform,this.session,this.selectedTemplate)];case 2:e.templates=i.sent();return[3,4];case 3:t=i.sent();this.errorHandler.emit("Could not load templates from GetAccept...");return[3,4];case 4:this.isLoadingTemplates=false;return[2]}}))}))};e.prototype.loadLimeDocuments=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i,n,s;return __generator(this,(function(o){switch(o.label){case 0:this.isLoadingLimeDocuments=true;e=this.context,t=e.id,i=e.limetype;o.label=1;case 1:o.trys.push([1,3,,4]);n=this;return[4,c(this.platform,i,t,this.selectedLimeDocument)];case 2:n.limeDocuments=o.sent();return[3,4];case 3:s=o.sent();this.errorHandler.emit("Could not load related Lime documents...");return[3,4];case 4:this.isLoadingLimeDocuments=false;return[2]}}))}))};e.prototype.loadTemplateFields=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i,n,s;return __generator(this,(function(o){switch(o.label){case 0:if(!this.selectedTemplate){this.customFields=[];this.setCustomFields.emit(this.customFields);return[2]}this.isLoadingFields=true;e=this.context,t=e.id,i=e.limetype;o.label=1;case 1:o.trys.push([1,3,,4]);return[4,u(this.platform,this.session,i,t,this.selectedTemplate)];case 2:n=o.sent();this.setFields(n);return[3,4];case 3:s=o.sent();this.errorHandler.emit("Could not fetch template fields from GetAccept...");return[3,4];case 4:this.isLoadingFields=false;return[2]}}))}))};e.prototype.setFields=function(e){var t=e.map(this.mapField);this.setCustomFields.emit(t)};e.prototype.onChangeTemplate=function(e){this.setTemplates(e);if(e){this.loadTemplateFields()}};e.prototype.setTemplates=function(e){this.templates=this.getSelectedListItems(this.templates,e)};e.prototype.onChangeDocument=function(e){this.setLimeDocuments(e)};e.prototype.mapField=function(e){return{value:e.field_value,id:e.field_id,label:e.field_label||e.field_value,is_editable:!!e.is_editable}};e.prototype.setLimeDocuments=function(e){this.limeDocuments=this.getSelectedListItems(this.limeDocuments,e)};e.prototype.getSelectedListItems=function(e,t){return e.map((function(e){if(t&&e.value===t.value){return t}return Object.assign(Object.assign({},e),{selected:false})}))};e.prototype.updateFieldValue=function(e){var t=e.detail,i=t.id,n=t.value;var s=this.customFields.map((function(e){return e.id===i?Object.assign(Object.assign({},e),{value:n}):e}));this.setCustomFields.emit(s)};Object.defineProperty(e,"watchers",{get:function(){return{selectedTemplate:["onChangeTemplate"],selectedLimeDocument:["onChangeDocument"]}},enumerable:false,configurable:true});return e}());O.style=N;var A=".select-recipient-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;max-height:60vh;overflow:auto}@media (min-width: 1074px){.select-recipient-container .recipient-container{width:45%;padding:1rem}.select-recipient-container .selected-recipient-container{width:45%;padding:1rem}}@media (max-width: 1075px){.select-recipient-container .recipient-container{width:100%}.select-recipient-container .selected-recipient-container{width:100%}}.recipient-list{list-style-type:none;padding:0;margin:0;max-height:50vh;overflow:auto}.recipient-toolbar{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}.recipient-toolbar :first-child{-ms-flex-positive:1;flex-grow:1;margin-right:1.5rem}limel-switch{--lime-primary-color:#f49132}";var F=e("layout_select_recipient",function(){function e(e){t(this,e);this.updateDocumentRecipient=s(this,"updateDocumentRecipient",7);this.errorHandler=s(this,"errorHandler",7);this.selectedRecipientList=[];this.includeCoworkers=false;this.recipientList=[];this.selectRecipientHandler=this.selectRecipientHandler.bind(this);this.isAdded=this.isAdded.bind(this);this.onSearch=this.onSearch.bind(this);this.toggleIncludeCoworkers=this.toggleIncludeCoworkers.bind(this);this.fetchRecipients=this.fetchRecipients.bind(this)}e.prototype.componentWillLoad=function(){this.selectedRecipientList=this.document.recipients};e.prototype.render=function(){var e=this;return[i("div",{class:"select-recipient-container"},i("div",{class:"recipient-container"},i("h3",null,"Search Recipient"),i("div",{class:"recipient-toolbar"},i("limel-input-field",{label:"Search recipient",value:this.searchTerm,onChange:this.onSearch}),i("limel-switch",{label:"Include coworkers",value:this.includeCoworkers,onChange:this.toggleIncludeCoworkers})),i("ul",{class:"recipient-list"},this.recipientList.map((function(t){if(!e.isAdded(t.lime_id)){return i("recipient-item",{recipient:t,showAdd:true,onClick:function(){e.selectRecipientHandler(t)}})}})))),i("div",{class:"selected-recipient-container"},i("h3",null,"Added recipients"),i("selected-recipient-list",{recipients:this.selectedRecipientList,document:this.document})))]};e.prototype.selectRecipientHandler=function(e){if(!!e.mobile||!!e.email){this.selectedRecipientList=__spreadArrays(this.selectedRecipientList,[e]);this.updateDocumentRecipient.emit(this.selectedRecipientList)}else{this.errorHandler.emit("A recipient needs to have a mobile number or an email address")}};e.prototype.removeRecipientHandler=function(e){var t=e.detail;this.selectedRecipientList=this.selectedRecipientList.filter((function(e){return e.lime_id!=t.lime_id}));this.updateDocumentRecipient.emit(this.selectedRecipientList)};e.prototype.changeRecipientRoleHandler=function(e){var t=e.detail;var i=this.selectedRecipientList.findIndex((function(e){return e.lime_id===t.lime_id}));this.selectedRecipientList[i]=t;this.updateDocumentRecipient.emit(this.selectedRecipientList)};e.prototype.isAdded=function(e){return!!this.selectedRecipientList.find((function(t){return t.lime_id===e}))};e.prototype.toggleIncludeCoworkers=function(){this.includeCoworkers=!this.includeCoworkers;this.fetchRecipients()};e.prototype.onSearch=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.searchTerm=e.detail;this.fetchRecipients();return[2]}))}))};e.prototype.fetchRecipients=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i,n;return __generator(this,(function(s){switch(s.label){case 0:e={params:{search:this.searchTerm,limit:"10",offset:"0"}};s.label=1;case 1:s.trys.push([1,4,,5]);return[4,this.fetchPersons(e)];case 2:t=s.sent();return[4,this.fetchCoworkers(e,this.includeCoworkers)];case 3:i=s.sent();this.recipientList=__spreadArrays(t,i);return[3,5];case 4:n=s.sent();this.errorHandler.emit("Something went wrong while communicating with the server...");return[3,5];case 5:return[2]}}))}))};e.prototype.fetchPersons=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.platform.get(d.Http).get("getaccept/persons",e)];case 1:t=i.sent();return[2,t.map((function(e){return{email:e.email,name:e.name,mobile:e.mobilephone||e.phone,limetype:"person",lime_id:e.id,company:e.company}}))]}}))}))};e.prototype.fetchCoworkers=function(e,t){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(n){switch(n.label){case 0:if(!t){return[2,[]]}return[4,this.platform.get(d.Http).get("getaccept/coworkers",e)];case 1:i=n.sent();return[2,i.map((function(e){return{mobile:e.mobilephone||e.phone,name:e.name,email:e.email,limetype:"coworker",lime_id:e.id,company:e.company}}))]}}))}))};return e}());F.style=A;var I=".send-document-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}@media (min-width: 1074px){.send-document-container .send-document-prepare-container{width:calc(50% - 0.5rem);padding-right:0.5rem}.send-document-container .send-document-email-container{width:calc(50% - 0.5rem);padding-left:0.5rem}}@media (max-width: 1075px){.send-document-container .send-document-prepare-container{width:100%}.send-document-container .send-document-email-container{margin-top:1.5rem;width:100%}}.send-document-container .add-video-button{margin-bottom:0.5rem}.send-document-container .video-is-added{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;margin-left:0.5rem;border-radius:1rem;cursor:pointer;background-color:#f5f5f5}.send-document-container .video-is-added .video-is-added-icon{padding:0.1rem;margin-right:0.5rem;background-color:#2dc990;color:#fff}.send-document-container .video-is-added .video-remove-icon{margin-left:0.5rem;padding:0.1rem;color:#ccc}.send-document-container .video-is-added:hover{background-color:#ccc}.send-document-container .video-is-added:hover .video-remove-icon{color:#212121}.send-document-container .video-remove-container{display:-ms-flexbox;display:flex;cursor:pointer}limel-button{--lime-primary-color:#f49132}limel-checkbox{--lime-primary-color:#f49132}limel-flex-container limel-input-field:first-child{-ms-flex:2;flex:2;margin-right:0.5rem}limel-flex-container limel-input-field:last-child{-ms-flex:1;flex:1;margin-left:0.5rem}";var P=e("layout_send_document",function(){function e(e){t(this,e);this.setNewDocumentName=s(this,"setNewDocumentName",7);this.setDocumentValue=s(this,"setDocumentValue",7);this.setIsSmsSending=s(this,"setIsSmsSending",7);this.setSmartReminder=s(this,"setSmartReminder",7);this.changeView=s(this,"changeView",7);this.removeVideo=s(this,"removeVideo",7);this.documentName="";this.value=0;this.smartReminder=false;this.sendLinkBySms=false;this.documentVideo=false;this.handleChangeDocumentName=this.handleChangeDocumentName.bind(this);this.handleChangeValue=this.handleChangeValue.bind(this);this.handleChangeSmartReminder=this.handleChangeSmartReminder.bind(this);this.handleChangeSendLinkBySms=this.handleChangeSendLinkBySms.bind(this);this.handleAddVideo=this.handleAddVideo.bind(this);this.handleRemoveVideo=this.handleRemoveVideo.bind(this)}e.prototype.componentWillLoad=function(){this.documentName=this.fileName();this.setNewDocumentName.emit(this.documentName);this.value=this.document.value||0;this.smartReminder=this.document.is_reminder_sending;this.sendLinkBySms=this.document.is_sms_sending;this.documentVideo=this.document.video_id!==""};e.prototype.componentDidUpdate=function(){this.value=this.document.value;this.documentName=this.document.name||this.fileName()};e.prototype.render=function(){return[i("div",{class:"send-document-container"},i("div",{class:"send-document-prepare-container"},i("h3",null,"Prepare sending"),i("limel-flex-container",{align:"stretch"},i("limel-input-field",{label:"Document Name",value:this.documentName,onChange:this.handleChangeDocumentName}),i("limel-input-field",{label:"Value",value:this.value.toString(),onChange:this.handleChangeValue})),i("div",null,i("h4",null,"Document engagement"),this.documentVideo?i("div",null,i("div",{class:"video-is-added"},i("limel-icon",{name:"tv_show",size:"large",class:"video-is-added-icon"}),i("span",null,"Video is added"),i("limel-icon",{class:"video-remove-icon",name:"multiply",size:"small",onClick:this.handleRemoveVideo}))):i("limel-button",{class:"add-video-button",primary:true,label:"Add Video introduction",onClick:this.handleAddVideo}),i("limel-checkbox",{label:"Send smart reminders",id:"SmartReminder",checked:this.smartReminder,onChange:this.handleChangeSmartReminder}),i("limel-checkbox",{label:"Send link by SMS",id:"SendLinkBySMS",checked:this.sendLinkBySms,onChange:this.handleChangeSendLinkBySms}))),i("div",{class:"send-document-email-container"},i("create-email",{document:this.document})))]};e.prototype.fileName=function(){if(this.limeDocument){return this.limeDocument.text}else if(this.template){return this.template.text}else{return""}};e.prototype.handleChangeDocumentName=function(e){this.setNewDocumentName.emit(e.detail)};e.prototype.handleChangeValue=function(e){this.setDocumentValue.emit(e.detail)};e.prototype.handleChangeSmartReminder=function(e){this.setSmartReminder.emit(e.detail)};e.prototype.handleChangeSendLinkBySms=function(e){this.setIsSmsSending.emit(e.detail)};e.prototype.handleAddVideo=function(){this.changeView.emit(o.videoLibrary)};e.prototype.handleRemoveVideo=function(){this.removeVideo.emit();this.documentVideo=false};return e}());P.style=I;var E=".settings-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.settings-container .error{display:block;color:#f88987;margin-top:1rem}@media (min-width: 1074px){.settings-container .settings-column{width:45%;padding:1rem}}@media (max-width: 1075px){.settings-container .settings-column{width:100%}}.full-width{width:100%}";var j=e("layout_settings",function(){function e(e){t(this,e);this.setSession=s(this,"setSession",7);this.error="";this.onChangeEntity=this.onChangeEntity.bind(this);this.renderContent=this.renderContent.bind(this)}e.prototype.componentWillLoad=function(){var e=this;this.entityOptions=this.entities.map((function(e){return{value:e.id,text:e.name}}));this.selectedEntity=this.entityOptions.find((function(t){return t.value===e.user.entity_id}))};e.prototype.render=function(){return[i("h3",null,"Settings"),i("div",{class:"settings-container"},this.isLoading?this.renderLoader():this.renderContent())]};e.prototype.renderLoader=function(){return i("ga-loader",{class:"full-width"})};e.prototype.renderContent=function(){return[i("div",{class:"settings-column"},i("h4",null,"My profile"),i("limel-flex-container",{justify:"center"},i("profile-picture",{thumbUrl:this.user.thumb_url})),i("limel-input-field",{label:"Name",value:this.user.first_name+" "+this.user.last_name,disabled:true}),i("limel-input-field",{label:"Title",value:this.user.title,disabled:true}),i("limel-input-field",{label:"Email",value:this.user.email,disabled:true}),i("limel-input-field",{label:"Phone",value:this.user.mobile,disabled:true}),i("limel-input-field",{label:"Role",value:this.user.role,disabled:true})),i("div",{class:"settings-column"},i("h4",null,"Change entity"),i("limel-select",{class:"entity-selector",label:"Entity",value:this.selectedEntity,options:this.entityOptions,onChange:this.onChangeEntity,required:true}),this.renderError(this.error))]};e.prototype.renderError=function(e){return e?i("span",{class:"error"},e):""};e.prototype.onChangeEntity=function(e){return __awaiter(this,void 0,void 0,(function(){var t,i,n;var s=this;return __generator(this,(function(o){switch(o.label){case 0:if(e.detail.value==this.selectedEntity.value){return[2]}this.isLoading=true;t=this.selectedEntity;this.selectedEntity=e.detail;o.label=1;case 1:o.trys.push([1,3,,4]);return[4,h(this.selectedEntity.value,this.platform,this.session)];case 2:i=o.sent();this.setSession.emit(i);return[3,4];case 3:n=o.sent();this.error="Could not switch entity. Please try again at a later time.";setTimeout((function(){s.error=""}),3e3);this.selectedEntity=t;return[3,4];case 4:this.isLoading=false;return[2]}}))}))};return e}());j.style=E;var B=".document-error-list{padding:0;margin:0}.share-document-recipient-list{list-style-type:none;padding:0;margin:0}.validate-document-button-container{display:-ms-flexbox;display:flex;margin:2rem 0}.validate-document-button-container .send-button{padding-right:1rem}.action-buttons{margin-top:2rem}.action-buttons limel-button{margin-right:1rem}limel-button{--lime-primary-color:#f49132}";var M=e("layout_validate_document",function(){function e(e){t(this,e);this.documentCompleted=s(this,"documentCompleted",7);this.errorHandler=s(this,"errorHandler",7);this.isSendingDocument=s(this,"isSendingDocument",7);this.isSealed=false;this.isLoading=true;this.recipients=[];this.errorList=[];this.handleCreateDocument=this.handleCreateDocument.bind(this);this.sealDocument=this.sealDocument.bind(this);this.hasProperty=this.hasProperty.bind(this);this.openInNewTab=this.openInNewTab.bind(this);this.handleOpenGetAccept=this.handleOpenGetAccept.bind(this)}e.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.validateDocument()];case 1:e.sent();return[2]}}))}))};e.prototype.render=function(){var e=this;return i("div",null,function(){if(e.isLoading){return i("ga-loader-with-text",{showText:e.isSending,text:"We are creating your document!"})}else if(e.isSealed){if(e.recipients.length>0){return i("div",{class:"share-document-container"},i("h3",null,"Share document link:"),i("ul",{class:"share-document-recipient-list"},e.recipients.map((function(e){return i("share-document-link",{recipient:e})}))),i("div",{class:"action-buttons"},i("limel-button",{label:"Done",primary:true,onClick:function(){e.documentCompleted.emit(false)}}),i("limel-button",{label:"Open in GetAccept",primary:false,onClick:function(){return e.handleCreateDocument(false,true)}})))}}else{return i("div",null,function(){if(e.errorList.length>0){return i("document-error-feedback",{document:e.document,errorList:e.errorList})}else{return i("document-validate-info",{document:e.document})}}(),i("div",{class:"validate-document-button-container"},function(){if(e.errorList.length===0){return[i("limel-button",{class:"send-button",label:"Send",primary:true,onClick:function(){return e.handleCreateDocument(true,false)}}),i("limel-button",{label:"Share document link",primary:false,onClick:function(){return e.handleCreateDocument(false,false)}}),i("limel-button",{label:"Open in GetAccept",primary:false,onClick:function(){return e.handleCreateDocument(false,true)}})]}else{return i("limel-button",{label:"Open in GetAccept",primary:false,onClick:function(){return e.handleCreateDocument(false,true)}})}}()))}}())};e.prototype.hasTemplateRoles=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i;return __generator(this,(function(n){switch(n.label){case 0:if(!this.template){return[2,false]}n.label=1;case 1:n.trys.push([1,3,,4]);return[4,r(this.platform,this.session,this.template.value)];case 2:e=n.sent();t=e.recipients.filter((function(e){return e.status==="1"}));return[2,t.length>0];case 3:i=n.sent();this.errorHandler.emit("Could not fetch template data from GetAccept");return[2,false];case 4:return[2]}}))}))};e.prototype.handleUploadDocument=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i;return __generator(this,(function(n){switch(n.label){case 0:if(!this.limeDocument)return[3,2];return[4,m(this.platform,this.session,this.limeDocument.value)];case 1:e=n.sent(),t=e.data,i=e.success;if(i){return[2,t.file_id]}else{this.errorHandler.emit("Could not upload Lime document to GetAccept")}n.label=2;case 2:return[2,""]}}))}))};e.prototype.handleCreateDocument=function(e,t){return __awaiter(this,void 0,void 0,(function(){var i,n,s,o,r,a;return __generator(this,(function(l){switch(l.label){case 0:this.toggleLoading(true);return[4,this.handleUploadDocument()];case 1:i=l.sent();n=Object.assign(Object.assign({},this.document),{template_id:this.template?this.template.value:"",custom_fields:this.template?this.fields:[],file_ids:i,is_automatic_sending:e});return[4,p(this.platform,this.session,n)];case 2:s=l.sent(),o=s.data,r=s.success;if(!r){this.errorHandler.emit("Could not create document. Make sure that all data is correctly supplied");this.toggleLoading(false);return[2]}if(t){a="https://app.getaccept.com/document/edit/"+o.id;this.openInNewTab(a)}this.sentDocument=Object.assign({},o);if(!e&&!t){this.sealDocument(o.id)}else{this.toggleLoading(false);this.documentCompleted.emit(false)}return[2]}}))}))};e.prototype.sealDocument=function(e,t){if(t===void 0){t=1}return __awaiter(this,void 0,void 0,(function(){var i,n,s,o,r;var a=this;return __generator(this,(function(l){switch(l.label){case 0:i=5;n=5e3;return[4,f(this.platform,this.session,e)];case 1:s=l.sent(),o=s.data,r=s.success;if(!r&&t<i){return[2,setTimeout((function(){return a.sealDocument(e,t+=1)}),n)]}else if(!r&&t>=i){this.errorHandler.emit("Could not seal document do to lengthy import. Try to open it in GetAccept and seal it from there.");this.toggleLoading(false);return[2]}this.toggleLoading(false);this.recipients=o.recipients.map((function(e){return{name:e.fullname,document_url:e.document_url,role:e.role,email:e.email}}));this.documentCompleted.emit(true);return[2]}}))}))};e.prototype.handleOpenGetAccept=function(){if(this.sentDocument){var e="https://app.getaccept.com/document/view/"+this.sentDocument.id;this.openInNewTab(e)}};e.prototype.validateDocument=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:this.isLoading=true;if(!this.limeDocument&&!this.template){this.errorList.push({header:"No document",title:"You are missing a document.",icon:"dog_tag",view:o.selectFile})}if(this.document.recipients.length===0){this.errorList.push({header:"No recipients",title:"You need to add at least one recipient.",icon:"user_male_circle",view:o.recipient})}if(this.document.recipients.length>0&&this.document.is_signing&&!this.haveSigner()){this.errorList.push({header:"No signer",title:"You need to add at least one signer when you are sending a documet for signing.",icon:"autograph",view:o.recipient})}if(this.document.recipients.length>0&&!this.document.is_sms_sending&&this.recipientsWithOnlyPhoneExists()){this.errorList.push({header:"Need to activate SMS sending",title:"You need to activate SMS sendings due to recipients without email",icon:"cell_phone",view:o.sendDocument})}if(this.document.recipients.length>0&&this.recipientMissingEmailAndPhoneExists()){this.errorList.push({header:"Recipient missing contact information",title:"One or many recipients are missing contact information",icon:"about_us_male",view:o.recipient})}return[4,this.hasTemplateRoles()];case 1:if(e.sent()){this.errorList.push({header:"Template has unassigned roles",title:"The process must be completed in GetAccept before sending.",icon:"id_not_verified",view:o.selectFile})}this.isLoading=false;return[2]}}))}))};e.prototype.haveSigner=function(){var e=this.document.recipients.filter((function(e){return e.role==="signer"}));return e.length>0};e.prototype.recipientsWithOnlyPhoneExists=function(){return this.document.recipients.some((function(e){return!e.email&&e.mobile!==""}))};e.prototype.recipientMissingEmailAndPhoneExists=function(){return this.document.recipients.some((function(e){return!e.email&&!e.mobile}))};e.prototype.hasProperty=function(e){return e?"Yes":"No"};e.prototype.openInNewTab=function(e){this.toggleLoading(false);this.documentCompleted.emit();var t=window.open(e,"_blank");t.focus()};e.prototype.toggleLoading=function(e){this.isLoading=e;this.isSendingDocument.emit(e)};return e}());M.style=B;var G=".video-list{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-item-align:start;align-self:flex-start;list-style-type:none;padding:0;margin:0;width:100%}";var Y=e("layout_video_library",function(){function e(e){t(this,e);this.changeView=s(this,"changeView",7);this.videos=[];this.isLoadingVideos=false;this.handelClose=this.handelClose.bind(this)}e.prototype.componentWillLoad=function(){this.loadVideos()};e.prototype.render=function(){return[i("div",{class:"video-library-container"},i("h3",null,"Select a video"),i("p",null,"It will be present for the recipient when they open the document."),this.isLoadingVideos&&i("ga-loader",null),i("ul",{class:"video-list"},this.videos.map((function(e){return i("video-thumb",{video:e})}))))]};e.prototype.loadVideos=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:this.isLoadingVideos=true;return[4,g(this.platform,this.session)];case 1:e=t.sent().videos;this.videos=e.map((function(e){return{thumb_url:e.thumb_url,video_id:e.video_id,video_title:e.video_title,video_type:e.video_type,video_url:e.video_url}}));this.isLoadingVideos=false;return[2]}}))}))};e.prototype.handelClose=function(){this.changeView.emit(o.sendDocument)};return e}());Y.style=G;var W=".progress-steps{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;list-style-type:none;padding:0;margin:0;-ms-flex-pack:center;justify-content:center}.progress-steps limel-icon{color:#f49132}.progress-steps .progress-action-button{margin:0 2.5rem;color:#f49132;font-size:0.7rem;text-transform:uppercase;font-weight:bolder;cursor:pointer}.progress-steps .progress-step{text-align:center;margin:0 1rem;text-align:center;margin:0 1rem;width:5rem;-ms-flex-wrap:wrap;flex-wrap:wrap;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.progress-steps .progress-step .progress-step-icon{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;text-align:center;border-radius:50%;height:2em;width:2em;overflow:hidden;background-color:#f5f5f5;color:#f49132;cursor:pointer}.progress-steps .progress-step .progress-step-icon.active{background-color:#f49132;color:#fff}.progress-steps .progress-step .progress-step-text{font-size:0.55rem}";var z=e("workflow_progress_bar",function(){function e(e){t(this,e);this.changeView=s(this,"changeView",7);this.changeViewHandlerPrevious=this.changeViewHandlerPrevious.bind(this);this.changeViewHandlerNext=this.changeViewHandlerNext.bind(this);this.changeViewSelectedStep=this.changeViewSelectedStep.bind(this)}e.prototype.render=function(){var e=this;return function(){if(e.isVisible){return i("ul",{class:"progress-steps"},i("li",{class:"progress-action-button",onClick:e.changeViewHandlerPrevious},"Back"),v.map((function(t,n){var s="progress-step-icon";if(t.currentView===e.activeView){s+=" active"}return i("li",{class:"progress-step",onClick:function(){return e.changeViewSelectedStep(t.currentView)}},i("span",{class:s},n+1),i("span",{class:"progress-step-text"},t.label))})),i("li",{class:"progress-action-button",onClick:e.changeViewHandlerNext},"Next"))}}()};e.prototype.changeViewHandlerPrevious=function(){var e=this;var t=v.find((function(t){return t.currentView===e.activeView}));this.changeView.emit(t.previousView)};e.prototype.changeViewHandlerNext=function(){var e=this;var t=v.find((function(t){return t.currentView===e.activeView}));this.changeView.emit(t.nextView)};e.prototype.changeViewSelectedStep=function(e){this.changeView.emit(e)};return e}());z.style=W}}}));