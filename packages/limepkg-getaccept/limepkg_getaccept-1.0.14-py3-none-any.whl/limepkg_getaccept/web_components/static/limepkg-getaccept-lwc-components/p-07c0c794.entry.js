import{r as i,c as t,h as s}from"./p-d2227a7a.js";import{P as e,l as a}from"./p-12e61077.js";const l=class{constructor(s){i(this,s),this.setSession=t(this,"setSession",7),this.loading=!1,this.errorOnLogin=!1,this.email="",this.password="",this.loginFields=[{id:"LoginEmail",style:"auth-imput",label:"Email address",type:"email",value:"email",required:!1,icon:"filled_message"},{id:"LoginPassword",style:"auth-imput",label:"Password",type:"password",value:"password",required:!1,icon:"lock_2"}],this.onChange=this.onChange.bind(this),this.onLogin=this.onLogin.bind(this),this.isDisabled=this.isDisabled.bind(this)}render(){return[this.loginFields.map(i=>s("limel-input-field",{id:i.id,class:i.style,label:i.label,type:i.type,value:this[i.value],required:i.required,trailingIcon:i.icon,onChange:t=>this.onChange(t,i.value)})),(()=>s("div",null,s("limel-button",{class:"auth-button",label:"Login",primary:!0,loading:this.loading,disabled:this.isDisabled(),onClick:this.onLogin}),this.errorOnLogin?s("span",{class:"auth-error"},"Could not login. Please check your credentials"):null))()]}isDisabled(){return!(this.email&&this.password)}onChange(i,t){this[t]=i.detail}async onLogin(){this.errorOnLogin=!1,this.loading=!0;const i={email:this.email,password:this.password},t=await this.platform.get(e.Http).post("getaccept/login/",i);this.loading=!1,t.success?this.setSession.emit({username:this.email,access_token:t.data.access_token,expires_in:t.data.expires_in}):this.errorOnLogin=!0}};l.style=".auth-error{display:block;color:#f88987;margin-top:1rem}.auth-button{margin-top:1rem}limel-button{--lime-primary-color:#f49132}";const h=class{constructor(s){i(this,s),this.setSession=t(this,"setSession",7),this.errorHandler=t(this,"errorHandler",7),this.isLoading=!1,this.disableSignup=!1,this.signupFirstName="",this.signupLastName="",this.companyName="",this.mobile="",this.countryCode="SE",this.signupPassword="",this.signupFields=[{id:"SignupEmail",style:"auth-imput",label:"Email address",type:"email",value:"signupEmail",required:!0,icon:"filled_message"},{id:"Password",style:"auth-imput",label:"Password",type:"password",value:"signupPassword",required:!0,icon:"lock_2"},{id:"FirstName",style:"auth-imput",label:"First name",type:"text",value:"signupFirstName",required:!0,icon:"user"},{id:"LastName",style:"auth-imput",label:"Last name",type:"text",value:"signupLastName",required:!0,icon:"user"},{id:"Company",style:"auth-imput",label:"Company",type:"text",value:"companyName",required:!0,icon:"organization"},{id:"Mobile",style:"auth-imput",label:"Mobile",type:"text",value:"mobile",required:!0,icon:"phone_not_being_used"}],this.countryCodes=[{id:"SE",text:"SWE",selected:!0},{id:"NO",text:"NOR"},{id:"FI",text:"FIN"},{id:"DK",text:"DEN"},{id:"GB",text:"GBR"},{id:"US",text:"USA"}],this.onChange=this.onChange.bind(this),this.countrySetOnChange=this.countrySetOnChange.bind(this),this.onSignup=this.onSignup.bind(this)}render(){return this.disableSignup=this.shouldDisableSignup(),[s("div",{class:"auth-signup-field-container"},this.signupFields.map(i=>s("limel-input-field",{id:i.id,class:i.style,label:i.label,type:i.type,value:this[i.value],required:i.required,trailingIcon:i.icon,onChange:t=>this.onChange(t,i.value)}))),s("span",{class:"auth-language-label"},"Country"),s("limel-chip-set",{type:"choice",onChange:this.countrySetOnChange,required:!0,value:this.countryCodes}),s("limel-button",{class:"auth-button",label:"Signup",primary:!0,loading:this.isLoading,disabled:this.disableSignup,onClick:this.onSignup})]}shouldDisableSignup(){return""===this.signupEmail&&""===this.signupLastName&&""===this.signupLastName&&""===this.mobile&&""===this.signupPassword}onChange(i,t){this[t]=i.detail}countrySetOnChange(i){this.countryCode=i.detail.id.toString()}async onSignup(){this.isLoading=!0;const i={company:this.companyName,first_name:this.signupFirstName,last_name:this.signupLastName,country_code:this.countryCode,mobile:this.mobile,email:this.signupEmail,password:this.signupPassword},{data:t,success:s}=await a(this.platform,i);s?this.setSession.emit({username:this.signupEmail,access_token:t.access_token,expires_in:t.expires_in}):this.errorHandler.emit(t.error?t.error:"Something went wrong..."),this.isLoading=!1}};h.style=".auth-signup-field-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.auth-imput{margin-bottom:0.2rem;margin-right:0.5rem;width:48%}.auth-button{margin-top:1rem}.auth-imput{margin-bottom:0.2rem}.auth-language-label{display:block;margin:1rem 0rem 0.5rem 1rem}limel-button{--lime-primary-color:#f49132}";export{l as ga_login,h as ga_signup}