import{r as t,h as e,g as i}from"./p-8af21e1f.js";var n,s,o,c;function l(t){const{limetype:e,id:i}=this.context;if(t[e])return t[e].find(t=>t.id===i)}function r(t,e){return(i,n)=>{const s=function(t,e,i,n){let s=a.find(e=>e.component===t);return s||(s={properties:[],component:t},a.push(s)),s.properties.push({options:i,name:e,service:{name:n.name,method:n.method||"subscribe"}}),s}(i,n,t,e);1===s.properties.length&&function(t,e){const i=t.componentWillLoad,n=t.componentDidUnload,s=[];t.componentWillLoad=function(...t){if(e.forEach(t=>{u.apply(this,[s,t])}),i)return i.apply(this,t)},t.componentDidUnload=function(...t){n&&n.apply(this,t),h.apply(this,[s])}}(i,s.properties)}}!function(t){t.Translate="translate",t.Http="http",t.Route="route",t.Notification="notifications",t.Query="query",t.CommandBus="commandBus",t.Dialog="dialog",t.EventDispatcher="eventDispatcher",t.LimetypesState="state.limetypes",t.LimeobjectsState="state.limeobjects",t.ApplicationState="state.application",t.ConfigsState="state.configs",t.FiltersState="state.filters",t.DeviceState="state.device",t.TaskState="state.tasks"}(n||(n={})),function(t){t.AND="AND",t.OR="OR",t.EQUALS="=",t.NOT="!",t.GREATER=">",t.LESS="<",t.IN="IN",t.BEGINS="=?",t.LIKE="?",t.LESS_OR_EQUAL="<=",t.GREATER_OR_EQUAL=">="}(s||(s={})),function(t){t.Received="command.received",t.Handled="command.handled",t.Failed="command.failed"}(o||(o={})),function(t){t.Pending="PENDING",t.Started="STARTED",t.Retry="RETRY",t.Success="SUCCESS",t.Failure="FAILURE"}(c||(c={}));const a=[];function u(t,e){let i=t.find(t=>t.instance===this);i||(i={instance:this,unsubscribes:[]},t.push(i));const n=f.apply(this,[e.options,e.name,e.service.name,e.service.method]);i.unsubscribes.push(n)}function h(t=[]){t.find(t=>t.instance===this).unsubscribes.forEach(t=>t());for(let e=t.length-1;e>=0;e--)t[e].instance===this&&t.splice(e,1)}function f(t,e,i,n){const s=Object.assign({},t);!function(t,e){t.filter&&(t.filter=t.filter.map(t=>t.bind(e))),t.map&&(t.map=t.map.map(t=>t.bind(e)))}(s,this);const o=this.platform;if(!o.has(i))throw new Error(`Service ${i} does not exist`);return o.get(i)[n](function(t,e){return i=>{t[e]=i}}(this,e),s)}var d=function(t,e,i,n){var s,o=arguments.length,c=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(c=(o<3?s(c):o>3?s(e,i,c):s(e,i))||c);return o>3&&c&&Object.defineProperty(e,i,c),c};const m=class{constructor(e){t(this,e),this.document={},this.config={},this.includePerson=!1,this.allowedExtensions=Object.freeze(["PDF","DOC","DOCX"])}goToScrive(t){window.open(`${this.config.limepkg_scrive.scriveHost}/public/?limeDocId=${t}${this.includePerson?"&usePerson=true":""}`)}files(){var t;const e=(null===(t=this.document)||void 0===t?void 0:t._files)||{};return Object.keys(e).map(t=>e[t])}isSignable(t){return this.allowedExtensions.includes((t.extension||"").toUpperCase())}render(){if("document"!==this.context.limetype)return;const t=this.files(),i=t.filter(this.isSignable,this),n=0===i.length,s=i.length>1,o=n||s,c=t.map(t=>this.isSignable(t)?{text:`${t.filename} is signable.`}:{text:`${t.filename} is not signable.`});return e("div",null,e("limel-collapsible-section",{header:"Sign with Scrive"},e("limel-button",{label:"Design Contract",outlined:!0,disabled:o,onClick:()=>this.goToScrive(this.context.id)}),e("limel-checkbox",{label:"Add associated person as signing party",id:"fab",checked:this.includePerson,required:!1,disabled:o,onChange:()=>this.includePerson=!this.includePerson}),n&&e("limel-dialog",{heading:"No Signable Files",open:!0},"There are no signable files.",e("limel-list",{items:c}),"Please keep in mind that only certain types (",this.allowedExtensions.join(", "),") of these types of files are signable."),s&&e("limel-dialog",{heading:"Too Many Signable Files",open:!0},"Only one file is signable at a time.",e("limel-list",{items:c}))))}get element(){return i(this)}static get style(){return""}};var b;d([function(t={}){const e={name:n.LimeobjectsState};return t.map=[l,...t.map||[]],r(t,e)}()],m.prototype,"document",void 0),d([(b={},r(b,{name:n.ConfigsState}))],m.prototype,"config",void 0);export{m as lwc_limepkg_scrive_test};