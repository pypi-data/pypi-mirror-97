(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{556:function(e,t,v){"use strict";v.r(t);var _=v(21),a=Object(_.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"nonebot-adapters-cqhttp-模块"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-adapters-cqhttp-模块"}},[e._v("#")]),e._v(" NoneBot.adapters.cqhttp 模块")]),e._v(" "),v("h2",{attrs:{id:"escape-s-escape-comma-true"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#escape-s-escape-comma-true"}},[e._v("#")]),e._v(" "),v("code",[e._v("escape(s, *, escape_comma=True)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("对字符串进行 CQ 码转义。")])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("s: str")]),e._v(": 需要转义的字符串")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("escape_comma: bool")]),e._v(": 是否转义逗号（"),v("code",[e._v(",")]),e._v("）。")])])])])]),e._v(" "),v("h2",{attrs:{id:"unescape-s"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#unescape-s"}},[e._v("#")]),e._v(" "),v("code",[e._v("unescape(s)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("对字符串进行 CQ 码去转义。")])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("s: str")]),e._v(": 需要转义的字符串")])])])]),e._v(" "),v("h2",{attrs:{id:"exception-cqhttpadapterexception"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#exception-cqhttpadapterexception"}},[e._v("#")]),e._v(" "),v("em",[e._v("exception")]),e._v(" "),v("code",[e._v("CQHTTPAdapterException")])]),e._v(" "),v("p",[e._v("基类："),v("router-link",{attrs:{to:"./../exception.html#nonebot.exception.AdapterException"}},[v("code",[e._v("nonebot.exception.AdapterException")])])],1),e._v(" "),v("h2",{attrs:{id:"exception-actionfailed"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#exception-actionfailed"}},[e._v("#")]),e._v(" "),v("em",[e._v("exception")]),e._v(" "),v("code",[e._v("ActionFailed")])]),e._v(" "),v("p",[e._v("基类："),v("router-link",{attrs:{to:"./../exception.html#nonebot.exception.ActionFailed"}},[v("code",[e._v("nonebot.exception.ActionFailed")])]),e._v(", "),v("code",[e._v("nonebot.adapters.cqhttp.exception.CQHTTPAdapterException")])],1),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("API 请求返回错误信息。")])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("retcode: Optional[int]")]),e._v(": 错误码")])])])]),e._v(" "),v("h2",{attrs:{id:"exception-networkerror"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#exception-networkerror"}},[e._v("#")]),e._v(" "),v("em",[e._v("exception")]),e._v(" "),v("code",[e._v("NetworkError")])]),e._v(" "),v("p",[e._v("基类："),v("router-link",{attrs:{to:"./../exception.html#nonebot.exception.NetworkError"}},[v("code",[e._v("nonebot.exception.NetworkError")])]),e._v(", "),v("code",[e._v("nonebot.adapters.cqhttp.exception.CQHTTPAdapterException")])],1),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("网络错误。")])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("retcode: Optional[int]")]),e._v(": 错误码")])])])]),e._v(" "),v("h2",{attrs:{id:"exception-apinotavailable"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#exception-apinotavailable"}},[e._v("#")]),e._v(" "),v("em",[e._v("exception")]),e._v(" "),v("code",[e._v("ApiNotAvailable")])]),e._v(" "),v("p",[e._v("基类："),v("router-link",{attrs:{to:"./../exception.html#nonebot.exception.ApiNotAvailable"}},[v("code",[e._v("nonebot.exception.ApiNotAvailable")])]),e._v(", "),v("code",[e._v("nonebot.adapters.cqhttp.exception.CQHTTPAdapterException")])],1),e._v(" "),v("h2",{attrs:{id:"async-check-reply-bot-event"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#async-check-reply-bot-event"}},[e._v("#")]),e._v(" "),v("em",[e._v("async")]),e._v(" "),v("code",[e._v("_check_reply(bot, event)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("检查消息中存在的回复，去除并赋值 "),v("code",[e._v("event.reply")]),e._v(", "),v("code",[e._v("event.to_me")])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("bot: Bot")]),e._v(": Bot 对象")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("event: Event")]),e._v(": Event 对象")])])])])]),e._v(" "),v("h2",{attrs:{id:"check-at-me-bot-event"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#check-at-me-bot-event"}},[e._v("#")]),e._v(" "),v("code",[e._v("_check_at_me(bot, event)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("检查消息开头或结尾是否存在 @机器人，去除并赋值 "),v("code",[e._v("event.to_me")])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("bot: Bot")]),e._v(": Bot 对象")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("event: Event")]),e._v(": Event 对象")])])])])]),e._v(" "),v("h2",{attrs:{id:"check-nickname-bot-event"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#check-nickname-bot-event"}},[e._v("#")]),e._v(" "),v("code",[e._v("_check_nickname(bot, event)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("检查消息开头是否存在，去除并赋值 "),v("code",[e._v("event.to_me")])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("bot: Bot")]),e._v(": Bot 对象")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("event: Event")]),e._v(": Event 对象")])])])])]),e._v(" "),v("h2",{attrs:{id:"handle-api-result-result"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#handle-api-result-result"}},[e._v("#")]),e._v(" "),v("code",[e._v("_handle_api_result(result)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("处理 API 请求返回值。")])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("result: Optional[Dict[str, Any]]")]),e._v(": API 返回数据")])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("返回")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("Any")]),e._v(": API 调用返回数据")])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("异常")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("ActionFailed")]),e._v(": API 调用失败")])])])]),e._v(" "),v("h2",{attrs:{id:"class-bot"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#class-bot"}},[e._v("#")]),e._v(" "),v("em",[e._v("class")]),e._v(" "),v("code",[e._v("Bot")])]),e._v(" "),v("p",[e._v("基类："),v("router-link",{attrs:{to:"./#nonebot.adapters.BaseBot"}},[v("code",[e._v("nonebot.adapters.BaseBot")])])],1),e._v(" "),v("p",[e._v("CQHTTP 协议 Bot 适配。继承属性参考 "),v("router-link",{attrs:{to:"./#class-basebot"}},[e._v("BaseBot")]),e._v(" 。")],1),e._v(" "),v("h3",{attrs:{id:"property-type"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-type"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("type")])]),e._v(" "),v("ul",[v("li",[e._v("返回: "),v("code",[e._v('"cqhttp"')])])]),e._v(" "),v("h3",{attrs:{id:"async-classmethod-check-permission-driver-connection-type-headers-body"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#async-classmethod-check-permission-driver-connection-type-headers-body"}},[e._v("#")]),e._v(" "),v("em",[e._v("async classmethod")]),e._v(" "),v("code",[e._v("check_permission(driver, connection_type, headers, body)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("CQHTTP (OneBot) 协议鉴权。参考 "),v("a",{attrs:{href:"https://github.com/howmanybots/onebot/blob/master/v11/specs/communication/authorization.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("鉴权"),v("OutboundLink")],1)])])]),e._v(" "),v("h3",{attrs:{id:"async-handle-message-message"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#async-handle-message-message"}},[e._v("#")]),e._v(" "),v("em",[e._v("async")]),e._v(" "),v("code",[e._v("handle_message(message)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("调用 "),v("a",{attrs:{href:"#async-check-reply-bot-event"}},[e._v("_check_reply")]),e._v(", "),v("a",{attrs:{href:"#check-at-me-bot-event"}},[e._v("_check_at_me")]),e._v(", "),v("a",{attrs:{href:"#check-nickname-bot-event"}},[e._v("_check_nickname")]),e._v(" 处理事件并转换为 "),v("a",{attrs:{href:"#class-event"}},[e._v("Event")])])])]),e._v(" "),v("h3",{attrs:{id:"async-call-api-api-data"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#async-call-api-api-data"}},[e._v("#")]),e._v(" "),v("em",[e._v("async")]),e._v(" "),v("code",[e._v("call_api(api, **data)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("调用 CQHTTP 协议 API")])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("api: str")]),e._v(": API 名称")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("**data: Any")]),e._v(": API 参数")])])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("返回")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("Any")]),e._v(": API 调用返回数据")])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("异常")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("NetworkError")]),e._v(": 网络错误")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("ActionFailed")]),e._v(": API 调用失败")])])])])]),e._v(" "),v("h3",{attrs:{id:"async-send-event-message-at-sender-false-kwargs"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#async-send-event-message-at-sender-false-kwargs"}},[e._v("#")]),e._v(" "),v("em",[e._v("async")]),e._v(" "),v("code",[e._v("send(event, message, at_sender=False, **kwargs)")])]),e._v(" "),v("ul",[v("li",[v("p",[v("strong",[e._v("说明")])]),e._v(" "),v("p",[e._v("根据 "),v("code",[e._v("event")]),e._v("  向触发事件的主体发送消息。")])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("参数")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("event: Event")]),e._v(": Event 对象")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("message: Union[str, Message, MessageSegment]")]),e._v(": 要发送的消息")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("at_sender: bool")]),e._v(": 是否 @ 事件主体")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("**kwargs")]),e._v(": 覆盖默认参数")])])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("返回")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("Any")]),e._v(": API 调用返回数据")])])]),e._v(" "),v("li",[v("p",[v("strong",[e._v("异常")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("ValueError")]),e._v(": 缺少 "),v("code",[e._v("user_id")]),e._v(", "),v("code",[e._v("group_id")])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("NetworkError")]),e._v(": 网络错误")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("ActionFailed")]),e._v(": API 调用失败")])])])])]),e._v(" "),v("h2",{attrs:{id:"class-event"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#class-event"}},[e._v("#")]),e._v(" "),v("em",[e._v("class")]),e._v(" "),v("code",[e._v("Event")])]),e._v(" "),v("p",[e._v("基类："),v("router-link",{attrs:{to:"./#nonebot.adapters.BaseEvent"}},[v("code",[e._v("nonebot.adapters.BaseEvent")])])],1),e._v(" "),v("p",[e._v("CQHTTP 协议 Event 适配。继承属性参考 "),v("router-link",{attrs:{to:"./#class-baseevent"}},[e._v("BaseEvent")]),e._v(" 。")],1),e._v(" "),v("h3",{attrs:{id:"property-id"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-id"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("id")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[int]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 事件/消息 ID")])])]),e._v(" "),v("h3",{attrs:{id:"property-name"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-name"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("name")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("str")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 事件名称，由类型与 "),v("code",[e._v(".")]),e._v(" 组合而成")])])]),e._v(" "),v("h3",{attrs:{id:"property-self-id"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-self-id"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("self_id")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("str")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 机器人自身 ID")])])]),e._v(" "),v("h3",{attrs:{id:"property-time"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-time"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("time")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("int")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 事件发生时间")])])]),e._v(" "),v("h3",{attrs:{id:"property-type-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-type-2"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("type")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("str")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 事件类型")])])]),e._v(" "),v("h3",{attrs:{id:"property-detail-type"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-detail-type"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("detail_type")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("str")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 事件详细类型")])])]),e._v(" "),v("h3",{attrs:{id:"property-sub-type"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-sub-type"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("sub_type")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[str]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 事件子类型")])])]),e._v(" "),v("h3",{attrs:{id:"property-user-id"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-user-id"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("user_id")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[int]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 事件主体 ID")])])]),e._v(" "),v("h3",{attrs:{id:"property-group-id"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-group-id"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("group_id")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[int]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 事件主体群 ID")])])]),e._v(" "),v("h3",{attrs:{id:"property-to-me"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-to-me"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("to_me")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[bool]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 消息是否与机器人相关")])])]),e._v(" "),v("h3",{attrs:{id:"property-message"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-message"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("message")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[Message]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 消息内容")])])]),e._v(" "),v("h3",{attrs:{id:"property-reply"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-reply"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("reply")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[dict]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 回复消息详情")])])]),e._v(" "),v("h3",{attrs:{id:"property-raw-message"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-raw-message"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("raw_message")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[str]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 原始消息")])])]),e._v(" "),v("h3",{attrs:{id:"property-plain-text"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-plain-text"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("plain_text")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[str]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 纯文本消息内容")])])]),e._v(" "),v("h3",{attrs:{id:"property-sender"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#property-sender"}},[e._v("#")]),e._v(" "),v("em",[e._v("property")]),e._v(" "),v("code",[e._v("sender")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("类型: "),v("code",[e._v("Optional[dict]")])])]),e._v(" "),v("li",[v("p",[e._v("说明: 消息发送者信息")])])]),e._v(" "),v("h2",{attrs:{id:"class-messagesegment"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#class-messagesegment"}},[e._v("#")]),e._v(" "),v("em",[e._v("class")]),e._v(" "),v("code",[e._v("MessageSegment")])]),e._v(" "),v("p",[e._v("基类："),v("router-link",{attrs:{to:"./#nonebot.adapters.BaseMessageSegment"}},[v("code",[e._v("nonebot.adapters.BaseMessageSegment")])])],1),e._v(" "),v("p",[e._v("CQHTTP 协议 MessageSegment 适配。具体方法参考协议消息段类型或源码。")]),e._v(" "),v("h2",{attrs:{id:"class-message"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#class-message"}},[e._v("#")]),e._v(" "),v("em",[e._v("class")]),e._v(" "),v("code",[e._v("Message")])]),e._v(" "),v("p",[e._v("基类："),v("router-link",{attrs:{to:"./#nonebot.adapters.BaseMessage"}},[v("code",[e._v("nonebot.adapters.BaseMessage")])])],1),e._v(" "),v("p",[e._v("CQHTTP 协议 Message 适配。")])])}),[],!1,null,null,null);t.default=a.exports}}]);