(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{559:function(t,a,s){"use strict";s.r(a);var e=s(21),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nonebot-drivers-模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-drivers-模块"}},[t._v("#")]),t._v(" NoneBot.drivers 模块")]),t._v(" "),s("h2",{attrs:{id:"后端驱动适配基类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端驱动适配基类"}},[t._v("#")]),t._v(" 后端驱动适配基类")]),t._v(" "),s("p",[t._v("各驱动请继承以下基类")]),t._v(" "),s("h2",{attrs:{id:"class-basedriver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-basedriver"}},[t._v("#")]),t._v(" "),s("em",[t._v("class")]),t._v(" "),s("code",[t._v("BaseDriver")])]),t._v(" "),s("p",[t._v("基类："),s("code",[t._v("abc.ABC")])]),t._v(" "),s("p",[t._v("Driver 基类。将后端框架封装，以满足适配器使用。")]),t._v(" "),s("h3",{attrs:{id:"adapters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adapters"}},[t._v("#")]),t._v(" "),s("code",[t._v("_adapters")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("类型")])]),t._v(" "),s("p",[s("code",[t._v("Dict[str, Type[Bot]]")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("已注册的适配器列表")])])]),t._v(" "),s("h3",{attrs:{id:"abstract-init-env-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-init-env-config"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("__init__(env, config)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("env: Env")]),t._v(": 包含环境信息的 Env 对象")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("config: Config")]),t._v(": 包含配置信息的 Config 对象")])])])])]),t._v(" "),s("h3",{attrs:{id:"env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[t._v("#")]),t._v(" "),s("code",[t._v("env")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("类型")])]),t._v(" "),s("p",[s("code",[t._v("str")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("环境名称")])])]),t._v(" "),s("h3",{attrs:{id:"config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[t._v("#")]),t._v(" "),s("code",[t._v("config")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("类型")])]),t._v(" "),s("p",[s("code",[t._v("Config")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("配置对象")])])]),t._v(" "),s("h3",{attrs:{id:"clients"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clients"}},[t._v("#")]),t._v(" "),s("code",[t._v("_clients")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("类型")])]),t._v(" "),s("p",[s("code",[t._v("Dict[str, Bot]")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("已连接的 Bot")])])]),t._v(" "),s("h3",{attrs:{id:"classmethod-register-adapter-name-adapter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-register-adapter-name-adapter"}},[t._v("#")]),t._v(" "),s("em",[t._v("classmethod")]),t._v(" "),s("code",[t._v("register_adapter(name, adapter)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("注册一个协议适配器")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("name: str")]),t._v(": 适配器名称，用于在连接时进行识别")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("adapter: Type[Bot]")]),t._v(": 适配器 Class")])])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-property-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-type"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract property")]),t._v(" "),s("code",[t._v("type")])]),t._v(" "),s("p",[t._v("驱动类型名称")]),t._v(" "),s("h3",{attrs:{id:"abstract-property-server-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-server-app"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract property")]),t._v(" "),s("code",[t._v("server_app")])]),t._v(" "),s("p",[t._v("驱动 APP 对象")]),t._v(" "),s("h3",{attrs:{id:"abstract-property-asgi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-asgi"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract property")]),t._v(" "),s("code",[t._v("asgi")])]),t._v(" "),s("p",[t._v("驱动 ASGI 对象")]),t._v(" "),s("h3",{attrs:{id:"abstract-property-logger"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-logger"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract property")]),t._v(" "),s("code",[t._v("logger")])]),t._v(" "),s("p",[t._v("驱动专属 logger 日志记录器")]),t._v(" "),s("h3",{attrs:{id:"property-bots"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#property-bots"}},[t._v("#")]),t._v(" "),s("em",[t._v("property")]),t._v(" "),s("code",[t._v("bots")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("类型")])]),t._v(" "),s("p",[s("code",[t._v("Dict[str, Bot]")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取当前所有已连接的 Bot")])])]),t._v(" "),s("h3",{attrs:{id:"abstract-on-startup-func"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-on-startup-func"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("on_startup(func)")])]),t._v(" "),s("p",[t._v("注册一个在驱动启动时运行的函数")]),t._v(" "),s("h3",{attrs:{id:"abstract-on-shutdown-func"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-on-shutdown-func"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("on_shutdown(func)")])]),t._v(" "),s("p",[t._v("注册一个在驱动停止时运行的函数")]),t._v(" "),s("h3",{attrs:{id:"abstract-run-host-none-port-none-args-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-run-host-none-port-none-args-kwargs"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("run(host=None, port=None, *args, **kwargs)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("启动驱动框架")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("host: Optional[str]")]),t._v(": 驱动绑定 IP")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("post: Optional[int]")]),t._v(": 驱动绑定端口")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("*args")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("**kwargs")])])])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-async-handle-http"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-handle-http"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("_handle_http()")])]),t._v(" "),s("p",[t._v("用于处理 HTTP 类型请求的函数")]),t._v(" "),s("h3",{attrs:{id:"abstract-async-handle-ws-reverse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-handle-ws-reverse"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("_handle_ws_reverse()")])]),t._v(" "),s("p",[t._v("用于处理 WebSocket 类型请求的函数")]),t._v(" "),s("h2",{attrs:{id:"class-basewebsocket"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-basewebsocket"}},[t._v("#")]),t._v(" "),s("em",[t._v("class")]),t._v(" "),s("code",[t._v("BaseWebSocket")])]),t._v(" "),s("p",[t._v("基类："),s("code",[t._v("object")])]),t._v(" "),s("p",[t._v("WebSocket 连接封装，统一接口方便外部调用。")]),t._v(" "),s("h3",{attrs:{id:"abstract-init-websocket"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-init-websocket"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("__init__(websocket)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("websocket: Any")]),t._v(": WebSocket 连接对象")])])])]),t._v(" "),s("h3",{attrs:{id:"property-websocket"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#property-websocket"}},[t._v("#")]),t._v(" "),s("em",[t._v("property")]),t._v(" "),s("code",[t._v("websocket")])]),t._v(" "),s("p",[t._v("WebSocket 连接对象")]),t._v(" "),s("h3",{attrs:{id:"abstract-property-closed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-closed"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract property")]),t._v(" "),s("code",[t._v("closed")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("类型")])]),t._v(" "),s("p",[s("code",[t._v("bool")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("连接是否已经关闭")])])]),t._v(" "),s("h3",{attrs:{id:"abstract-async-accept"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-accept"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("accept()")])]),t._v(" "),s("p",[t._v("接受 WebSocket 连接请求")]),t._v(" "),s("h3",{attrs:{id:"abstract-async-close-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-close-code"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("close(code)")])]),t._v(" "),s("p",[t._v("关闭 WebSocket 连接请求")]),t._v(" "),s("h3",{attrs:{id:"abstract-async-receive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-receive"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("receive()")])]),t._v(" "),s("p",[t._v("接收一条 WebSocket 信息")]),t._v(" "),s("h3",{attrs:{id:"abstract-async-send-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-send-data"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("send(data)")])]),t._v(" "),s("p",[t._v("发送一条 WebSocket 信息")])])}),[],!1,null,null,null);a.default=r.exports}}]);