(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{568:function(t,s,_){"use strict";_.r(s);var e=_(21),v=Object(e.a)({},(function(){var t=this,s=t.$createElement,_=t._self._c||s;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"nonebot-rule-模块"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-rule-模块"}},[t._v("#")]),t._v(" NoneBot.rule 模块")]),t._v(" "),_("h2",{attrs:{id:"规则"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#规则"}},[t._v("#")]),t._v(" 规则")]),t._v(" "),_("p",[t._v("每个事件响应器 "),_("code",[t._v("Matcher")]),t._v(" 拥有一个匹配规则 "),_("code",[t._v("Rule")]),t._v(" ，其中是 "),_("strong",[t._v("异步")]),t._v(" "),_("code",[t._v("RuleChecker")]),t._v(" 的集合，只有当所有 "),_("code",[t._v("RuleChecker")]),t._v(" 检查结果为 "),_("code",[t._v("True")]),t._v(" 时继续运行。")]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),_("p",[_("code",[t._v("RuleChecker")]),t._v(" 既可以是 async function 也可以是 sync function，但在最终会被 "),_("code",[t._v("nonebot.utils.run_sync")]),t._v(" 转换为 async function")])]),t._v(" "),_("h2",{attrs:{id:"class-rule"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#class-rule"}},[t._v("#")]),t._v(" "),_("em",[t._v("class")]),t._v(" "),_("code",[t._v("Rule")])]),t._v(" "),_("p",[t._v("基类："),_("code",[t._v("object")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[_("code",[t._v("Matcher")]),t._v(" 规则类，当事件传递时，在 "),_("code",[t._v("Matcher")]),t._v(" 运行前进行检查。")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("示例")])])])]),t._v(" "),_("div",{staticClass:"language-python line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-python"}},[_("code",[t._v("Rule"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("async_function"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" sync_function\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等价于")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" nonebot"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" run_sync\nRule"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("async_function"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" run_sync"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sync_function"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br")])]),_("h3",{attrs:{id:"init-checkers"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#init-checkers"}},[t._v("#")]),t._v(" "),_("code",[t._v("__init__(*checkers)")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("参数")])]),t._v(" "),_("ul",[_("li",[_("code",[t._v("*checkers: Callable[[Bot, Event, dict], Awaitable[bool]]")]),t._v(": "),_("strong",[t._v("异步")]),t._v(" RuleChecker")])])])]),t._v(" "),_("h3",{attrs:{id:"checkers"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#checkers"}},[t._v("#")]),t._v(" "),_("code",[t._v("checkers")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[t._v("存储 "),_("code",[t._v("RuleChecker")])])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("类型")])]),t._v(" "),_("ul",[_("li",[_("code",[t._v("Set[Callable[[Bot, Event, dict], Awaitable[bool]]]")])])])])]),t._v(" "),_("h3",{attrs:{id:"async-call-bot-event-state"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#async-call-bot-event-state"}},[t._v("#")]),t._v(" "),_("em",[t._v("async")]),t._v(" "),_("code",[t._v("__call__(bot, event, state)")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[t._v("检查是否符合所有规则")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("参数")])]),t._v(" "),_("ul",[_("li",[_("p",[_("code",[t._v("bot: Bot")]),t._v(": Bot 对象")])]),t._v(" "),_("li",[_("p",[_("code",[t._v("event: Event")]),t._v(": Event 对象")])]),t._v(" "),_("li",[_("p",[_("code",[t._v("state: dict")]),t._v(": 当前 State")])])])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("返回")])]),t._v(" "),_("ul",[_("li",[_("code",[t._v("bool")])])])])]),t._v(" "),_("h2",{attrs:{id:"startswith-msg"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#startswith-msg"}},[t._v("#")]),t._v(" "),_("code",[t._v("startswith(msg)")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[t._v("匹配消息开头")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("参数")])]),t._v(" "),_("ul",[_("li",[_("code",[t._v("msg: str")]),t._v(": 消息开头字符串")])])])]),t._v(" "),_("h2",{attrs:{id:"endswith-msg"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#endswith-msg"}},[t._v("#")]),t._v(" "),_("code",[t._v("endswith(msg)")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[t._v("匹配消息结尾")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("参数")])]),t._v(" "),_("ul",[_("li",[_("code",[t._v("msg: str")]),t._v(": 消息结尾字符串")])])])]),t._v(" "),_("h2",{attrs:{id:"keyword-keywords"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#keyword-keywords"}},[t._v("#")]),t._v(" "),_("code",[t._v("keyword(*keywords)")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[t._v("匹配消息关键词")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("参数")])]),t._v(" "),_("ul",[_("li",[_("code",[t._v("*keywords: str")]),t._v(": 关键词")])])])]),t._v(" "),_("h2",{attrs:{id:"command-cmds"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#command-cmds"}},[t._v("#")]),t._v(" "),_("code",[t._v("command(*cmds)")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[t._v("命令形式匹配，根据配置里提供的 "),_("code",[t._v("command_start")]),t._v(", "),_("code",[t._v("command_sep")]),t._v(" 判断消息是否为命令。")]),t._v(" "),_("p",[t._v("可以通过 "),_("code",[t._v('state["_prefix"]["command"]')]),t._v(" 获取匹配成功的命令（例："),_("code",[t._v('("test",)')]),t._v("），通过 "),_("code",[t._v('state["_prefix"]["raw_command"]')]),t._v(" 获取匹配成功的原始命令文本（例："),_("code",[t._v('"/test"')]),t._v("）。")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("参数")])]),t._v(" "),_("ul",[_("li",[_("code",[t._v("*cmds: Union[str, Tuple[str, ...]]")]),t._v(": 命令内容")])])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("示例")])]),t._v(" "),_("p",[t._v("使用默认 "),_("code",[t._v("command_start")]),t._v(", "),_("code",[t._v("command_sep")]),t._v(" 配置")]),t._v(" "),_("p",[t._v("命令 "),_("code",[t._v('("test",)')]),t._v(" 可以匹配："),_("code",[t._v("/test")]),t._v(" 开头的消息\n命令 "),_("code",[t._v('("test", "sub")')]),t._v(" 可以匹配”"),_("code",[t._v("/test.sub")]),t._v(" 开头的消息")])])]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),_("p",[t._v("命令内容与后续消息间无需空格！")])]),t._v(" "),_("h2",{attrs:{id:"regex-regex-flags-0"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#regex-regex-flags-0"}},[t._v("#")]),t._v(" "),_("code",[t._v("regex(regex, flags=0)")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[t._v("根据正则表达式进行匹配。")]),t._v(" "),_("p",[t._v("可以通过 "),_("code",[t._v('state["_matched"]')]),t._v(" 获取正则表达式匹配成功的文本。")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("参数")])]),t._v(" "),_("ul",[_("li",[_("p",[_("code",[t._v("regex: str")]),t._v(": 正则表达式")])]),t._v(" "),_("li",[_("p",[_("code",[t._v("flags: Union[int, re.RegexFlag]")]),t._v(": 正则标志")])])])])]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),_("p",[t._v("正则表达式匹配使用 search 而非 match，如需从头匹配请使用 "),_("code",[t._v('r"^xxx"')]),t._v(" 来确保匹配开头")])]),t._v(" "),_("h2",{attrs:{id:"to-me"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#to-me"}},[t._v("#")]),t._v(" "),_("code",[t._v("to_me()")])]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("说明")])]),t._v(" "),_("p",[t._v("通过 "),_("code",[t._v("event.to_me")]),t._v(" 判断消息是否是发送给机器人")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("参数")])]),t._v(" "),_("ul",[_("li",[t._v("无")])])])])])}),[],!1,null,null,null);s.default=v.exports}}]);