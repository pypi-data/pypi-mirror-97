(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{516:function(t,e,s){"use strict";s.r(e);var a=s(21),_=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nonebot-adapters-模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-adapters-模块"}},[t._v("#")]),t._v(" NoneBot.adapters 模块")]),t._v(" "),s("h2",{attrs:{id:"协议适配基类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#协议适配基类"}},[t._v("#")]),t._v(" 协议适配基类")]),t._v(" "),s("p",[t._v("各协议请继承以下基类，并使用 "),s("code",[t._v("driver.register_adapter")]),t._v(" 注册适配器")]),t._v(" "),s("h2",{attrs:{id:"class-bot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-bot"}},[t._v("#")]),t._v(" "),s("em",[t._v("class")]),t._v(" "),s("code",[t._v("Bot")])]),t._v(" "),s("p",[t._v("基类："),s("code",[t._v("abc.ABC")])]),t._v(" "),s("p",[t._v("Bot 基类。用于处理上报消息，并提供 API 调用接口。")]),t._v(" "),s("h3",{attrs:{id:"driver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#driver"}},[t._v("#")]),t._v(" "),s("code",[t._v("driver")])]),t._v(" "),s("p",[t._v("Driver 对象")]),t._v(" "),s("h3",{attrs:{id:"config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[t._v("#")]),t._v(" "),s("code",[t._v("config")])]),t._v(" "),s("p",[t._v("Config 配置对象")]),t._v(" "),s("h3",{attrs:{id:"abstract-init-connection-type-self-id-websocket-none"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-init-connection-type-self-id-websocket-none"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("__init__(connection_type, self_id, *, websocket=None)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("connection_type: str")]),t._v(": http 或者 websocket")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("self_id: str")]),t._v(": 机器人 ID")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("websocket: Optional[WebSocket]")]),t._v(": Websocket 连接对象")])])])])]),t._v(" "),s("h3",{attrs:{id:"connection-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#connection-type"}},[t._v("#")]),t._v(" "),s("code",[t._v("connection_type")])]),t._v(" "),s("p",[t._v("连接类型")]),t._v(" "),s("h3",{attrs:{id:"self-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#self-id"}},[t._v("#")]),t._v(" "),s("code",[t._v("self_id")])]),t._v(" "),s("p",[t._v("机器人 ID")]),t._v(" "),s("h3",{attrs:{id:"websocket"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocket"}},[t._v("#")]),t._v(" "),s("code",[t._v("websocket")])]),t._v(" "),s("p",[t._v("Websocket 连接对象")]),t._v(" "),s("h3",{attrs:{id:"abstract-property-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-type"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract property")]),t._v(" "),s("code",[t._v("type")])]),t._v(" "),s("p",[t._v("Adapter 类型")]),t._v(" "),s("h3",{attrs:{id:"classmethod-register-driver-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-register-driver-config"}},[t._v("#")]),t._v(" "),s("em",[t._v("classmethod")]),t._v(" "),s("code",[t._v("register(driver, config)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("register 方法会在 driver.register_adapter 时被调用，用于初始化相关配置")])])]),t._v(" "),s("h3",{attrs:{id:"abstract-async-classmethod-check-permission-driver-connection-type-headers-body"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-classmethod-check-permission-driver-connection-type-headers-body"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async classmethod")]),t._v(" "),s("code",[t._v("check_permission(driver, connection_type, headers, body)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("检查连接请求是否合法的函数，如果合法则返回当前连接 "),s("code",[t._v("唯一标识符")]),t._v("，通常为机器人 ID；如果不合法则抛出 "),s("code",[t._v("RequestDenied")]),t._v(" 异常。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("driver: Driver")]),t._v(": Driver 对象")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("connection_type: str")]),t._v(": 连接类型")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("headers: dict")]),t._v(": 请求头")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body: Optional[dict]")]),t._v(": 请求数据，WebSocket 连接该部分为空")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("str")]),t._v(": 连接唯一标识符")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("异常")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("RequestDenied")]),t._v(": 请求非法")])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-async-handle-message-message"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-handle-message-message"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("handle_message(message)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("处理上报消息的函数，转换为 "),s("code",[t._v("Event")]),t._v(" 事件后调用 "),s("code",[t._v("nonebot.message.handle_event")]),t._v(" 进一步处理事件。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("message: dict")]),t._v(": 收到的上报消息")])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-async-call-api-api-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-call-api-api-data"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("call_api(api, **data)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("调用机器人 API 接口，可以通过该函数或直接通过 bot 属性进行调用")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("api: str")]),t._v(": API 名称")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("**data")]),t._v(": API 数据")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("示例")])])])]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("call_api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"send_msg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"abstract-async-send-event-message-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-send-event-message-kwargs"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract async")]),t._v(" "),s("code",[t._v("send(event, message, **kwargs)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("调用机器人基础发送消息接口")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("event: Event")]),t._v(": 上报事件")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("message: Union[str, Message, MessageSegment]")]),t._v(": 要发送的消息")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("**kwargs")])])])])])]),t._v(" "),s("h2",{attrs:{id:"class-messagesegment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-messagesegment"}},[t._v("#")]),t._v(" "),s("em",[t._v("class")]),t._v(" "),s("code",[t._v("MessageSegment")])]),t._v(" "),s("p",[t._v("基类："),s("code",[t._v("abc.ABC")]),t._v(", "),s("code",[t._v("Mapping")])]),t._v(" "),s("p",[t._v("消息段基类")]),t._v(" "),s("h3",{attrs:{id:"type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" "),s("code",[t._v("type")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("类型: "),s("code",[t._v("str")])])]),t._v(" "),s("li",[s("p",[t._v("说明: 消息段类型")])])]),t._v(" "),s("h3",{attrs:{id:"data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#data"}},[t._v("#")]),t._v(" "),s("code",[t._v("data")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("类型: "),s("code",[t._v("Dict[str, Union[str, list]]")])])]),t._v(" "),s("li",[s("p",[t._v("说明: 消息段数据")])])]),t._v(" "),s("h2",{attrs:{id:"class-message"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-message"}},[t._v("#")]),t._v(" "),s("em",[t._v("class")]),t._v(" "),s("code",[t._v("Message")])]),t._v(" "),s("p",[t._v("基类："),s("code",[t._v("list")]),t._v(", "),s("code",[t._v("abc.ABC")])]),t._v(" "),s("p",[t._v("消息数组")]),t._v(" "),s("h3",{attrs:{id:"init-message-none-args-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#init-message-none-args-kwargs"}},[t._v("#")]),t._v(" "),s("code",[t._v("__init__(message=None, *args, **kwargs)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("message: Union[str, list, dict, MessageSegment, Message, Any]")]),t._v(": 消息内容")])])])]),t._v(" "),s("h3",{attrs:{id:"append-obj"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#append-obj"}},[t._v("#")]),t._v(" "),s("code",[t._v("append(obj)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("添加一个消息段到消息数组末尾")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("obj: Union[str, MessageSegment]")]),t._v(": 要添加的消息段")])])])]),t._v(" "),s("h3",{attrs:{id:"extend-obj"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extend-obj"}},[t._v("#")]),t._v(" "),s("code",[t._v("extend(obj)")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("拼接一个消息数组或多个消息段到消息数组末尾")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("obj: Union[Message, Iterable[MessageSegment]]")]),t._v(": 要添加的消息数组")])])])]),t._v(" "),s("h3",{attrs:{id:"reduce"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reduce"}},[t._v("#")]),t._v(" "),s("code",[t._v("reduce()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("缩减消息数组，即按 MessageSegment 的实现拼接相邻消息段")])])]),t._v(" "),s("h3",{attrs:{id:"extract-plain-text"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extract-plain-text"}},[t._v("#")]),t._v(" "),s("code",[t._v("extract_plain_text()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("提取消息内纯文本消息")])])]),t._v(" "),s("h2",{attrs:{id:"class-event"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-event"}},[t._v("#")]),t._v(" "),s("em",[t._v("class")]),t._v(" "),s("code",[t._v("Event")])]),t._v(" "),s("p",[t._v("基类："),s("code",[t._v("abc.ABC")]),t._v(", "),s("code",[t._v("pydantic.main.BaseModel")])]),t._v(" "),s("p",[t._v("Event 基类。提供获取关键信息的方法，其余信息可直接获取。")]),t._v(" "),s("h3",{attrs:{id:"abstract-get-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-type"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("get_type()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取事件类型的方法，类型通常为 NoneBot 内置的四种类型。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v('Literal["message", "notice", "request", "meta_event"]')])])]),t._v(" "),s("li",[s("p",[t._v("其他自定义 "),s("code",[t._v("str")])])])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-get-event-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-event-name"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("get_event_name()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取事件名称的方法。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("str")])])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-get-event-description"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-event-description"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("get_event_description()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取事件描述的方法，通常为事件具体内容。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("str")])])])])]),t._v(" "),s("h3",{attrs:{id:"get-log-string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-log-string"}},[t._v("#")]),t._v(" "),s("code",[t._v("get_log_string()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取事件日志信息的方法，通常你不需要修改这个方法，只有当希望 NoneBot 隐藏该事件日志时，可以抛出 "),s("code",[t._v("NoLogException")]),t._v(" 异常。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("str")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("异常")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("NoLogException")])])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-get-user-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-user-id"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("get_user_id()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取事件主体 id 的方法，通常是用户 id 。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("str")])])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-get-session-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-session-id"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("get_session_id()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取会话 id 的方法，用于判断当前事件属于哪一个会话，通常是用户 id、群组 id 组合。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("str")])])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-get-message"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-message"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("get_message()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取事件消息内容的方法。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Message")])])])])]),t._v(" "),s("h3",{attrs:{id:"get-plaintext"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-plaintext"}},[t._v("#")]),t._v(" "),s("code",[t._v("get_plaintext()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取消息纯文本的方法，通常不需要修改，默认通过 "),s("code",[t._v("get_message().extract_plain_text")]),t._v(" 获取。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("str")])])])])]),t._v(" "),s("h3",{attrs:{id:"abstract-is-tome"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract-is-tome"}},[t._v("#")]),t._v(" "),s("em",[t._v("abstract")]),t._v(" "),s("code",[t._v("is_tome()")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("说明")])]),t._v(" "),s("p",[t._v("获取事件是否与机器人有关的方法。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("返回")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("bool")])])])])])])}),[],!1,null,null,null);e.default=_.exports}}]);