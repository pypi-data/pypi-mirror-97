(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{594:function(t,a,e){"use strict";e.r(a);var s=e(21),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"nonebot-drivers-模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-drivers-模块"}},[t._v("#")]),t._v(" NoneBot.drivers 模块")]),t._v(" "),e("h2",{attrs:{id:"后端驱动适配基类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后端驱动适配基类"}},[t._v("#")]),t._v(" 后端驱动适配基类")]),t._v(" "),e("p",[t._v("各驱动请继承以下基类")]),t._v(" "),e("h2",{attrs:{id:"class-driver"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-driver"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("Driver")])]),t._v(" "),e("p",[t._v("基类："),e("code",[t._v("abc.ABC")])]),t._v(" "),e("p",[t._v("Driver 基类。将后端框架封装，以满足适配器使用。")]),t._v(" "),e("h3",{attrs:{id:"adapters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#adapters"}},[t._v("#")]),t._v(" "),e("code",[t._v("_adapters")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Dict[str, Type[Bot]]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("已注册的适配器列表")])])]),t._v(" "),e("h3",{attrs:{id:"ws-connection-hook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ws-connection-hook"}},[t._v("#")]),t._v(" "),e("code",[t._v("_ws_connection_hook")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Set[T_WebSocketConnectionHook]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("WebSocket 连接建立时执行的函数")])])]),t._v(" "),e("h3",{attrs:{id:"ws-disconnection-hook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ws-disconnection-hook"}},[t._v("#")]),t._v(" "),e("code",[t._v("_ws_disconnection_hook")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Set[T_WebSocketDisconnectionHook]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("WebSocket 连接断开时执行的函数")])])]),t._v(" "),e("h3",{attrs:{id:"abstract-init-env-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-init-env-config"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract")]),t._v(" "),e("code",[t._v("__init__(env, config)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("env: Env")]),t._v(": 包含环境信息的 Env 对象")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("config: Config")]),t._v(": 包含配置信息的 Config 对象")])])])])]),t._v(" "),e("h3",{attrs:{id:"env"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[t._v("#")]),t._v(" "),e("code",[t._v("env")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("str")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("环境名称")])])]),t._v(" "),e("h3",{attrs:{id:"config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[t._v("#")]),t._v(" "),e("code",[t._v("config")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Config")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("配置对象")])])]),t._v(" "),e("h3",{attrs:{id:"clients"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clients"}},[t._v("#")]),t._v(" "),e("code",[t._v("_clients")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Dict[str, Bot]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("已连接的 Bot")])])]),t._v(" "),e("h3",{attrs:{id:"classmethod-register-adapter-name-adapter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-register-adapter-name-adapter"}},[t._v("#")]),t._v(" "),e("em",[t._v("classmethod")]),t._v(" "),e("code",[t._v("register_adapter(name, adapter)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("注册一个协议适配器")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("name: str")]),t._v(": 适配器名称，用于在连接时进行识别")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("adapter: Type[Bot]")]),t._v(": 适配器 Class")])])])])]),t._v(" "),e("h3",{attrs:{id:"abstract-property-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-type"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("type")])]),t._v(" "),e("p",[t._v("驱动类型名称")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-server-app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-server-app"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("server_app")])]),t._v(" "),e("p",[t._v("驱动 APP 对象")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-asgi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-asgi"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("asgi")])]),t._v(" "),e("p",[t._v("驱动 ASGI 对象")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-logger"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-logger"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("logger")])]),t._v(" "),e("p",[t._v("驱动专属 logger 日志记录器")]),t._v(" "),e("h3",{attrs:{id:"property-bots"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#property-bots"}},[t._v("#")]),t._v(" "),e("em",[t._v("property")]),t._v(" "),e("code",[t._v("bots")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Dict[str, Bot]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("获取当前所有已连接的 Bot")])])]),t._v(" "),e("h3",{attrs:{id:"abstract-on-startup-func"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-on-startup-func"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract")]),t._v(" "),e("code",[t._v("on_startup(func)")])]),t._v(" "),e("p",[t._v("注册一个在驱动启动时运行的函数")]),t._v(" "),e("h3",{attrs:{id:"abstract-on-shutdown-func"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-on-shutdown-func"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract")]),t._v(" "),e("code",[t._v("on_shutdown(func)")])]),t._v(" "),e("p",[t._v("注册一个在驱动停止时运行的函数")]),t._v(" "),e("h3",{attrs:{id:"on-bot-connect-func"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#on-bot-connect-func"}},[t._v("#")]),t._v(" "),e("code",[t._v("on_bot_connect(func)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("装饰一个函数使他在 bot 通过 WebSocket 连接成功时执行。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("函数参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("bot: Bot")]),t._v(": 当前连接上的 Bot 对象")])])])]),t._v(" "),e("h3",{attrs:{id:"on-bot-disconnect-func"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#on-bot-disconnect-func"}},[t._v("#")]),t._v(" "),e("code",[t._v("on_bot_disconnect(func)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("装饰一个函数使他在 bot 通过 WebSocket 连接断开时执行。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("函数参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("bot: Bot")]),t._v(": 当前连接上的 Bot 对象")])])])]),t._v(" "),e("h3",{attrs:{id:"bot-connect-bot"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bot-connect-bot"}},[t._v("#")]),t._v(" "),e("code",[t._v("_bot_connect(bot)")])]),t._v(" "),e("p",[t._v("在 WebSocket 连接成功后，调用该函数来注册 bot 对象")]),t._v(" "),e("h3",{attrs:{id:"bot-disconnect-bot"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bot-disconnect-bot"}},[t._v("#")]),t._v(" "),e("code",[t._v("_bot_disconnect(bot)")])]),t._v(" "),e("p",[t._v("在 WebSocket 连接断开后，调用该函数来注销 bot 对象")]),t._v(" "),e("h3",{attrs:{id:"abstract-run-host-none-port-none-args-kwargs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-run-host-none-port-none-args-kwargs"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract")]),t._v(" "),e("code",[t._v("run(host=None, port=None, *args, **kwargs)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("启动驱动框架")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("host: Optional[str]")]),t._v(": 驱动绑定 IP")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("post: Optional[int]")]),t._v(": 驱动绑定端口")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("*args")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("**kwargs")])])])])])]),t._v(" "),e("h3",{attrs:{id:"abstract-async-handle-http"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-handle-http"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("_handle_http()")])]),t._v(" "),e("p",[t._v("用于处理 HTTP 类型请求的函数")]),t._v(" "),e("h3",{attrs:{id:"abstract-async-handle-ws-reverse"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-handle-ws-reverse"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("_handle_ws_reverse()")])]),t._v(" "),e("p",[t._v("用于处理 WebSocket 类型请求的函数")]),t._v(" "),e("h2",{attrs:{id:"class-websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-websocket"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("WebSocket")])]),t._v(" "),e("p",[t._v("基类："),e("code",[t._v("object")])]),t._v(" "),e("p",[t._v("WebSocket 连接封装，统一接口方便外部调用。")]),t._v(" "),e("h3",{attrs:{id:"abstract-init-websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-init-websocket"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract")]),t._v(" "),e("code",[t._v("__init__(websocket)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("websocket: Any")]),t._v(": WebSocket 连接对象")])])])]),t._v(" "),e("h3",{attrs:{id:"property-websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#property-websocket"}},[t._v("#")]),t._v(" "),e("em",[t._v("property")]),t._v(" "),e("code",[t._v("websocket")])]),t._v(" "),e("p",[t._v("WebSocket 连接对象")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-closed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-closed"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("closed")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("bool")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("连接是否已经关闭")])])]),t._v(" "),e("h3",{attrs:{id:"abstract-async-accept"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-accept"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("accept()")])]),t._v(" "),e("p",[t._v("接受 WebSocket 连接请求")]),t._v(" "),e("h3",{attrs:{id:"abstract-async-close-code"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-close-code"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("close(code)")])]),t._v(" "),e("p",[t._v("关闭 WebSocket 连接请求")]),t._v(" "),e("h3",{attrs:{id:"abstract-async-receive"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-receive"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("receive()")])]),t._v(" "),e("p",[t._v("接收一条 WebSocket 信息")]),t._v(" "),e("h3",{attrs:{id:"abstract-async-send-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-send-data"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("send(data)")])]),t._v(" "),e("p",[t._v("发送一条 WebSocket 信息")])])}),[],!1,null,null,null);a.default=_.exports}}]);