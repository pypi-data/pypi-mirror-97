
<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
   <meta name="robots" content="NONE,NOARCHIVE" />
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
   <title>'Polemarch' documentation</title>
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <script type="text/javascript" src="_static/bundle/vstutils.chunk.js"></script>
    <script type="text/javascript" src="_static/bundle/auth~doc~spa.chunk.js"></script>
    <script type="text/javascript" src="_static/bundle/doc.js"></script>
    <link rel="stylesheet" href="_static/ce-docs.css" type="text/css" />
   <link rel="shortcut icon" href="_static/img/logo/favicon.ico" />
    <script>
        window.hostname = window.location.origin || window.location.protocol + "//" + window.location.host
    </script>
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script> 
</head>

<body class="hold-transition gui-skin-default sidebar-mini">
<div id="loader-wrapper">
    <div id="loader"></div>
</div>
<div class="wrapper" >
    
    <a href="https://github.com/vstconsulting/polemarch" class="fork-me">
        <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
    </a>
    
    <header class="main-header">
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top">
            <!-- Sidebar toggle button-->
            <a class="nav-link" data-widget="pushmenu" onclick="saveHideMenuSettings()" href="#"><i class="fa fa-bars  ico-data-default"></i></a>
        </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <!-- Logo  -->
        
    <!-- Logo -->
    <a href="index.html"  id="root_link" class="brand-link logo app-logo">
        <img src="_static/img/logo/logo.png" alt="" class="brand-image img-circle elevation-3" style="opacity: .8; float: inherit">
        <img src="_static/img/logo/horizontal.svg" class="brand-image text-logo" style="opacity: .8">
    </a>

        <!-- sidebar: style can be found in sidebar.less -->
        <div class="sidebar">
            <!-- sidebar menu: : style can be found in sidebar.less -->

        <nav class="mt-2">
            <ul class="sidebar-menu nav nav-pills nav-sidebar flex-column ico-menu" data-widget="treeview" role="menu" data-accordion="false">
                <li class="nav-header">DOCS NAVIGATION</li>
                <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
</ul>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-from-pypi">Install from PyPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-from-docker">Install from docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quickstart">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="#backup">Backup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update">Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-from-any-old-version">Update from any old version</a></li>
<li class="toctree-l2"><a class="reference internal" href="#migrate">Migrate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-superuser">Create superuser</a></li>
<li class="toctree-l2"><a class="reference internal" href="#change-password">Change password</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to participate</a></li>
<li class="toctree-l1"><a class="reference internal" href="cla.html">VST Consulting contributor agreement</a></li>
</ul>

            </ul>
            <!-- github link  -->
            
                
                <h3>Watch us on GitHub</h3>
                <p>
                <iframe src="https://ghbtns.com/github-btn.html?user=vstconsulting&repo=polemarch&type=watch&count=true&size=large&v=2"
                  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
                </p>
                
            
            <!-- quick search -->
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" class="search-input-docs rounded-left"/>
      <span class="search-button-wrapper rounded-right">
          <span class="fa fa-search search-button-icon"></span>
          <input type="submit" value="   " class="search-button-input" />
      </span>

      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </nav>
        </div>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" id='spajs-right-area'>
        <!--  Main content -->

        <!-- For notification about not up-to-date-version -->
        <div class="body" role="main"></div>
        <!-- -->

        <section class="content-header">
                <h1>'Polemarch' documentation</h1>
        </section>
        <section class="content">
            <div class="container-fluid">
                <div class="card card-info">
                    <div class="card-body">
                             
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="install-from-pypi">
<h2>Install from PyPI<a class="headerlink" href="#install-from-pypi" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Install dependencies:</p>
<p>Required packages on Ubuntu/Debian:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install python3-virtualenv python3.6 python3.6-dev gcc libffi-dev libkrb5-dev libffi6 libssl-dev libyaml-dev libsasl2-dev libldap2-dev default-libmysqlclient-dev sshpass git
</pre></div>
</div>
<p>Required packages on Red Hat/CentOS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum install epel-release
sudo yum install https://<span class="k">$(</span>rpm -E <span class="s1">&#39;%{?centos:centos}%{!?centos:rhel}%{rhel}&#39;</span><span class="k">)</span>.iuscommunity.org/ius-release.rpm
sudo yum install python36u python36u-devel python36-virtualenv openssl-devel libyaml-devel krb5-devel krb5-libs openldap-devel mysql-devel git sshpass
</pre></div>
</div>
</li>
<li><dl>
<dt>Create user:</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo useradd --user-group --create-home --shell /bin/bash polemarch
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can add this user to sudoers for easer instalation proccess and support.</p>
</div>
</dd>
</dl>
</li>
<li><p>Create virtualenv and activate it:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>virtualenv --python<span class="o">=</span>python3.6 /opt/polemarch
sudo chown -R polemarch:polemarch /opt/polemarch
sudo -u polemarch -i
<span class="nb">source</span> /opt/polemarch/bin/activate
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have more then one Python version, recomended use Python 3.6 and create virtualenv with Py3.6</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We support Python 2.7 until Polemarch 2.0 release.</p>
</div>
</div></blockquote>
</li>
<li><p>Install Polemarch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U polemarch<span class="o">[</span>mysql<span class="o">]</span>
</pre></div>
</div>
</li>
<li><p>Edit config file:</p>
<ol class="arabic">
<li><p>Open <cite>/etc/polemarch/settings.ini</cite>, if it does not exist, create it. Polemarch uses config from this directory.</p></li>
<li><p>The default database is SQLite3, but MariaDB is recommended. Settings needed for correct work MariaDB database:</p>
<blockquote>
<div><div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[database]</span>
<span class="na">engine</span> <span class="o">=</span> <span class="s">django.db.backends.mysql</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">db_name</span>
<span class="na">user</span> <span class="o">=</span> <span class="s">db_user</span>
<span class="na">password</span> <span class="o">=</span> <span class="s">db_password</span>

<span class="k">[database.options]</span>
<span class="na">connect_timeout</span> <span class="o">=</span> <span class="s">20</span>
<span class="na">init_command</span> <span class="o">=</span> <span class="s">SET sql_mode=&#39;STRICT_TRANS_TABLES&#39;, default_storage_engine=INNODB, NAMES &#39;utf8&#39;, CHARACTER SET &#39;utf8&#39;, SESSION collation_connection = &#39;utf8_unicode_ci&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">port</span></code> settings if you connect to remote server.</p>
</div>
</div></blockquote>
</li>
<li><p>Create database in MariaDB with this commands:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -H mysql <span class="s">&lt;&lt;QUERY_INPUT</span>
<span class="s">SET @@global.innodb_large_prefix = 1;</span>
<span class="s">create user db_user;</span>
<span class="s">create database db_name default CHARACTER set utf8   default COLLATE utf8_general_ci;</span>
<span class="s">grant all on db_name.* to &#39;db_user&#39;@&#39;localhost&#39; identified by &#39;db_password&#39;;</span>
<span class="s">QUERY_INPUT</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should do it on database host if you connect to remote server.</p>
</div>
</div></blockquote>
</li>
<li><p>Then, if you use MariaDB and you have set timezone different from “UTC” you should run next command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mysql_tzinfo_to_sql /usr/share/zoneinfo <span class="p">|</span> sudo -H mysql mysql
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should do it on database host if you connect to remote server.</p>
</div>
</div></blockquote>
</li>
<li><p>The default cache system is file based cache, but RedisCache is recommended. Settings needed for correct RedisCache work:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[cache]</span>
<span class="na">backend</span> <span class="o">=</span> <span class="s">django_redis.cache.RedisCache</span>
<span class="na">location</span> <span class="o">=</span> <span class="s">redis://127.0.0.1:6379/1</span>

<span class="k">[locks]</span>
<span class="na">backend</span> <span class="o">=</span> <span class="s">django_redis.cache.RedisCache</span>
<span class="na">location</span> <span class="o">=</span> <span class="s">redis://127.0.0.1:6379/2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Set host ip and port instead of 127.0.0.1:6379 if you connect to remote server.</p>
</div>
</li>
<li><p>The default celery broker is file Celery broker, but Redis is recommended. Settings needed for correct Redis work:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[rpc]</span>
<span class="na">connection</span> <span class="o">=</span> <span class="s">redis://127.0.0.1:6379/3</span>
<span class="na">heartbeat</span> <span class="o">=</span> <span class="s">5</span>
<span class="na">concurrency</span> <span class="o">=</span> <span class="s">8</span>
<span class="na">enable_worker</span> <span class="o">=</span> <span class="s">true</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Set host ip and port instead of 127.0.0.1:6379 if you connect to remote server.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Use RabbitMQ in case there can be a big network delay between the Polemarch nodes.</p>
</div>
</li>
<li><p>Create directory for <cite>log</cite> and <cite>pid</cite> files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir /opt/polemarch/logs /opt/polemarch/pid
</pre></div>
</div>
</li>
<li><p>For running Polemarch with worker, you need to create follow sections:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">processes</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">threads</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">harakiri</span> <span class="o">=</span> <span class="s">120</span>
<span class="na">vacuum</span> <span class="o">=</span> <span class="s">True</span>
<span class="na">http-keepalive</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">http-auto-chunked</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">thread-stacksize</span> <span class="o">=</span> <span class="s">512</span>
<span class="na">pidfile</span> <span class="o">=</span> <span class="s">/opt/polemarch/pid/polemarch.pid</span>
<span class="na">log_file</span> <span class="o">=</span> <span class="s">/opt/polemarch/logs/{PROG_NAME}_web.log</span>
<span class="c1"># Uncomment it for HTTPS and install `uwsgi` pypi package to env:</span>
<span class="c1"># addrport = 127.0.0.1:8080</span>
<span class="c1"># https = 0.0.0.0:443,/etc/polemarch/polemarch.crt,/etc/polemarch/polemarch.key</span>

<span class="k">[worker]</span>
<span class="c1"># output will be /opt/polemarch/logs/polemarch_worker.log</span>
<span class="na">logfile</span> <span class="o">=</span> <span class="s">/opt/polemarch/logs/{PROG_NAME}_worker.log</span>
<span class="c1"># output will be /opt/polemarch/pid/polemarch_worker.pid</span>
<span class="na">pidfile</span> <span class="o">=</span> <span class="s">/opt/polemarch/pid/{PROG_NAME}_worker.pid</span>
<span class="na">loglevel</span> <span class="o">=</span> <span class="s">INFO</span>
</pre></div>
</div>
<p>Also if you need to set your own path for logfile or pidfile,
different from the path from example, you can do it, but make sure,
that user, which starts Polemarch has write-permissions for these directory and file.
If you run it as root, we recommend to add in <code class="docutils literal notranslate"><span class="pre">`[uwsig]`</span></code> params <code class="docutils literal notranslate"><span class="pre">`uid`</span></code> and <code class="docutils literal notranslate"><span class="pre">`gid`</span></code>
(<a class="reference external" href="https://uwsgi-docs.readthedocs.io/en/latest/Namespaces.html#the-old-way-the-namespace-option">read more</a>).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>More configuration settings you can find in <a class="reference internal" href="config.html"><span class="doc">Configuration manual</span></a>.</p>
</div>
</li>
</ol>
</li>
<li><p>Make migrations:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>polemarchctl migrate
</pre></div>
</div>
</li>
<li><p>Start Polemarch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>polemarchctl webserver
</pre></div>
</div>
</li>
</ol>
<p>Polemarch starts with web interface on port 8080.</p>
<p>If you need to restart Polemarch use following command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>polemarchctl webserver <span class="nv">reload</span><span class="o">=</span>/opt/polemarch/pid/polemarch.pid
</pre></div>
</div>
</div></blockquote>
<p>If you use another directory for storing Polemarch pid file, use path to this file.</p>
<p>If you need to stop Polemarch use following command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>polemarchctl webserver <span class="nv">stop</span><span class="o">=</span>/opt/polemarch/pid/polemarch.pid
</pre></div>
</div>
</div></blockquote>
<p>If you use another directory for storing Polemarch pid file, use path to this file.</p>
</div>
<div class="section" id="install-from-docker">
<h2>Install from docker<a class="headerlink" href="#install-from-docker" title="Permalink to this headline">¶</a></h2>
<div class="section" id="run-image">
<h3>Run image<a class="headerlink" href="#run-image" title="Permalink to this headline">¶</a></h3>
<p>For run Polemarch docker image use command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -d --name polemarch --restart always -v /opt/polemarch/projects:/projects -v /opt/polemarch/hooks:/hooks vstconsulting/polemarch
</pre></div>
</div>
</div></blockquote>
<p>Using this command download official docker image and run it with default settings. Dont use default SQLite installation with filecache in production.</p>
<p>Polemarch will be run with web interface on port <cite>8080</cite></p>
</div>
<div class="section" id="settings">
<h3>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="main-section">
<h3>Main section<a class="headerlink" href="#main-section" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>POLEMARCH_DEBUG</strong> - status of debug mode. Default value: <cite>false</cite>.</p></li>
<li><p><strong>POLEMARCH_LOG_LEVEL</strong> - log level. Default value: <cite>WARNING</cite>.</p></li>
<li><p><strong>TIMEZONE</strong> - timezone. Default value: <cite>UTC</cite>.</p></li>
</ul>
</div>
<div class="section" id="database-section">
<h3>Database section<a class="headerlink" href="#database-section" title="Permalink to this headline">¶</a></h3>
<p>If you not set <strong>POLEMARCH_DB_HOST</strong>, default database would be SQLite3, path to database file: <cite>/db.sqlite3</cite>. If you set <strong>POLEMARCH_DB_HOST</strong>, Polemarch would be use MYSQL with next variabls:</p>
<ul class="simple">
<li><p><strong>POLEMARCH_DB_TYPE</strong> - name of database type. Support: <cite>mysql</cite> and <cite>postgres</cite> database. Needed only with <strong>POLEMARCH_DB_HOST</strong> option.</p></li>
<li><p><strong>POLEMARCH_DB_NAME</strong> - name of database.</p></li>
<li><p><strong>POLEMARCH_DB_USER</strong> - user connected to database.</p></li>
<li><p><strong>POLEMARCH_DB_PASSWORD</strong> - password for connection to database.</p></li>
<li><p><strong>POLEMARCH_DB_HOST</strong> - host for connection to database.</p></li>
<li><p><strong>POLEMARCH_DB_PORT</strong> - port for connection to database.</p></li>
</ul>
</div>
<div class="section" id="database-options-section">
<h3>Database.Options section<a class="headerlink" href="#database-options-section" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>DB_INIT_CMD</strong> - command to start your database</p></li>
</ul>
</div>
<div class="section" id="cache">
<h3>Cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>CACHE_LOCATION</strong> - path to cache, if you use <cite>/tmp/polemarch_django_cache</cite> path, then cache engine would be <cite>FileBasedCache</cite>, else <cite>MemcacheCache</cite>. Default value: <a href="#id1"><span class="problematic" id="id2">``</span></a>/tmp/polemarch_django_cache`</p></li>
</ul>
</div>
<div class="section" id="rpc-section">
<h3>RPC section<a class="headerlink" href="#rpc-section" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>RPC_ENGINE</strong> - connection to rpc service. If not set, not used.</p></li>
<li><p><strong>RPC_HEARTBEAT</strong> - Timeout for RPC. Default value: <cite>5</cite>.</p></li>
<li><p><strong>RPC_CONCURRENCY</strong> - Number of concurrently tasks. Default value: <cite>4</cite>.</p></li>
</ul>
</div>
<div class="section" id="web-section">
<h3>Web section<a class="headerlink" href="#web-section" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>POLEMARCH_WEB_REST_PAGE_LIMIT</strong> - Limit elements in answer, when send REST request. Default value: <cite>1000</cite>.</p></li>
</ul>
</div>
<div class="section" id="uwsgi-section">
<h3>UWSGI section<a class="headerlink" href="#uwsgi-section" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>POLEMARCH_UWSGI_PROCESSES</strong> - number of uwsgi processes. Default value: <cite>4</cite>.</p></li>
</ul>
</div>
<div class="section" id="other-settings">
<h3>Other settings<a class="headerlink" href="#other-settings" title="Permalink to this headline">¶</a></h3>
<p>If you set <cite>WORKER</cite> to <cite>ENABLE</cite> state, uwsgi run worker as daemon.</p>
<p>If you set <cite>SECRET_KEY</cite>,value of <cite>SECRET_KEY</cite> variable would be written to <cite>secret</cite></p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Run latest version of Polemarch in docker and connect to MySQL on server:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -d --name polemarch --restart always -v /opt/polemarch/projects:/projects -v /opt/polemarch/hooks:/hooks --env <span class="nv">POLEMARCH_DB_TYPE</span><span class="o">=</span>mysql --env <span class="nv">POLEMARCH_DB_NAME</span><span class="o">=</span>polemarch --env <span class="nv">POLEMARCH_DB_USER</span><span class="o">=</span>polemarch --env <span class="nv">POLEMARCH_DB_PASSWORD</span><span class="o">=</span>polemarch --env <span class="nv">POLEMARCH_DB_PORT</span><span class="o">=</span><span class="m">3306</span> --env <span class="nv">POLEMARCH_DB_HOST</span><span class="o">=</span>polemarch_db vstconsulting/polemarch
</pre></div>
</div>
</div></blockquote>
<p>Run Polemarch with Memcache and RabbitMQ and SQLite3. Polemarch log-level=INFO, secret-key=mysecretkey</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -d --name polemarch --restart always -v /opt/polemarch/projects:/projects -v /opt/polemarch/hooks:/hooks --env <span class="nv">RPC_ENGINE</span><span class="o">=</span>amqp://polemarch:polemarch@rabbitmq-server:5672/polemarch --env <span class="nv">CACHE_LOCATION</span><span class="o">=</span>memcached-server:11211 --env <span class="nv">POLEMARCH_LOG_LEVEL</span><span class="o">=</span>INFO --env <span class="nv">SECRET_KEY</span><span class="o">=</span>mysecretkey vstconsulting/polemarch
</pre></div>
</div>
</div></blockquote>
<p>Also you can use <cite>.env</cite> file with all variable you want use on run docker:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -d --name polemarch --restart always -v /opt/polemarch/projects:/projects -v /opt/polemarch/hooks:/hooks --env-file /path/to/file vstconsulting/polemarch
</pre></div>
</div>
</div></blockquote>
<p>Run from the sources with docker-compose (PoleMarch+MySQL+Redis):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker-compose up -d --build
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h2>
<p>After you install Polemarch by instructions above you can use it without any
further configuration. Interface is pretty intuitive and common for any web
application. Read more in <a class="reference internal" href="gui.html"><span class="doc">GUI workflow documentation</span></a>.</p>
<p>Default installation is suitable for most simple and common cases, but
Polemarch is highly configurable system. If you need something more advanced
(scalability, dedicated DB, custom cache, logging or directories) you can
always configure Polemarch like it is said in <a class="reference internal" href="config.html"><span class="doc">Configuration manual</span></a>.</p>
</div>
<div class="section" id="backup">
<h2>Backup<a class="headerlink" href="#backup" title="Permalink to this headline">¶</a></h2>
<p>Regular uploading of backups is a guarantee of the reliability of the application.
We recomended use SQL backup or copy database.</p>
<p>There are examples of SQL backup for MySQL and PostgreSQL below.</p>
<p>Making backup in MySQL:</p>
<blockquote>
<div><div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span><span class="n">shell</span><span class="o">&gt;</span> <span class="n">mysqldump</span> <span class="n">dbname</span> <span class="o">&gt;</span> <span class="n">dump</span><span class="p">.</span><span class="k">sql</span>
</pre></div>
</div>
</div></blockquote>
<p>Here dbname is the name of your database, dump.sql is the file, where all SQL backup statements
will be saved.</p>
<p>Uploading of backup in MySQL:</p>
<blockquote>
<div><div class="highlight-mysql notranslate"><div class="highlight"><pre><span></span><span class="n">shell</span><span class="o">&gt;</span> <span class="n">mysqladmin</span> <span class="k">create</span> <span class="n">dbname</span>
<span class="n">shell</span><span class="o">&gt;</span> <span class="n">mysql</span> <span class="n">dbname</span> <span class="o">&lt;</span> <span class="n">dump</span><span class="p">.</span><span class="k">sql</span>
</pre></div>
</div>
</div></blockquote>
<p>Making backup in PostgreSQL:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pg_dump dbname &gt; dump.sql
</pre></div>
</div>
</div></blockquote>
<p>Uploading of backup in PostgreSQL:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>createdb dbname
psql dbname &lt; dump.sql
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="update">
<h2>Update<a class="headerlink" href="#update" title="Permalink to this headline">¶</a></h2>
<p>Before updating of package of any type it is strongly recommended to stop all services and create backup for safety.</p>
</div>
<div class="section" id="update-from-any-old-version">
<h2>Update from any old version<a class="headerlink" href="#update-from-any-old-version" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Firstly, we strongly recommend you to create a database backup and to stop all Polemarch services for safety.</p></li>
<li><p>Secondly, if you are updating from 0.x.y to 1.x.y, you need to update you current 0.x.y version to 1.0.0 version.</p></li>
<li><p>Then update to the latest version. If you don’t know how to do it, look <a class="reference internal" href="#"><span class="doc">“Install from PyPI”</span></a>.</p></li>
</ol>
</div>
<div class="section" id="migrate">
<h2>Migrate<a class="headerlink" href="#migrate" title="Permalink to this headline">¶</a></h2>
<p>Migrations are Django’s way of propagating changes you make to your models (adding a field, deleting a model, etc.)
into your database schema. They’re designed to be mostly automatic, but you need to know when to make migrations,
when to run them, and the common problems you might run into.</p>
<p>To run a <code class="docutils literal notranslate"><span class="pre">migrate</span></code> command you should run follow code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polemarchctl</span> <span class="n">migrate</span>
</pre></div>
</div>
</div>
<div class="section" id="create-superuser">
<h2>Create superuser<a class="headerlink" href="#create-superuser" title="Permalink to this headline">¶</a></h2>
<p>A superuser is the user, who has all permissions.</p>
<p>To create a superuser account use the follow command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polemarchctl</span> <span class="n">createsuperuser</span>
</pre></div>
</div>
<p>This command prompts for all required user’s options.</p>
</div>
<div class="section" id="change-password">
<h2>Change password<a class="headerlink" href="#change-password" title="Permalink to this headline">¶</a></h2>
<p>To change password use the follow command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polemarchctl</span> <span class="n">changepassword</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>It prompts you to enter a new password twice for the given user.
If the entries are identical, this immediately becomes the new password.
If you do not supply a user, the command will attempt to change the password of user whose username matches
the current user.</p>
</div>
</div>


                    </div>
                </div>
            </div>
        </section>
    </div>

    
    <footer class="main-footer">
        <div class="social">
            <a href="https://twitter.com/polemarchio">
                <svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1408 610q-56 25-121 34 68-40 93-117-65 38-134 51-61-66-153-66-87 0-148.5 61.5t-61.5 148.5q0 29 5 48-129-7-242-65t-192-155q-29 50-29 106 0 114 91 175-47-1-100-26v2q0 75 50 133.5t123 72.5q-29 8-51 8-13 0-39-4 21 63 74.5 104t121.5 42q-116 90-261 90-26 0-50-3 148 94 322 94 112 0 210-35.5t168-95 120.5-137 75-162 24.5-168.5q0-18-1-27 63-45 105-109zm256-194v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"></path></svg>
            </a>
            <span>|</span>
            <a href="https://polemarch-users.slack.com/">
                <svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1583 776q62 0 103.5 40.5t41.5 101.5q0 97-93 130l-172 59 56 167q7 21 7 47 0 59-42 102t-101 43q-47 0-85.5-27t-53.5-72l-55-165-310 106 55 164q8 24 8 47 0 59-42 102t-102 43q-47 0-85-27t-53-72l-55-163-153 53q-29 9-50 9-61 0-101.5-40t-40.5-101q0-47 27.5-85t71.5-53l156-53-105-313-156 54q-26 8-48 8-60 0-101-40.5t-41-100.5q0-47 27.5-85t71.5-53l157-53-53-159q-8-24-8-47 0-60 42-102.5t102-42.5q47 0 85 27t53 72l54 160 310-105-54-160q-8-24-8-47 0-59 42.5-102t101.5-43q47 0 85.5 27.5t53.5 71.5l53 161 162-55q21-6 43-6 60 0 102.5 39.5t42.5 98.5q0 45-30 81.5t-74 51.5l-157 54 105 316 164-56q24-8 46-8zm-794 262l310-105-105-315-310 107z"></path></svg>
            </a>
            <span>|</span>
            <a href="https://stackoverflow.com/questions/tagged/polemarch">
                <svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1417 1632h-1118v-480h-160v640h1438v-640h-160v480zm-942-524l33-157 783 165-33 156zm103-374l67-146 725 339-67 145zm201-356l102-123 614 513-102 123zm397-378l477 641-128 96-477-641zm-718 1471v-159h800v159h-800z"></path></svg>
            </a>
        </div>
        <div class="pull-right d-none d-sm-block">
            &copy; 2019, VST Consulting
        </div>
    </footer>

</div>

</body>

</html>

