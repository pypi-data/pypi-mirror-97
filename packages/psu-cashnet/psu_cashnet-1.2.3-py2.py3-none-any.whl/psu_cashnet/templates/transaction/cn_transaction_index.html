{% extends 'psu_base.html' %}
{% load base_taglib %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{%block title%}Cashnet Transactions{%endblock%}</title>
    {% block scripts %}

    {% endblock %}
</head>
<body>
    {% block pagecontent %}

    <h1>Cashnet Transactions</h1>

    <form method="get" class="float-right">
        <label>
            Filter:
            <input type="text" name="keywords" value="{{keywords|default:''}}" />
            <button type="submit">{%fa fa-filter%}</button>
        </label>
    </form><br style="clear:both;" />
    {%if keywords%}
        <span class="code" style="display: inline-block;margin-bottom: 5px;">
            {{keywords}}
            <a href="?keywords=" style="color: #777;">{%fa fa-times%}</a>
        </span>
    {%endif%}

    <table class="table table-striped table-hover table-condensed" id="transaction_table">
        <thead>
            <tr>
                <th scope="col"><a href="?sort=id">ID</a></th>
                <th scope="col"><a href="?sort=customer_name">Customer</a></th>
                <th scope="col"><a href="?sort=customer_psu_id">PSU ID</a></th>
                <th scope="col"><a href="?sort=last_updated">Activity Date</a></th>
                <th scope="col"><a href="?sort=status_code">Tx Status</a></th>
                <th scope="col">Amount</th>
                <th scope="col"><a href="?sort=reference_id">Object Reference</a></th>
                <th scope="col"><a href="?sort=post_processing_status">Post-Processing Status</a></th>
            </tr>
        </thead>
        <tbody>
        {%for ii in transactions%}
            <tr>
                <td><a href="{%url 'cashnet:transaction_detail' ii.id%}">{{ii.id}}</a></td>
                <td>{{ii.customer_name}}</td>
                <td>{{ii.customer_psu_id}}</td>
                <td>{{ii.last_updated}}</td>
                <td>{{ii.status_desc}}</td>
                <td>{%format_currency ii.total_amount%}</td>
                <td>{{ii.reference_class}}:{{ii.reference_id}}</td>
                <td>{{ii.post_processing_status}}</td>
            </tr>
        {%endfor%}
        </tbody>
    </table>

    {%pagination transactions%}


    {% endblock %}
</body>
</html>