function moveItems(e,t){var o,n=document.getElementById(e),s=document.getElementById(t);if(-1===n.selectedIndex)selectionError();else for(;n.selectedIndex>-1;)n.options[n.selectedIndex].selected&&(o=new Option(n.options[n.selectedIndex].text,n.options[n.selectedIndex].value),s.options[s.length]=o,o.selected=!0,n.options[n.selectedIndex]=null)}function from2to(e){moveItems(e+"-from",e+"-to"),copyDataForSubmit(e)}function to2from(e){moveItems(e+"-to",e+"-from"),copyDataForSubmit(e)}function swapFields(e,t){var o=e.text;e.text=t.text,t.text=o,o=e.value,e.value=t.value,t.value=o,o=e.selected,e.selected=t.selected,t.selected=o}function moveUp(e){var t=document.getElementById(e+"-to");if(-1==t.selectedIndex)selectionError();else for(var o=1;o<t.length;o++)t.options[o].selected&&(swapFields(t.options[o-1],t.options[o]),copyDataForSubmit(e))}function moveDown(e){var t=document.getElementById(e+"-to");if(-1==t.selectedIndex)selectionError();else{for(var o=t.length-2;o>=0;o--)t.options[o].selected&&swapFields(t.options[o+1],t.options[o]);copyDataForSubmit(e)}}function copyDataForSubmit(e){for(var t=document.getElementById(e+"-to"),o=document.getElementById(e+"-toDataContainer");o.hasChildNodes();)o.removeChild(o.firstChild);for(var n=0;n<t.options.length;n++){var s=document.createElement("input");s.setAttribute("name",e.replace(/-/g,".")),s.setAttribute("type","hidden"),s.setAttribute("value",t.options[n].value),o.appendChild(s)}}function selectionError(){alert("Must select something!")}
