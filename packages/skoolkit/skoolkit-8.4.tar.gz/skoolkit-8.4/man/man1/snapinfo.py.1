.\" Man page generated from reStructuredText.
.
.TH "SNAPINFO.PY" "1" "Mar 06, 2021" "8.4" "SkoolKit"
.SH NAME
snapinfo.py \- show information on the registers and RAM in a snapshot file
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fBsnapinfo.py\fP [options] FILE
.SH DESCRIPTION
.sp
\fBsnapinfo.py\fP shows information on the registers or RAM in a binary (raw
memory) file or a SNA, SZX or Z80 snapshot.
.SH OPTIONS
.INDENT 0.0
.TP
.B \-b\fP,\fB  \-\-basic
List the BASIC program.
.UNINDENT
.INDENT 0.0
.TP
.B \-c, \-\-ctl \fIPATH\fP
When generating a call graph, specify a control file to use, or a directory
from which to read control files. By default, any files whose names start
with the input snapshot name (minus the .bin, .sna, .szx or .z80 suffix, if
any) and end with .ctl are used, if present. If \fIPATH\fP is \(aq\-\(aq, standard input
is used. This option may be used multiple times.
.TP
.B \-f, \-\-find \fIA[,B...[\-M[\-N]]]\fP
Search for the byte sequence \fIA\fP, \fIB\fP\&... with distance ranging from \fIM\fP to
\fIN\fP (default=1) between bytes. \fIA\fP, \fIB\fP, etc. and \fIM\fP and \fIN\fP must each be a
decimal number, or a hexadecimal number prefixed by \(aq0x\(aq.
.UNINDENT
.INDENT 0.0
.TP
.B \-g\fP,\fB  \-\-call\-graph
Generate a call graph in DOT format.
.UNINDENT
.INDENT 0.0
.TP
.B \-I, \-\-ini \fIparam=value\fP
Set the value of a configuration parameter (see \fBCONFIGURATION\fP),
overriding any value found in \fBskoolkit.ini\fP\&. This option may be used
multiple times.
.TP
.B \-o, \-\-org \fIADDR\fP
Specify the origin address of a binary (raw memory) file. The default origin
address is 65536 minus the length of the file. \fIADDR\fP must be a decimal
number, or a hexadecimal number prefixed by \(aq0x\(aq.
.TP
.B \-p, \-\-peek \fIA[\-B[\-C]]\fP
Show the contents of addresses \fIA\fP TO \fIB\fP STEP \fIC\fP\&. This option may be used
multiple times. \fIA\fP, \fIB\fP and \fIC\fP must each be a decimal number, or a
hexadecimal number prefixed by \(aq0x\(aq.
.TP
.B \-P, \-\-page \fIPAGE\fP
Specify the page (0\-7) of a 128K snapshot to map to 49152\-65535.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-show\-config
Show configuration parameter values.
.UNINDENT
.INDENT 0.0
.TP
.B \-t, \-\-find\-text \fITEXT\fP
Search for a text string.
.TP
.B \-T, \-\-find\-tile \fIX,Y[\-M[\-N]]\fP
Search for the graphic data of the tile at (X,Y) with distance ranging from M
to N (default=1) between bytes. \fIM\fP and \fIN\fP must each be a decimal number, or
a hexadecimal number prefixed by \(aq0x\(aq.
.UNINDENT
.INDENT 0.0
.TP
.B \-v\fP,\fB  \-\-variables
List the contents of the variables area.
.TP
.B \-V\fP,\fB  \-\-version
Show the SkoolKit version number and exit.
.UNINDENT
.INDENT 0.0
.TP
.B \-w, \-\-word \fIA[\-B[\-C]]\fP
Show the words (2\-byte values) at addresses \fIA\fP TO \fIB\fP STEP \fIC\fP\&. This option
may be used multiple times. \fIA\fP, \fIB\fP and \fIC\fP must each be a decimal number,
or a hexadecimal number prefixed by \(aq0x\(aq.
.UNINDENT
.SH CONFIGURATION
.sp
\fBsnapinfo.py\fP will read configuration from a file named \fBskoolkit.ini\fP in
the current working directory or in \fB~/.skoolkit\fP, if present. The recognised
configuration parameters are:
.INDENT 0.0
.TP
.B EdgeAttributes
The default attributes for edges in a call graph (default:
none).
.TP
.B GraphAttributes
The default attributes for a call graph (default: none).
.TP
.B NodeAttributes
The default attributes for nodes in a call graph (default:
\fBshape=record\fP).
.TP
.B NodeId
The format of the node IDs in a call graph (default: \fB{address}\fP).
.TP
.B NodeLabel
The format of the node labels in a call graph (default:
\fB"{address} {address:04X}\en{label}"\fP).
.TP
.B Peek
the format of each line of the output produced by the \fB\-\-peek\fP option
(default:
\fB{address:>5} {address:04X}: {value:>3}  {value:02X}  {value:08b}  {char}\fP)
.TP
.B Word
the format of each line of the output produced by the \fB\-\-word\fP option
(default: \fB{address:>5} {address:04X}: {value:>5}  {value:04X}\fP)
.UNINDENT
.sp
\fBNodeId\fP and \fBNodeLabel\fP are standard Python format strings that recognise
the replacement fields \fBaddress\fP and \fBlabel\fP (the address and label of the
first instruction in the routine represented by the node).
.sp
Configuration parameters must appear in a \fB[snapinfo]\fP section. For example,
to make \fBsnapinfo.py\fP use open arrowheads and a cyan background colour in
call graphs by default, add the following section to \fBskoolkit.ini\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[snapinfo]
EdgeAttributes=arrowhead=open
GraphAttributes=bgcolor=cyan
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Configuration parameters may also be set on the command line by using the
\fB\-\-ini\fP option. Parameter values set this way will override any found in
\fBskoolkit.ini\fP\&.
.SH EXAMPLES
.INDENT 0.0
.IP 1. 3
Display the contents of the registers in \fBgame.z80\fP:
.UNINDENT
.nf

.in +2
\fBsnapinfo.py game.z80\fP
.in -2
.fi
.sp
.INDENT 0.0
.IP 2. 3
Search for the graphic data of the tile currently at (2,3) on screen in
\fBgame.z80\fP, with a distance of 1 or 2 between bytes:
.UNINDENT
.nf

.in +2
\fBsnapinfo.py \-T 2,3\-1\-2 game.z80\fP
.in -2
.fi
.sp
.SH AUTHOR
Richard Dymond
.SH COPYRIGHT
2021, Richard Dymond
.\" Generated by docutils manpage writer.
.
