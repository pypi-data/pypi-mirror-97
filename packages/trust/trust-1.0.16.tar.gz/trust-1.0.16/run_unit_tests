#!/bin/bash

Packages=$(pip3 list)
if [[ "$Packages" =~ "coverage " ]]; then
    coverage run \
        --branch \
        --omit=*/site-packages/*,*/dist-packages/*,tests/* \
        -m unittest discover --failfast

    coverage report -m
else
    python3 -m unittest discover --failfast
fi

exit 0
